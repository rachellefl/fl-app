{"version":3,"sources":["pages/Dashboard/InputData/optimizers/Optimizer.js","components/Breadcrumb/styled.js","components/Breadcrumb/index.js","components/Header/styled.js","components/Header/index.js","utils/reader.js","utils/excel.js","utils/format.js","pages/Dashboard/InputData/readers/ProjectReader.js","pages/Dashboard/InputData/readers/MspReader.js","pages/Dashboard/InputData/readers/XerReader.js","feat/Modal/styled.js","feat/Modal/index.js","styled.js","pages/Dashboard/InputData/styled.js","pages/Dashboard/InputData/index.js","mods/a_utils.js","utils/plot.js","utils/color.js","components/Plot/TaskPlot.js","components/Plot/Distribution.js","pages/Dashboard/BaselineSummary/styled.js","pages/Dashboard/BaselineSummary/index.js","feat/LazyLoad/styled.js","feat/LazyLoad/index.js","pages/Dashboard/OptimizedSummary/styled.js","components/Plot/CombinedPlot.js","pages/Dashboard/OptimizedSummary/index.js","components/Table/styled.js","components/Table/index.js","components/Plot/ResourcePlot.js","components/Plot/Loss.js","components/Plot/Step.js","pages/Dashboard/DetailedReport/styled.js","pages/Dashboard/DetailedReport/index.js","pages/Dashboard/styled.js","pages/Dashboard/index.js","lib/fetch.js","utils/validator.js","pages/Login/styled.js","pages/Login/index.js","pages/ResetPassword/styled.js","pages/ResetPassword/index.js","App.js","index.js","assets/images/logo.png"],"names":["Optimizer","reader","this","sim_in","steps","default_start","min_ratio","max_ratio","lr","loss_weights","drtn_day","rsrc_max","rsrc_std","loss_task","loss_rsrc","loss_task_rsrc","results","Promise","res","ws","WebSocket","onopen","e","console","log","toast","success","onclose","error","finishedCallback","onmessage","out","JSON","parse","data","replace","modify_output","push","slice","sort","a","b","loss_sum","resultCallback","onerror","num_changed","task_rsrcs","task_preds","Object","values","inp","tasks","forEach","t","drtn_hr_2","Math","round","changed","drtn_hr","drtn_ratio","rsrcs","x","id","preds","assign","num_crt","crt_path","length","r","show_in_plot","clndrs","g","obj","send","stringify","close","init","readyState","OPEN","ignoredTasks","cons_data","tasks_cons","rsrcs_cons","task_rsrc_cons","c","drtn_hr_rng","min_drtn_hr","max_drtn_hr","ignored","toUpperCase","rng","max_units_per_day","t_id","r_id","units_rng","min_units","max_units","act_start","act_finish","filteredTasks","filter","proj_start","func","drtn_ratios","parseInt","ratio_rng","parseFloat","BreadcrumbContainer","styled","Stepper","Breadcrumb","navAt","navigate","disabled","activeStep","alternativeLabel","map","label","i","Step","key","onClick","StepLabel","HeaderContainer","div","Header","signOut","useSignOut","useNavigate","React","useState","anchorEl","setAnchorEl","open","Boolean","className","href","src","FLlogo","alt","aria-controls","undefined","aria-haspopup","aria-expanded","event","currentTarget","fontSize","Menu","onClose","anchorOrigin","vertical","horizontal","transformOrigin","MenuListProps","MenuList","MenuItem","window","ListItemIcon","ListItemText","Divider","copy","format_date","date","Date","toISOString","parse_drtn_hr","split","parse_time","to_iso","timestamp","encode_id","write_file","filename","text","elm","document","createElement","setAttribute","encodeURIComponent","style","display","body","appendChild","click","removeChild","as_array","Array","isArray","to_dict","keys","dic","k","Counter","len","entries","value","cnt","read_excel","file","FileReader","onload","book","xlsx","target","result","type","my_book","SheetNames","name","sheet_to_json","Sheets","readAsBinaryString","write_excel","wb","book_new","json_to_sheet","book_append_sheet","format_fields","v","includes","toFixed","ProjectReader","errors","File","trim","parse_text","extract_data","make_constraints","readAsText","copy_tasks","finish","now","start","start_2","finish_2","task_code","p_id","t_code","clndr_id","week_hr_cnt","units","t_name","r_name","baseline_resource","cost_per_unit_hr","cons_filename","MspReader","parser","XMLParser","ignoreAttributes","raw_data","prj","Project","all_tasks","Tasks","Task","UID","is_summary","Summary","Name","Start","Finish","Duration","ActualStart","ActualFinish","CalendarUID","PredecessorLink","PredecessorUID","0","1","2","3","Type","lag_hr","LinkLag","p","msg","add","Resources","Resource","Work","Material","Cost","dist","Calendars","Calendar","WeekDays","WeekDay","d","DayType","WorkingTimes","WorkingTime","hr","ToTime","FromTime","Assignments","Assignment","TaskUID","ResourceUID","work_hr","t2","EarlyStart","LateStart","EarlyFinish","LateFinish","recover_drtn","ActualDuration","x2","PeekUnits","units_2","XMLBuilder","build","XerReader","tables","table","line","cols","items","header","task_id_code_map","TASK","task_id","task_name","target_start_date","target_end_date","target_drtn_hr_cnt","act_start_date","act_end_date","RSRC","rsrc_id","rsrc_name","rsrc_type","Labor","Equip","Mat","CALENDAR","clndr_name","TASKPRED","task_pred_id","pred_task_id","pred_type","lag_hr_cnt","TASKRSRC","taskrsrc_id","target_qty","DELETE","early_start_date","late_start_date","early_end_date","late_end_date","target_qty_per_hr","lines","join","row","LoadingModal","Modal","ModalContent","Box","isLoading","spinner","title","content","aria-labelledby","aria-describedby","AppContainer","PrimaryButton","Button","SecondaryButton","Content","OptimizationContainer","InputField","Input","ratioMarks","stepMarks","InputData","uploadedFile","setUploadedFile","fileName","setFileName","constraintsFileName","setConstraintsFileName","project","updateProject","goNext","setIsLoading","fileReader","isFileUploaded","setIsFileUploaded","optimizer","ceil","ratio","setRatio","setSteps","todaysDate","minStartDate","setMinStartDate","setDate","useEffect","read_constraints","ignoredIndex","indexOf","endsWith","checkIsDemo","read_from_file","then","min_start","opt","optimize","opt_res","baseline_result","max","isDemo","readProject","alignItems","hidden","onChange","files","accept","htmlFor","textDecoration","cursor","fetch","blob","export_constraints","readConstraints","FormControl","inputProps","min","defaultValue","placeholder","variant","Tooltip","fontFamily","width","toString","Slider","step","valueLabelDisplay","getAriaLabel","marks","aria-label","down_sample","data_","keep","skip","floor","init_d3","margin","x_domain","y_domain","height","ref","x_label","y_label","x_type","d3","y_type","x1","y2","y1","x_scale","y_scale","svg","current","attr","selectChildren","remove","append","call","tickValues","xGrid","scale","tickFormat","tickSizeInner","yGrid","domains_with_margin","x_amount","y_amount","x_margin","y_margin","plot_color_palette","TaskPlot","optimizedTask","optimizedCriticalTask","baselineTask","baselineCriticalTask","ResourcePlot","allResources","selectedColor","baselineTasks","color","useRef","baselineData","critical","bd","x_optimized_domain","x_baseline_domain","y_optimized_domain","y_baseline_domain","selectAll","on","tooltip","background","position","top","pageY","left","pageX","padding","pointerEvents","borderRadius","ReactDOM","render","getElementById","unmountComponentAtNode","Alert","sx","severity","AlertTitle","DistibutionPlot","optimizationPresets","selectedPreset","selectedResultIndex","concat","domains","preset","o","circle","index","OptimizationCharts","LoadingTitle","BaselineSummary","handleSelectPreset","handleSelectResultIndex","balancedResults","fastestResults","leastMaxResults","leastStdResults","loadingPreset","optimizing","checkLoadedResults","checkSelectedVsLoaded","statData","numbers","marginRight","at","option","component","RadioGroup","FormControlLabel","control","Radio","description","LazyLoadContainer","LazyLoad","children","onLoadMore","isVisible","setIsVisible","ToggleGroup","ToggleButtonGroup","CombinedPlot","base_results","new_results","base_resource_distribution","new_resource_distribution","resources","showResourcePlot","setShowResourcePlot","useReducer","_","forceUpdate","y_optimized_values","flat","y_baseline_values","exclusive","ToggleButton","toggleSelectResource","item","newItem","ResourceList","visibleCount","setVisibleCount","remainingLength","opacity","str","limit","substring","prevCount","calculatePercentage","optimized","baseline","percentage","checkPositive","sign","abs","OptimizedSummary","goPrev","baselineResources","newResources","resourcesData","labor","base","new","material","l","toLowerCase","textTransform","rsrc_dist","TableContainer","Table","rows","columns","hidden_columns","makeRowHeight","initial_state","columnVisibilityModel","DataGrid","initialState","LossPlot","idx","StepsPlot","x_axis","TableContent","TableHead","DetailedReport","openModal","setOpenModal","selectedTasksResult","selectedResourcesResult","selectedTasksResourcesResult","changed_tasks","tasks_rows","task","calcRatio","old_duration","new_duration","tasks_columns","field","headerName","renderCell","params","maxHeight","whiteSpace","changed_resources","resources_rows","std","reduce","total","resources_columns","filteredTasksResourcesResults","changed_tasks_resources","rsrc","arrayResources","mapTask","tasks_resources_rows","resource_name","old_units","new_units","tasks_resources_columns","justifyContent","marginBottom","merge_data","export","export_excel","DashboardContainer","DEFAULT_PRESETS","balanced","shortest_duration","least_max_resources","least_std_resources","Dashboard","setNavAt","setProject","isPresetsReset","setIsPresetsReset","setOptimizationPresets","setSelectedPreset","setSelectedResultIndex","op","stop","weight","opt_res1","opt_res2","opt_res3","opt_res4","optimizePresets","componentToRender","checkPresetResultsLoaded","login","process","method","headers","requestResetPassword","resetPassword","validateEmail","email","test","String","message","require","config","LoginContainer","Login","emailRef","emailErrorMessage","setEmailErrorMessage","errorMessage","setErrorMessage","passwordRef","passwordErrorMessage","signIn","useSignIn","validEmail","password","response","json","resetPasswordRequired","accessToken","token","expiresIn","tokenType","authState","catch","flexDirection","noValidate","autoComplete","TextField","inputRef","helperText","rel","ResetContainer","ResetPassword","useSearchParams","searchParams","get","setEmail","setPassword","resetToken","App","authType","authName","cookieDomain","location","hostname","cookieSecure","path","element","loginPath","AppRegistry","registerComponent","runApplication","rootTag","module","exports"],"mappings":"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","file":"static/js/main.711e6d98.chunk.js","sourcesContent":["import { toast } from 'react-toastify'\n\nexport class Optimizer {\n  constructor(reader) {\n    this.reader = reader\n    this.sim_in = {\n      steps: '20',\n      default_start: '2023-03-01',\n      min_ratio: '0.5',\n      max_ratio: '1.5',\n      lr: '0.1',\n    }\n    this.loss_weights = {\n      drtn_day: 100,\n      rsrc_max: 0,\n      rsrc_std: 0,\n      loss_task: 0,\n      loss_rsrc: 0,\n      loss_task_rsrc: 0,\n    }\n    this.results = []\n  }\n\n  init() {\n    return new Promise((res) => {\n      let url = 'wss://engine.frontline-optimizer.com'\n      //let url = 'ws://127.0.0.1:8000'\n      // console.log(url)\n      this.ws = new WebSocket(url)\n      this.ws.onopen = (e) => {\n        console.log('Optimization Engine connected!')\n        toast.success('Optimization Engine connected!')\n        res()\n      }\n      this.ws.onclose = (e) => {\n        console.log('Optimization Engine disconnected!')\n        toast.error('Optimization Engine disconnected!')\n        this.finishedCallback(this.results)\n      }\n\n      this.ws.onmessage = (e) => {\n        let out = JSON.parse(e.data.replace(/\\bNaN\\b/g, 'null'))\n        if (out.success) toast.success('Engine: ' + out.success)\n        if (out.error) toast.error('Engine: ' + out.error)\n        if (out.drtn_day) {\n          this.modify_output(out)\n          this.results.push(out)\n          this.results = [\n            this.results[0],\n            ...this.results.slice(1).sort((a, b) => b.loss_sum - a.loss_sum),\n          ]\n        }\n        this.resultCallback(this.results)\n      }\n      this.ws.onerror = (e) => {\n        toast.error('Optimization Engine connection error!')\n      }\n    })\n  }\n\n  modify_output(out) {\n    let num_changed = 0\n    let task_rsrcs = {},\n      task_preds = {}\n    Object.values(out.inp.tasks).forEach((t) => {\n      t.drtn_hr_2 = Math.round(t.drtn_hr_2)\n      t.changed = t.drtn_hr !== t.drtn_hr_2\n      t.drtn_ratio = t.drtn_hr_2 / t.drtn_hr\n      if (t.changed) num_changed += 1\n      Object.values(t.rsrcs).forEach((x) => {\n        task_rsrcs[x.id] = x\n      })\n      Object.values(t.preds).forEach((x) => {\n        task_preds[x.id] = x\n      })\n    })\n    //console.log(task_rsrc, task_pred)\n    Object.assign(out.inp, { task_preds, task_rsrcs })\n    out.num_changed = num_changed\n    out.num_crt = out.crt_path.length\n    //this.debug_output(out)\n    Object.values(out.inp.rsrcs).forEach((r) => {\n      r.show_in_plot = true\n    })\n  }\n\n  debug_output(out) {\n    let { tasks, rsrcs, clndrs, task_preds, task_rsrcs } = out.inp\n    if (this.results.length === 1) {\n      console.log(out)\n      for (let g of [tasks, rsrcs, clndrs, task_preds, task_rsrcs]) {\n        console.log(Object.values(g)[0])\n      }\n    }\n  }\n\n  send(obj) {\n    this.ws.send(JSON.stringify(obj))\n  }\n\n  async stop() {\n    if (this.ws)\n      this.ws.close()\n  }\n\n  async optimize(resultCallback, finishedCallback) {\n    this.resultCallback = resultCallback\n    this.finishedCallback = finishedCallback\n    if (!this.ws)\n      await this.init()\n    else if (this.ws.readyState !== this.ws.OPEN)\n      await this.init()\n    this.results = []\n    let { tasks, rsrcs, clndrs } = this.reader.data\n    let ignoredTasks = []\n    if (this.reader?.cons_data) {\n      let { tasks_cons, rsrcs_cons, task_rsrc_cons } = this.reader.cons_data\n      tasks_cons.forEach((c) => {\n        let t = tasks[c.id]\n        if (!t) return\n\n        t.drtn_hr_rng = [c.min_drtn_hr, c.max_drtn_hr]\n        if (c.ignored?.toUpperCase() === 'YES' || c.ignored?.toUpperCase() === 'TRUE' || c.ignored?.toUpperCase() === 'IGNORED') {\n          ignoredTasks.push(c.id)\n        }\n      })\n      rsrcs_cons.forEach((c) => {\n        let r = rsrcs[c.id]\n        if (!r) return\n\n        r.rng = [0, c.max_units_per_day]\n      })\n      task_rsrc_cons.forEach((c) => {\n        let x = tasks[c.t_id].rsrcs[c.r_id]\n        if (!x) return\n\n        x.units_rng = [c.min_units, c.max_units]\n      })\n    }\n\n    Object.values(tasks).forEach((t) => {\n      t.act_start = null\n      t.act_finish = null\n    })\n\n    let filteredTasks = {}\n    Object.values(tasks).filter(t => !t.ignored).forEach(t => filteredTasks[t.id] = t)\n    tasks = filteredTasks\n\n    // console.log(reader)\n\n    // const def_start = Date.parse(this.sim_in.default_start + 'Z')\n    const proj_start = this.sim_in.default_start\n\n    // console.log(proj_start)\n    // console.log(tasks)\n\n    this.send({\n      func: 'optimize',\n      tasks,\n      rsrcs,\n      clndrs,\n      drtn_ratios: {},\n      default_start: proj_start,\n      steps: parseInt(this.sim_in.steps),\n      ratio_rng: [\n        parseFloat(this.sim_in.min_ratio),\n        parseFloat(this.sim_in.max_ratio),\n      ],\n      lr: parseFloat(this.sim_in.lr),\n      loss_weights: this.loss_weights\n    })\n  }\n}","import styled from 'styled-components'\nimport { Stepper } from '@mui/material'\n\nexport const BreadcrumbContainer = styled(Stepper)`\n  margin: 30px auto;\n  width: 1200px;\n  .Mui-active circle {\n    color: #00beae;\n  }\n  .Mui-completed circle,.Mui-completed {\n    color: #002F2B !important;\n  }\n`","import React from 'react'\n\nimport { Step, StepLabel } from '@mui/material'\n\nimport { BreadcrumbContainer } from './styled'\n\n\nexport default function Breadcrumb({ steps, navAt, navigate, disabled }) {\n  return <BreadcrumbContainer activeStep={navAt} alternativeLabel>\n    {steps.map((label, i) => (\n      <Step key={label} onClick={() => {\n        // if (navAt !== 0) {\n        //   if (i === 0) {\n        //     window.location.href = '/'\n        //   }\n        // }\n        if (!disabled)\n          navigate(i)\n      }}>\n        <StepLabel>{label}</StepLabel>\n      </Step>\n    ))}\n  </BreadcrumbContainer>\n}\n","import styled from 'styled-components'\n\nexport const HeaderContainer = styled.div`\n  width: 100%;\n  box-sizing: border-box;\n  min-height: 55px;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  .header { \n    margin: 0 auto 20px;\n    padding: 20px 0;\n    max-width: 1200px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .logo {\n      display: flex;\n      align-items: center;\n      img {\n        max-width: 200px;\n        margin-right: 20px;\n      }\n    }\n    .menu {\n      &:focus {\n         outline: none !important;\n      }\n    }\n  }\n`","import React from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { useSignOut } from 'react-auth-kit'\n\nimport Menu from '@mui/material/Menu'\nimport MenuList from '@mui/material/MenuList'\nimport MenuItem from '@mui/material/MenuItem'\nimport ListItemText from '@mui/material/ListItemText'\nimport ListItemIcon from '@mui/material/ListItemIcon'\nimport Divider from '@mui/material/Divider'\n\nimport { HeaderContainer } from './styled'\n\nimport FLlogo from '../../assets/images/logo.png'\n\nimport MenuIcon from '@mui/icons-material/Menu'\nimport LaptopMacIcon from '@mui/icons-material/LaptopMac'\nimport LogoutIcon from '@mui/icons-material/Logout'\n\nexport default function Header() {\n  const signOut = useSignOut()\n  const navigate = useNavigate()\n\n  function handleLogout() {\n    signOut()\n    // Might put some delay here (3 secs?)\n    // alert('You have been logged out. You will be redirected to the login page.')\n    navigate('/login')\n  }\n\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const open = Boolean(anchorEl)\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  return <HeaderContainer>\n    <div className='header'>\n      <div className='logo'>\n        <a href='/'><img src={FLlogo} alt='Frontline Logo' /></a>\n        <span>v2.0.0</span>\n      </div>\n      <div className='account'>\n        <MenuIcon\n          id='basic-button'\n          aria-controls={open ? 'basic-menu' : undefined}\n          aria-haspopup='true'\n          aria-expanded={open ? 'true' : undefined}\n          onClick={handleClick} fontSize='medium' />\n        <Menu\n          id='basic-menu'\n          anchorEl={anchorEl}\n          open={open}\n          onClose={handleClose}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          transformOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          MenuListProps={{\n            'aria-labelledby': 'basic-button',\n          }}>\n          <MenuList className='menu'>\n            <MenuItem\n              onClick={() => {\n                window.open('https://app.frontline-optimizer.com/v1.0.0/', '_blank', 'noopener,noreferrer')\n              }} >\n              <ListItemIcon>\n                <LaptopMacIcon fontSize='small' />\n              </ListItemIcon>\n              <ListItemText>Back to v1.0.0</ListItemText>\n            </MenuItem>\n            <Divider />\n            <MenuItem onClick={handleLogout} >\n              <ListItemIcon>\n                <LogoutIcon />\n              </ListItemIcon>\n              <ListItemText>Log Out</ListItemText>\n            </MenuItem>\n          </MenuList>\n        </Menu>\n      </div>\n    </div>\n  </HeaderContainer>\n}\n","export function copy(x) {\n    return JSON.parse(JSON.stringify(x))\n}\n\nexport function format_date(date) {\n    if (!date) return ''\n    return new Date(date).toISOString().replace('T', ' ').slice(0, 16)\n}\n\n// used by MspReader.js\n\nexport function parse_drtn_hr(x = 'PT200H0M0S') {\n    return parseFloat(x.split('PT')[1].split('H')[0])\n}\n\nexport function recover_drtn(drtn_hr = 1) {\n    return 'PT' + drtn_hr + 'H0M0S'\n}\n\nexport function parse_time(x = '07:00:00') {\nreturn Date.parse('1971-06-28T' + x) - Date.parse('1971-06-28T00:00:00')\n}\n\nexport function to_iso(timestamp) {\n    return new Date(timestamp).toISOString().split('.')[0]\n}\n\nexport const ms_per_hr = 60 * 60 * 1000\nexport const ms_per_day = 24 * ms_per_hr\nexport const ms_per_week = 7 * ms_per_day\n\nexport function encode_id(id) {\nreturn 'id_' + id\n}\n\nexport function write_file(filename, text) {\n    let elm = document.createElement('a')\n    let prefix = 'data:text/plaincharset=utf-8,'\n    elm.setAttribute('href', prefix + encodeURIComponent(text))\n    elm.setAttribute('download', filename)\n    elm.style.display = 'none'\n    document.body.appendChild(elm)\n    elm.click()\n    document.body.removeChild(elm)\n}\n\nexport function as_array(x) {\n    if (!x) return []\n    if (!Array.isArray(x)) return [x]\n    return x\n}\n\n// used by XerReader.js\n\nexport function to_dict(keys = [], values = []) {\n    let dic = {}\n    keys.forEach((k, i) => (dic[k] = values[i]))\n    return dic\n}\n\n// used by ProjectReader.js\n\nexport class Counter {\n    constructor() {\n    this.dic = {}\n}\n\nget size() {\n    return len(this.dic)\n}\n\nget list() {\n    return Object.entries(this.dic).map(\n     ([value, cnt]) => `${value} (count: ${cnt})`\n    )\n}\n\nadd(value) {\n    if (!(value in this.dic)) {\n        this.dic[value] = 0\n    }\n    this.dic[value] += 1\n}\n}\n\nexport function len(x) {\n    return Object.keys(x).length;\n}","import * as xlsx from 'xlsx'\n\nexport function read_excel(file) {\n  return new Promise((res) => {\n    let reader = new FileReader()\n    reader.onload = (e) => {\n      let book = xlsx.read(e.target.result, { type: 'binary' })\n      let my_book = {}\n      book.SheetNames.forEach((name) => {\n        my_book[name] = xlsx.utils.sheet_to_json(book.Sheets[name], {\n          //raw: true,\n        })\n      })\n      res(my_book)\n    }\n    reader.readAsBinaryString(file)\n  })\n}\n\nexport function write_excel({ book, filename }) {\n  let wb = xlsx.utils.book_new()\n  Object.entries(book).forEach(([name, data]) => {\n    let ws = xlsx.utils.json_to_sheet(Object.values(data))\n    xlsx.utils.book_append_sheet(wb, ws, name)\n  })\n  xlsx.writeFile(wb, filename)\n}\n","import { format_date, len } from './reader'\n\nexport function format_fields(k = '', v) {\n  if (typeof v === 'string') return v\n\n  if (k.includes('start') || k.includes('finish')) return format_date(v)\n\n  if (typeof v === 'number') {\n    if (k.includes('ratio')) return v.toFixed(2)\n    return v.toFixed(0)\n  }\n\n  if (v === null || v === false) return ''\n  if (Array.isArray(v) && v.length < 3) return JSON.stringify(v)\n  if (typeof v === 'object') return len(v)\n\n  return JSON.stringify(v)\n}\n\nexport function limitString(str, limit) {\n  if (!str) return ''\n  if (str.length <= limit) return str\n  \n  return str.substring(0,limit) + '...'\n}","import { copy, Counter } from '../../../../utils/reader'\nimport { read_excel, write_excel } from '../../../../utils/excel'\nimport { format_fields } from '../../../../utils/format'\n\nexport class ProjectReader {\n  errors = new Counter()\n\n  async read_from_file(file = new File()) {\n    this.filename = file.name\n    let reader = new FileReader()\n    return new Promise((res) => {\n      reader.onload = (e) => {\n        let text = e.target.result.trim()\n        this.parse_text(text)\n        this.extract_data()\n        this.cons_data = this.make_constraints()\n\n        res(true)\n      }\n      reader.readAsText(file)\n    })\n  }\n\n  parse_text() { }\n  extract_data() { }\n\n  merge_data() { }\n  export() { }\n\n  export_excel(inp) {\n    let { tasks, rsrcs, clndrs, task_preds, task_rsrcs } = copy(inp)\n\n    const copy_tasks = copy(tasks)\n\n    for (let g of [tasks, rsrcs, clndrs, task_preds, task_rsrcs]) {\n      Object.values(g).forEach((x) => {\n        Object.keys(x).forEach((k) => {\n          x[k] = format_fields(k, x[k])\n        })\n      })\n    }\n\n    Object.keys(tasks).forEach((t) => {\n      if (copy_tasks[t].finish < Date.now()) {\n        tasks[t].act_start = tasks[t].start\n        tasks[t].start_2 = tasks[t].start\n        tasks[t].act_finish = tasks[t].finish\n        tasks[t].finish_2 = tasks[t].finish\n      }\n    })\n\n    Object.values(tasks).forEach((t) => {\n      if (t.task_code) {\n        t.id = t.task_code\n        delete t.task_code\n      }\n    })\n\n    Object.values(task_preds).forEach((t) => {\n      if (inp.tasks[t.t_id].task_code)\n        t.t_id = inp.tasks[t.t_id].task_code\n      if (inp.tasks[t.p_id].task_code)\n        t.p_id = inp.tasks[t.p_id].task_code\n    })\n\n    Object.values(task_rsrcs).forEach((t) => {\n      if (t.t_code) {\n        t.t_id = t.t_code\n        delete t.t_code\n      }\n    })\n\n    let name = this.filename\n      .replace('.xml', '_Frontline.xlsx')\n      .replace('.xer', '_Frontline.xlsx')\n    write_excel({\n      book: { tasks, rsrcs, clndrs, task_preds, task_rsrcs },\n      filename: name,\n    })\n  }\n\n  make_constraints() {\n    let tasks_cons = [],\n      rsrcs_cons = [],\n      task_rsrc_cons = []\n\n    Object.values(this.data.tasks).forEach((t) => {\n      let { id, name, drtn_hr, clndr_id } = t\n      tasks_cons.push({\n        id,\n        name,\n        drtn_hr,\n        min_drtn_hr: null,\n        max_drtn_hr: null,\n        week_hr_cnt: this.data.clndrs[clndr_id].week_hr_cnt,\n        ignored: null\n      })\n\n      Object.values(t.rsrcs).forEach((x) => {\n        let { id, t_id, r_id, units } = x\n        task_rsrc_cons.push({\n          id,\n          t_id,\n          r_id,\n          t_name: name,\n          r_name: this.data.rsrcs[r_id].name,\n          units,\n          min_units: null,\n          max_units: null,\n        })\n      })\n    })\n\n    Object.values(this.data.rsrcs).forEach((r) => {\n      let { id, name, baseline_resource } = r\n      rsrcs_cons.push({\n        id,\n        name,\n        max_units_per_day: null,\n        cost_per_unit_hr: null,\n        baseline_resource: baseline_resource ? baseline_resource : null\n      })\n    })\n\n    return { tasks_cons, rsrcs_cons, task_rsrc_cons }\n  }\n\n  export_constraints() {\n    let name = this.filename\n      .replace('.xml', '_Frontline_Cons.xlsx')\n      .replace('.xer', '_Frontline_Cons.xlsx')\n\n    const book = this.make_constraints()\n\n    Object.values(book.tasks_cons).forEach((t) => {\n      if (this.data.tasks[t.id].task_code)\n        t.id = this.data.tasks[t.id].task_code\n    })\n\n    Object.values(book.task_rsrc_cons).forEach((t) => {\n      if (this.data.tasks[t.t_id].task_code)\n        t.t_id = this.data.tasks[t.t_id].task_code\n    })\n    write_excel({ book: book, filename: name })\n  }\n\n  async read_constraints(file) {\n    this.cons_filename = file.name\n    this.cons_data = await read_excel(file)\n\n    const book = this.make_constraints()\n\n    for (let i = 0; i < this.cons_data.tasks_cons.length; i++)\n      this.cons_data.tasks_cons[i].id = book.tasks_cons[i].id\n\n    for (let i = 0; i < this.cons_data.task_rsrc_cons.length; i++)\n      this.cons_data.task_rsrc_cons[i].t_id = book.task_rsrc_cons[i].t_id\n  }\n}","import { XMLBuilder, XMLParser } from 'fast-xml-parser'\nimport {\n  parse_drtn_hr,\n  recover_drtn,\n  parse_time,\n  to_iso,\n  ms_per_hr,\n  encode_id,\n  write_file,\n  as_array,\n} from '../../../../utils/reader'\nimport { ProjectReader } from './ProjectReader'\n\n/**\n * https://learn.microsoft.com/en-us/office-project/xml-data-interchange/project-elements-and-xml-structure?view=project-client-2016\n */\n\nexport class MspReader extends ProjectReader {\n  parse_text(text = '') {\n    let parser = new XMLParser({\n      ignoreAttributes: false,\n    })\n    this.raw_data = parser.parse(text)\n  }\n\n  extract_data() {\n    let tasks = {}\n    let rsrcs = {}\n    let clndrs = {\n      'id_-1': {\n        id: 'id_-1',\n        name: 'standard 5x(4+4)',\n        week_hr_cnt: 40,\n      },\n    }\n\n    let prj = this.raw_data.Project\n\n    let all_tasks = {}\n    prj.Tasks.Task.forEach((t) => {\n      let id = encode_id(t.UID)\n      let is_summary = t.Summary\n      let name = t.Name\n      all_tasks[id] = { is_summary, name }\n    })\n\n    prj.Tasks.Task.forEach((t) => {\n      let id = encode_id(t.UID)\n      let name = t.Name\n      let start = Date.parse(t.Start + 'Z')\n      let finish = Date.parse(t.Finish + 'Z')\n      let drtn_hr = parse_drtn_hr(t.Duration)\n      let act_start = Date.parse(t.ActualStart + 'Z')\n      let act_finish = Date.parse(t.ActualFinish + 'Z')\n      let clndr_id = encode_id(t.CalendarUID)\n\n      \n\n      let preds = {}\n      as_array(t.PredecessorLink).forEach((x) => {\n        let p_id = encode_id(x.PredecessorUID)\n        let type = { 0: 'FF', 1: 'FS', 2: 'SF', 3: 'SS' }[x.Type]\n        let lag_hr = x.LinkLag / 600\n        let p = all_tasks[p_id]\n        if (p.is_summary) {\n          let msg = `ignoring RELATIONSHIP between \\`${p.name}\\` and \\`${name}\\` because the former is a summary`\n          this.errors.add(msg)\n        } else {\n          preds[p_id] = {\n            id: id + '-' + p_id,\n            t_id: id,\n            p_id,\n            type,\n            lag_hr,\n          }\n        }\n      })\n\n      if (all_tasks[id].is_summary) {\n        //let msg = `ignoring TASK [${name}] because it is a summary`\n      } else {\n        tasks[id] = {\n          id,\n          name,\n          start,\n          finish,\n          drtn_hr,\n          act_start,\n          act_finish,\n          preds,\n          rsrcs: {},\n          clndr_id\n        }\n      }\n    })\n\n    as_array(prj.Resources.Resource).forEach((r) => {\n      let id = encode_id(r.UID)\n      let name = r.Name\n      let type = ['Material', 'Work', 'Cost'][r.Type]\n      type = { Work: 'Labor', Material: 'Material', Cost: 'Cost' }[type]\n      rsrcs[id] = { id, name, type, dist: {} }\n    })\n\n    prj.Calendars.Calendar.forEach((c) => {\n      let id = encode_id(c.UID)\n      let name = c.Name\n\n      let week_hr_cnt = 0\n\n      if (c.WeekDays) {\n        c.WeekDays.WeekDay.forEach((d) => {\n          let day_name = [null, 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'][\n            d.DayType\n          ]\n          if (!day_name) return\n\n          as_array(d.WorkingTimes?.WorkingTime).forEach((t) => {\n            let x = parse_time(t.ToTime) - parse_time(t.FromTime)\n            let hr = x / ms_per_hr\n            if (hr < 0) hr += 24\n            week_hr_cnt += hr\n          })\n        })\n      }\n\n      clndrs[id] = { id, name, week_hr_cnt }\n    })\n\n    if (prj.Assignments?.Assignment)\n      prj.Assignments.Assignment.forEach((x) => {\n        if (!x.Work) return\n        let id = encode_id(x.UID)\n        let t_id = encode_id(x.TaskUID)\n        let r_id = encode_id(x.ResourceUID)\n        if (!rsrcs[r_id]) {\n          this.errors.add(`unknown resource \\`${r_id}\\` in resource assignment`)\n          return\n        }\n        let work_hr = parse_drtn_hr(x.Work)\n        let units = work_hr / tasks[t_id].drtn_hr\n\n        /*let units_2 = parseFloat(x.Units)\n      let units_3 = Math.round(parseFloat(x.PeekUnits))\n      console.log(units === units_3)*/\n\n        tasks[t_id].rsrcs[r_id] = {\n          id,\n          t_id,\n          r_id,\n          work_hr,\n          units,\n        }\n      })\n\n    this.data = { tasks, rsrcs, clndrs }\n  }\n\n  merge_data(inp) {\n    let prj = this.raw_data.Project\n\n    prj.Tasks.Task.forEach((t) => {\n      if (t.Summary) return\n      let id = encode_id(t.UID)\n      let t2 = inp.tasks[id]\n\n      t.Start = t.EarlyStart = t.LateStart = to_iso(t2.start_2)\n      t.Finish = t.EarlyFinish = t.LateFinish = to_iso(t2.finish_2)\n      t.Duration = recover_drtn(t2.drtn_hr_2)\n      if (t.act_start && t.act_finish) {\n        t.ActualDuration = t.Duration\n      }\n    })\n\n    prj.Assignments.Assignment.forEach((x) => {\n      if (!x.Work) return\n      let id = encode_id(x.UID)\n      let x2 = inp.task_rsrcs[id]\n      if (!x2) return\n      x.PeekUnits = x2.units_2\n    })\n  }\n\n  export() {\n    let builder = new XMLBuilder({\n      ignoreAttributes: false,\n    })\n    let text = builder.build(this.raw_data)\n    let name = this.filename.replace('.xml', '_Frontline.xml')\n    write_file(name, text)\n  }\n}","import { ProjectReader } from './ProjectReader'\nimport { format_date, encode_id, write_file, to_dict } from '../../../../utils/reader'\n\n/**\n * https://docs.oracle.com/cd/F51303_01/English/Mapping_and_Schema/xer_import_export_data_map_project/\n */\n\nexport class XerReader extends ProjectReader {\n  parse_text(text = '') {\n    let prj = { tables: {} },\n      table = [],\n      keys\n    text.split('\\n').forEach((line) => {\n      let cols = line.split('\\t').map((x) => x.trim())\n      let type = cols[0],\n        items = cols.slice(1)\n      switch (type) {\n        case 'ERMHDR':\n          prj.header = items\n          break\n        case '%T':\n          table = prj.tables[cols[1]] = []\n          break\n        case '%F':\n          keys = items\n          break\n        case '%R':\n          table.push(to_dict(keys, items))\n          break\n        case '%E':\n          break\n        default:\n          console.error(type)\n          break\n      }\n    })\n    this.raw_data = prj\n  }\n\n  extract_data() {\n    let tasks = {}\n    let rsrcs = {}\n    let clndrs = {}\n\n    let prj = this.raw_data.tables\n    const task_id_code_map = {}\n\n    prj.TASK.forEach((t) => {\n      let id = encode_id(t.task_id)\n      let name = t.task_name\n      let start = Date.parse(t.target_start_date + 'Z')\n      let finish = Date.parse(t.target_end_date + 'Z')\n      let drtn_hr = parseFloat(t.target_drtn_hr_cnt)\n      let act_start = Date.parse(t.act_start_date + 'Z')\n      let act_finish = Date.parse(t.act_end_date + 'Z')\n      let clndr_id = encode_id(t.clndr_id)\n      const task_code = t.task_code\n      task_id_code_map[id] = task_code\n\n      tasks[id] = {\n        id,\n        name,\n        start,\n        finish,\n        drtn_hr,\n        act_start,\n        act_finish,\n        preds: {},\n        rsrcs: {},\n        clndr_id,\n        task_code\n      }\n    })\n\n    if (prj.RSRC) {\n      prj.RSRC.forEach((r) => {\n        let id = encode_id(r.rsrc_id)\n        let name = r.rsrc_name\n        let type = r.rsrc_type.slice(3)\n        type = { Labor: 'Labor', Equip: 'Equipment', Mat: 'Material' }[type]\n        rsrcs[id] = { id, name, type, dist: {} }\n      });\n    }\n\n    prj.CALENDAR.forEach((c) => {\n      let id = encode_id(c.clndr_id)\n      let name = c.clndr_name\n      let week_hr_cnt = parseFloat(c.week_hr_cnt)\n      clndrs[id] = { id, name, week_hr_cnt }\n    });\n\n    prj.TASKPRED.forEach((x) => {\n      let id = encode_id(x.task_pred_id)\n      let t_id = encode_id(x.task_id)\n      let p_id = encode_id(x.pred_task_id)\n      let type = x.pred_type.slice(3)\n      let lag_hr = parseFloat(x.lag_hr_cnt)\n      tasks[t_id].preds[p_id] = {\n        id,\n        t_id,\n        p_id,\n        type,\n        lag_hr,\n      }\n    })\n\n    if (prj.TASKRSRC) {\n      prj.TASKRSRC.forEach((x) => {\n        let id = encode_id(x.taskrsrc_id)\n        let t_id = encode_id(x.task_id)\n        const t_code = task_id_code_map[t_id]\n        let r_id = encode_id(x.rsrc_id)\n        let work_hr = parseFloat(x.target_qty)\n        let units = work_hr / tasks[t_id].drtn_hr\n\n        /*let units_2 = parseFloat(x.target_qty_per_hr);\n        if (units.toFixed(4) !== units_2.toFixed(4)) {\n          console.log(work_hr, tasks[t_id].drtn_hr, units, units_2);\n        }*/\n        if (tasks[t_id].rsrcs[r_id]) {\n          this.errors.add(\n            `removed duplicate assignment between task \\`${t_id}\\` and resource \\`${r_id}\\``\n          );\n          x.DELETE = true;\n          return;\n        }\n        tasks[t_id].rsrcs[r_id] = {\n          id,\n          t_id,\n          t_code,\n          r_id,\n          work_hr,\n          units,\n        }\n      })\n      prj.TASKRSRC = prj.TASKRSRC.filter((x) => !x.DELETE)\n    }\n\n    this.data = { tasks, rsrcs, clndrs }\n  }\n\n  merge_data(inp) {\n    let prj = this.raw_data.tables\n\n    prj.TASK.forEach((t) => {\n      let id = encode_id(t.task_id)\n      let t2 = inp.tasks[id]\n      t.target_start_date =\n        t.early_start_date =\n        t.late_start_date =\n          format_date(t2.start_2)\n      t.target_end_date =\n        t.early_end_date =\n        t.late_end_date =\n          format_date(t2.finish_2)\n      t.target_drtn_hr_cnt = t2.drtn_hr_2\n    })\n\n    if (prj.TASKRSRC) {\n      prj.TASKRSRC.forEach((x) => {\n        let id = encode_id(x.taskrsrc_id)\n        let x2 = inp.task_rsrcs[id]\n        x.target_qty_per_hr = x2.units_2\n      })\n    }\n  }\n\n  export() {\n    let lines = []\n    lines.push(['ERMHDR', ...this.raw_data.header].join('\\t'))\n    let prj = this.raw_data.tables\n    Object.entries(prj).forEach(([key, table]) => {\n      lines.push(['%T', key].join('\\t'))\n      lines.push(['%F', ...Object.keys(table[0])].join('\\t'))\n      table.forEach((row) => {\n        lines.push(['%R', ...Object.values(row)].join('\\t'))\n      })\n    })\n    lines.push('%E')\n    let name = this.filename.replace('.xer', '_Frontline.xer')\n    write_file(name, lines.join('\\n'))\n  }\n}","import styled from 'styled-components'\nimport { Modal, Box } from '@mui/material'\n\nexport const LoadingModal = styled(Modal)`\n  &.MuiModal-root {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .MuiBox-root {\n    background: #f2f2f2;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n    .loader {\n      width: 64px;\n      height: 64px;\n      background: linear-gradient(180deg, #002F2B 0%, rgba(0, 0, 0, 0.1) 25%);\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n      animation: spin 1s linear infinite;\n      margin: 0 0 15px;\n    }\n    .loader::after {\n      content: \"\";\n      width: calc(100% - 4px);\n      height: calc(100% - 4px);\n      border-radius: 50%;\n      background: #f2f2f2;\n    }\n    @keyframes spin {\n      100% {\n        transform: rotate(360deg);\n      }\n    }\n    .title {\n      font-size: 20px;\n      font-family: \"Nunito\", sans-serif;\n      font-weight: 500;\n      margin: 0 0 15px;\n    }\n    span {\n      color: #696969;\n    }\n    &:focus-visible {\n      outline: none;\n    }\n}\n`\n\nexport const ModalContent = styled(Box)`\n  position: 'absolute';\n  top: '50%';\n  left: '50%';\n  transform: 'translate(-50%, -50%)';\n   box-shadow: 1px 1px 5px rgb(207 234 229 / 25%);\n  width: 400px;\n  padding: 40px 20px;\n  border-radius: 8px;\n`","import React from 'react'\n\nimport { LoadingModal, ModalContent } from './styled'\n\nconst Modal = ({ isLoading, spinner, onClose, title, content }) => {\n  return (\n    <LoadingModal\n      open={isLoading}\n      onClose={onClose}\n      aria-labelledby='modal-modal-title'\n      aria-describedby='modal-modal-description'\n    >\n      <ModalContent>\n        {spinner ? <div className='loader' /> : ''}\n\n        <div className='title' id='modal-modal-title'>\n          {title}\n        </div>\n        <span>{content}</span>\n      </ModalContent>\n    </LoadingModal>\n  )\n}\n\nexport default Modal","import styled from 'styled-components'\nimport Button from '@mui/material/Button'\n\nexport const AppContainer = styled.div`\n  background: #F0F1F3;\n  margin: 0;\n  /* padding: 0 0 50px; */\n  min-height: 100vh;\n  min-width: 1200px;\n  .row {\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n    box-sizing: border-box;\n    /* margin-top: 10px; */\n  }\n  .MuiTableCell-body, .MuiTableCell-head {\n    font-family: \"Inter\", Arial, Helvetica, sans-serif;\n  }\n`\n\nexport const PrimaryButton = styled(Button)`\n  padding: 10px 20px !important;\n  box-shadow: none !important;\n  background: #008277 !important;\n  width: auto !important;   \n  font-weight: bold !important;\n  text-transform: capitalize !important;\n  font-size: 1rem !important;\n  font-family: \"Inter\", sans-serif !important;\n  &:hover {\n      background: #0b534d !important;\n    }\n  &.Mui-disabled {\n    color: #dbdbdb;    \n    background: #f0f0f0 !important;\n  }\n`\n\nexport const SecondaryButton = styled(PrimaryButton)`\n  padding: 10px 20px !important;\n  box-shadow: none !important;\n  color: #008277 !important;\n  border: 1px solid #008277 !important;\n  background: white !important;\n  width: auto !important;\n  text-transform: capitalize !important;\n  font-weight: bold !important;\n  &:hover {\n  background: white !important;\n      color: #0b534d !important;\n    }\n  &.Mui-disabled {\n    color: #dbdbdb;    \n    border: 1px solid #f0f0f0 !important;\n  }\n`","import { Input } from '@mui/material'\nimport styled from 'styled-components'\n\nexport const Content = styled.div`\n    background: #ffffff;\n    padding: 1px 20px 20px;\n`\n\nexport const OptimizationContainer = styled.div`\n  width: 100%;\n  .upload-file {\n    /* width: 100%; */\n    margin: 20px 0;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    color: #008277;\n    font-weight: 700;\n    button, input {\n      /* width: 100% !important; */\n      justify-content: flex-start;\n      font-family: \"Inter\", sans-serif;\n    }\n    label {\n      font-weight: 700 !important;\n      svg {\n        margin-right: 8px;\n      }\n    }\n    .upload-button {\n      background: #008277;\n      color: #FFFFFF;\n      border: 1px transparent;\n      padding: 10px 20px;\n      text-align: center;\n      margin-right: 20px;\n      border-radius: 6px;\n      cursor: pointer;\n      &:hover {\n        background: #0b534d;\n      }\n      &.second-upload {\n        color: #008277;\n        background: transparent;\n        border: 1px solid;\n        &:hover {\n          color: #0b534d;\n        }\n      }\n    }\n  }\n  .optimization-input {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    .section {\n      width: 100%;\n      display: flex;\n      margin: 10px 0;\n      min-height: 50px;\n      display: flex-start !important;\n      justify-content: space-between;\n      position: relative;\n      &.disabled {\n        opacity: 0.3;\n      }\n      &:last-of-type {\n        &:after {\n          height: 0;\n        }\n      }\n      &:after {\n        content: '';\n        position: absolute;\n        background: #eeeeee;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        height: 1px;\n      }\n      .intro {\n        width: 40%;\n        h2 {\n          margin: 0;\n          font-size: 18px;\n          font-weight: 500;\n        }\n        h3 {\n          margin: 0;\n          color: #888888;\n          font-weight: 300;\n          font-size: 16px;\n          line-height: 16px;\n        }\n      }\n      .input-wrapper {\n        width: 60%;\n        .inputs {\n          margin: 0 0 20px;\n          display: flex;\n          justify-content: space-between;\n        }\n      }\n      label {\n         margin-bottom: 0px;\n         font-weight: 400;\n         display: flex;\n         align-items: center;\n        svg {\n          margin-left: 5px;\n          width: 18px;\n        }\n      }\n      .MuiSlider-colorPrimary {\n        color: #00A597;\n        margin: 15px 0;\n      }\n      .MuiInput-root {\n        margin: 6px 0;\n        border: 1px solid #f2f2f2;\n        &.Mui-focused {\n          border: 1px solid #00beae;\n          background: #ffffff;\n        }\n        &:after {\n          border: 0;\n        }\n      }\n      .MuiFormControl-root {\n        width: 45%;\n        margin-right: 50px;\n      }\n    }\n  }\n`\n\nexport const InputField = styled(Input)`\n  background: #f2f2f2;\n  border-radius: 6px;\n  padding: 4px 8px;\n  &:before {\n    border: 0 !important;\n  }\n`","import React, { useState, useEffect } from 'react'\n\nimport { Optimizer } from './optimizers/Optimizer'\nimport { MspReader } from './readers/MspReader'\nimport { XerReader } from './readers/XerReader'\n\nimport { Slider, FormControl, Tooltip, Box } from '@mui/material'\nimport InfoIcon from '@mui/icons-material/Info'\nimport UploadFileIcon from '@mui/icons-material/UploadFile'\n\nimport Modal from 'src/feat/Modal'\n\nimport { PrimaryButton } from 'src/styled'\nimport { Content, OptimizationContainer, InputField } from './styled'\n\nconst ratioMarks = [\n  {\n    value: 0,\n    label: '0%',\n  },\n  {\n    value: 100,\n    label: '100%',\n  },\n  {\n    value: 200,\n    label: '200%',\n  },\n]\n\nconst stepMarks = [\n  {\n    value: 0,\n    label: '0',\n  },\n  {\n    value: 50,\n    label: '50',\n  },\n  {\n    value: 100,\n    label: '100',\n  },\n]\n\nexport default function InputData({\n  uploadedFile,\n  setUploadedFile,\n  fileName,\n  setFileName,\n  constraintsFileName,\n  setConstraintsFileName,\n  project,\n  updateProject,\n  goNext,\n}) {\n  const [isLoading, setIsLoading] = useState(false)\n  const [isFileUploaded, setIsFileUploaded] = useState(\n    project?.fileReader ? true : false\n  )\n  const [ratio, setRatio] = useState(\n    project?.optimizer?.sim_in\n      ? [\n        Math.ceil(project.optimizer.sim_in['min_ratio'] * 100),\n        Math.ceil(project.optimizer.sim_in['max_ratio'] * 100),\n      ]\n      : [50, 150]\n  )\n  const [steps, setSteps] = useState(\n    project?.optimizer?.sim_in ? project.optimizer.sim_in['steps'] : 20\n  )\n\n  const todaysDate = new Date()\n  const [minStartDate, setMinStartDate] = useState(-1)\n  const [date, setDate] = useState(\n    project?.optimizer?.sim_in\n      ? new Date(project?.optimizer?.sim_in['default_start'])\n        .toISOString()\n        .slice(0, 10)\n      : todaysDate.toISOString().slice(0, 10)\n  )\n\n  useEffect(() => {\n    if (project?.optimizer?.sim_in)\n      project.optimizer.sim_in['default_start'] = date\n    updateProject(project)\n  }, [date])\n\n  useEffect(() => {\n    if (project?.optimizer?.sim_in) project.optimizer.sim_in['steps'] = steps\n    updateProject(project)\n  }, [steps])\n\n  useEffect(() => {\n    if (project?.optimizer?.sim_in) {\n      project.optimizer.sim_in['min_ratio'] = ratio[0] / 100\n      project.optimizer.sim_in['max_ratio'] = ratio[1] / 100\n    }\n    updateProject(project)\n  }, [ratio])\n\n  const readProject = (file) => {\n    setIsLoading(true)\n    let reader\n    if (file?.name.endsWith('xer')) reader = new XerReader()\n    else if (file?.name.endsWith('xml')) reader = new MspReader()\n\n    const checkIsDemo = fileName === 'demo_project.xml'\n\n    reader.read_from_file(file).then(async (x) => {\n      let min_start = -1\n      Object.values(reader.data.tasks).forEach((t) => {\n        if (min_start === -1 || min_start > t.start) min_start = t.start\n      })\n      setMinStartDate(min_start)\n      const opt = new Optimizer(reader)\n      opt.sim_in.default_start = min_start\n      opt.sim_in.steps = 1\n      if (opt.init) {\n        await opt.init()\n      }\n      opt.optimize(\n        () => { },\n        (opt_res) => {\n          setFileName(file.name)\n          setIsLoading(false)\n          opt.baseline_result = opt_res[0]\n          opt.sim_in.steps = steps\n          Object.keys(reader.data.rsrcs).forEach(\n            (r) =>\n              reader.data.rsrcs[r].baseline_resource =\n              opt_res[0].inp.rsrcs[r].max\n          )\n          updateProject({\n            fileReader: reader,\n            optimizer: opt,\n            isDemo: checkIsDemo,\n          })\n          setIsFileUploaded(true)\n        }\n      )\n    })\n  }\n\n  useEffect(() => {\n    if (uploadedFile) {\n      readProject(uploadedFile)\n    }\n  }, [uploadedFile])\n\n  async function readConstraints(file) {\n    if (!project?.fileReader) return\n    setConstraintsFileName(file.name)\n    await project.fileReader.read_constraints(file)\n\n    const tasks = project.fileReader.data.tasks\n    let ignoredTasks = []\n    project.fileReader.cons_data.tasks_cons.forEach((c) => {\n      let t = tasks[c.id]\n      t.drtn_hr_rng = [c.min_drtn_hr, c.max_drtn_hr]\n      if (\n        c.ignored?.toUpperCase() === 'YES' ||\n        c.ignored?.toUpperCase() === 'TRUE' ||\n        c.ignored?.toUpperCase() === 'IGNORED'\n      ) {\n        ignoredTasks.push(c.id)\n      }\n    })\n\n    let ignoredIndex = 0\n    while (ignoredIndex < ignoredTasks.length) {\n      const it = ignoredTasks[ignoredIndex]\n      Object.values(tasks).forEach((t) => {\n        for (const p in t.preds) {\n          if (\n            ignoredTasks.indexOf(p) > -1 &&\n            ignoredTasks.indexOf(t.id) === -1\n          ) {\n            ignoredTasks.push(t.id)\n            break\n          }\n        }\n      })\n      ignoredIndex++\n    }\n\n    Object.values(tasks).forEach((t) => {\n      if (ignoredTasks.indexOf(t.id) > -1) t.ignored = true\n    })\n\n    updateProject(project)\n  }\n\n  function useDemoProject() {\n    fetch('/demo_project.xml')\n      .then((r) => r.blob())\n      .then((r) => {\n        const file = new File([r], 'demo_project.xml')\n        // readProject(file, true)\n        setUploadedFile(file)\n      })\n  }\n\n  return (\n    <Content>\n      <h2>Upload schedule and enter optimization settings</h2>\n      <OptimizationContainer>\n        <div className=\"optimization-input\">\n          <div className=\"section\">\n            <div className=\"intro\">\n              <h2>Schedule</h2>\n              <h3>Upload your schedule (.xer or .xml)</h3>\n            </div>\n            <div className=\"input-wrapper\">\n              <div className=\"inputs\" style={{ alignItems: 'center' }}>\n                <div className=\"upload-file\">\n                  <input\n                    hidden\n                    type=\"file\"\n                    id=\"project-file\"\n                    name=\"project\"\n                    onChange={(e) => {\n                      setUploadedFile(e.target.files[0])\n                      setIsLoading(true)\n                    }}\n                    accept=\".xer,.xml\"\n                  />\n                  <label className=\"upload-button\" htmlFor=\"project-file\">\n                    <UploadFileIcon /> Upload file\n                  </label>\n                  <span>{fileName}</span>\n                </div>\n                <span>\n                  or{' '}\n                  <span\n                    style={{ textDecoration: 'underline', cursor: 'pointer' }}\n                    onClick={useDemoProject}\n                  >\n                    {' '}\n                    use a demo project\n                  </span>\n                </span>\n              </div>\n            </div>\n          </div>\n          <div className={`section ${isFileUploaded ? '' : 'disabled'}`}>\n            <div className=\"intro\">\n              <h2>Constraints</h2>\n              <h3>\n                Upload your constraints (\n                <span\n                  style={{ textDecoration: 'underline', cursor: 'pointer' }}\n                  onClick={() => {\n                    project.fileReader.export_constraints()\n                  }}\n                >\n                  download template\n                </span>\n                )\n              </h3>\n            </div>\n            <div className=\"input-wrapper\">\n              <div className=\"inputs\">\n                <div className=\"upload-file\">\n                  <input\n                    hidden\n                    type=\"file\"\n                    id=\"constraints-file\"\n                    name=\"constraints\"\n                    onChange={(e) => {\n                      readConstraints(e.target.files[0])\n                    }}\n                    accept=\".xls,.xlsx\"\n                  />\n                  <label\n                    className=\"upload-button  second-upload\"\n                    htmlFor=\"constraints-file\"\n                  >\n                    <UploadFileIcon /> Upload file\n                  </label>\n                  <span>{constraintsFileName}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className={`section ${isFileUploaded ? '' : 'disabled'}`}>\n            <div className=\"intro\">\n              <h2>Optimization Settings</h2>\n              <h3>Customize your optimization results</h3>\n            </div>\n            <div className=\"input-wrapper\">\n              <div className=\"inputs\">\n                <FormControl>\n                  <label>Default Start Date</label>\n                  <InputField\n                    type=\"date\"\n                    inputProps={{\n                      min: new Date(minStartDate).toISOString().slice(0, 10),\n                    }}\n                    defaultValue={date}\n                    onChange={(e) => setDate(e.target.value)}\n                    id=\"start-date\"\n                    placeholder=\"eg: 2023-10-19\"\n                    variant=\"outlined\"\n                    disabled={!isFileUploaded}\n                  />\n                  <small>Please enter commencement date</small>\n                </FormControl>\n                <FormControl>\n                  <label>\n                    Learning Rate{' '}\n                    <Tooltip\n                      title={\n                        <div style={{ fontSize: '13px', fontFamily: 'Inter' }}>\n                          The learning rate is a tuning parameter in an\n                          optimization algorithm that determines the step size\n                          at each iteration while moving toward a minimum of a\n                          loss function.\n                        </div>\n                      }\n                    >\n                      <InfoIcon />\n                    </Tooltip>\n                  </label>\n                  <InputField\n                    id=\"start-date\"\n                    defaultValue={0.1}\n                    placeholder=\"eg: 0.005\"\n                    variant=\"outlined\"\n                    disabled={!isFileUploaded}\n                  />\n                </FormControl>\n              </div>\n              {/* Min & Max (Optimization Ratio) needs to have a range increments: 5% to 200% */}\n              <div className=\"inputs\">\n                <FormControl style={{ width: '100%' }}>\n                  <label>\n                    Optimization Ratio{' '}\n                    {ratio ? (\n                      <>\n                        ({ratio[0].toString()}% - {ratio[1].toString()}%)\n                      </>\n                    ) : (\n                      ''\n                    )}\n                    <Tooltip\n                      title={\n                        <div style={{ fontSize: '13px', fontFamily: 'Inter' }}>\n                          Ratio = New Duration over Baseline Duration\n                        </div>\n                      }\n                    >\n                      <InfoIcon />\n                    </Tooltip>\n                  </label>\n                  <Slider\n                    id=\"optimization-ratio\"\n                    step={5}\n                    min={0}\n                    max={200}\n                    valueLabelDisplay=\"auto\"\n                    getAriaLabel={() => 'Optimization Ratio'}\n                    value={ratio}\n                    marks={ratioMarks}\n                    onChange={(e) => setRatio(e.target.value)}\n                    disabled={!isFileUploaded}\n                  />\n                </FormControl>\n              </div>\n              <div className=\"inputs\">\n                <FormControl style={{ width: '100%' }}>\n                  <label>Optimization Steps ({steps.toString()})</label>\n                  <Slider\n                    id=\"optimization-steps\"\n                    aria-label=\"optimization-steps\"\n                    value={steps}\n                    onChange={(e) => setSteps(e.target.value)}\n                    step={1}\n                    min={10}\n                    max={50}\n                    marks={stepMarks}\n                    valueLabelDisplay=\"auto\"\n                    disabled={!isFileUploaded}\n                  />\n                </FormControl>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div />\n          <PrimaryButton\n            variant=\"contained\"\n            onClick={goNext}\n            disabled={!isFileUploaded}\n          >\n            Next\n          </PrimaryButton>\n        </div>\n\n        <Modal\n          isLoading={isLoading}\n          title=\"Uploading Data\"\n          content=\"Please wait. This action may take up to a few minutes depending on the size of your file.\"\n          spinner\n        />\n      </OptimizationContainer>\n    </Content>\n  )\n}\n","import * as xlsx from 'xlsx'\n\nexport const ms_per_hr = 60 * 60 * 1000\nexport const ms_per_day = 24 * ms_per_hr\nexport const ms_per_week = 7 * ms_per_day\n\nexport function encode_id(id) { return 'id_' + id }\nexport function len(x) { return x && Object.keys(x).length }\nexport function copy(x) { return JSON.parse(JSON.stringify(x)) }\n\nexport function parse_drtn_hr(x = 'PT200H0M0S') {\n  return parseFloat(x.split('PT')[1].split('H')[0])\n}\n\nexport function recover_drtn(drtn_hr) {\n  return 'PT' + drtn_hr + 'H0M0S'\n}\n\nexport function parse_time(x = '07:00:00') {\n  return Date.parse('1971-06-28T' + x)\n    - Date.parse('1971-06-28T00:00:00')\n}\n\nexport function to_iso(timestamp) {\n  return new Date(timestamp).toISOString().split('.')[0]\n}\n\nexport function fmt_date(date) {\n  return new Date(date).toISOString().replace('T', ' ').slice(0, 16)\n}\n\nexport function export_excel({ book, filename }) {\n  let wb = xlsx.utils.book_new()\n  Object.entries(book).forEach(([name, data]) => {\n    let ws = xlsx.utils.json_to_sheet(Object.values(data))\n    xlsx.utils.book_append_sheet(wb, ws, name)\n  })\n  xlsx.writeFile(wb, filename)\n}\n\nexport function read_excel(file) {\n  return new Promise((res) => {\n    let reader = new FileReader()\n    reader.onload = e => {\n      let book = xlsx.read(e.target.result, { type: 'binary' })\n      let data = {}\n      book.SheetNames.forEach(name => {\n        data[name] = xlsx.utils.sheet_to_json(book.Sheets[name], {\n          //raw: true,\n        })\n      })\n      res(data)\n    }\n    reader.readAsBinaryString(file)\n  })\n}\n\nexport function to_dict(keys = [], values = []) {\n  let dic = {}\n  keys.forEach((k, i) => dic[k] = values[i])\n  return dic\n}\n\nexport function export_file(filename, text) {\n  let elm = document.createElement('a')\n  let prefix = 'data:text/plain;charset=utf-8,'\n  elm.setAttribute('href', prefix + encodeURIComponent(text))\n  elm.setAttribute('download', filename)\n  elm.style.display = 'none'\n  document.body.appendChild(elm)\n  elm.click()\n  document.body.removeChild(elm)\n}\n\nexport function down_sample(data_, keep) {\n  let data = []\n  if (data_.length > keep) {\n    let skip = Math.floor(data_.length / keep)\n    for (let i = 0; i < keep; i++) {\n      data.push(data_[i * skip])\n    }\n  }\n  else data = data_\n  return data\n}\n\nexport function sleep(ms) {\n  return new Promise((res, rej) => {\n    setTimeout(() => { res() }, ms)\n  })\n}","import * as d3 from 'd3'\n\nexport function init_d3({\n  margin = 50,\n  x_domain,\n  y_domain,\n  width,\n  height,\n  ref,\n  x_label,\n  y_label,\n  x_type = d3.scaleLinear,\n  y_type = d3.scaleLinear,\n}) {\n\n  const x1 = margin,\n    x2 = width - margin,\n    y2 = margin,\n    y1 = height - margin,\n    x_scale = x_type(x_domain, [x1, x2]),\n    y_scale = y_type(y_domain, [y1, y2])\n\n  const svg = d3.select(ref.current).attr('width', width).attr('height', height)\n  svg.selectChildren().remove()\n\n  const x_axis = svg.append('g')\n\n  x_axis\n    .call(d3.axisBottom(x_scale))\n    .attr('transform', `translate(0, ${y1})`)\n    .call((g) => {\n      g.append('text')\n        .attr('x', width / 2)\n        .attr('y', 40)\n        .attr('fill', '#2d2d2d')\n        .attr('font-size', 16)\n        .attr('text-align', 'right')\n        .text(x_label)\n    })\n\n  const x_axis_2 = svg.append('g')\n  x_axis_2.call(d3.axisTop(x_scale).tickValues([])).attr('transform', `translate(0, ${y2})`)\n\n  const y_axis = svg.append('g')\n  y_axis\n    .call(d3.axisLeft(y_scale))\n    .attr('transform', `translate(${x1}, 0)`)\n    .call((g) => {\n      g.append('text')\n        .attr('text-anchor', 'end')\n        .attr('y', 30) // margin from TOP\n        .attr('x', -30) // margin from TOP\n        .attr('fill', '#2d2d2d')\n        .attr('font-size', 16)\n        .text(y_label)\n        // .attr('transform', 'rotate(-90)')\n        .attr('text-anchor', 'start')\n    })\n\n  const y_axis_2 = svg.append('g')\n  y_axis_2.call(d3.axisRight(y_scale).tickValues([])).attr('transform', `translate(${x2}, 0)`)\n\n  const xGrid = d3.axisBottom()\n    .scale(x_scale)\n    .tickFormat('')\n    .tickSizeInner(height - 2 * margin)\n\n  svg.append('g')\n    .attr('class', 'x-grid')\n    .attr('transform', `translate(0, ${y2})`)\n    .style('opacity', 0.3)\n    .style('stroke-dasharray', ('3, 3'))\n    .call(xGrid)\n\n  const yGrid = d3.axisLeft()\n    .scale(y_scale)\n    .tickFormat('')\n    .tickSizeInner(-width + 2 * margin)\n\n  svg.append('g')\n    .attr('class', 'x-grid')\n    .attr('transform', `translate(${x1}, 0)`)\n    .style('opacity', 0.3)\n    .style('stroke-dasharray', ('3, 3'))\n    .call(yGrid)\n\n  return { svg, x_scale, y_scale }\n}\n\nexport function domains_with_margin(x_domain, y_domain, x_amount, y_amount) {\n  const x_margin = (x_domain[1] - x_domain[0]) * x_amount\n  const y_margin = (y_domain[1] - y_domain[0]) * y_amount\n  return {\n    x_domain: [x_domain[0] - x_margin, x_domain[1] + x_margin],\n    y_domain: [y_domain[0] - y_margin, y_domain[1] + y_margin]\n  }\n}","export const frontline_color_palette = {\n  FrontlineGreen: '',\n  FrontlineYellow: '',\n  FrontlineOrange: '',\n  FrontlineBlue: '',\n  FrontlineRed: ''\n}\n\nexport const plot_color_palette = {\n  TaskPlot: {\n    optimizedTask: '#82B5C799',\n    optimizedCriticalTask: '#e6171799',\n    baselineTask: '#CCCCCC99',\n    baselineCriticalTask: '#e6a7a799'\n  },\n  ResourcePlot: {\n    allResources: ['#55CBCD98', '#f7dc5b98', '#FFAEA598', '#82B5C798', '#939ce398', '#AABB5D98', '#BAA19098', '#db793098', '#099A4D98', '#f07e9398', '#FDAE6198', '#D53E4F98', '#ABDDA498', '#E6F598', '#9B4FA298', '#6891F98F']\n  }\n}","import React, { useEffect, useRef } from 'react'\nimport ReactDOM from 'react-dom'\n\nimport * as d3 from 'd3'\n\nimport { init_d3 } from '../../utils/plot'\nimport { plot_color_palette } from '../../utils/color'\nimport { len, down_sample } from '../../mods/a_utils'\n\nimport { Alert, AlertTitle } from '@mui/material'\n\nexport default function TaskPlot({\n  selectedColor,\n  tasks,\n  baselineTasks,\n  width,\n  height,\n  color,\n  keep = 400,\n}) {\n  const ref = useRef()\n  useEffect(() => {\n    if (!(baselineTasks && len(baselineTasks)) || (!(tasks) && len(tasks))) return\n    if (!tasks) return\n\n    let data = Object.values(tasks).sort((a, b) => a.start_2 - b.start_2)\n    let baselineData = Object.values(baselineTasks).sort((a, b) => a.start_2 - b.start_2)\n    if (data.length > keep) {\n      data = data.filter(d => d.critical)\n      baselineData = baselineData.filter(bd => bd.critical)\n    }\n\n    const x_optimized_domain = [\n      Math.min(...data.map((d) => d.start_2)),\n      Math.max(...data.map((d) => d.finish_2)),\n    ]\n    const x_baseline_domain = [\n      Math.min(...baselineData.map((d) => d.start_2)),\n      Math.max(...baselineData.map((d) => d.finish_2)),\n    ]\n    const x_domain = [\n      Math.min(x_optimized_domain[0], x_baseline_domain[0]),\n      (Math.max(x_optimized_domain[1], x_baseline_domain[1])),\n    ]\n\n    // TO ONLY LOAD FIRST HALF OF CHART X-AXIS IF DURATION IS TOO LONG\n\n    // function addDays(date, days) {\n    //   date.setDate(date.getDate() + days)\n    //   return date\n    // }\n\n    // function dateDiff(first, second) {\n    //   return Math.round((second - first) / (1000 * 60 * 60 * 24))\n    // }\n\n    // const diff = dateDiff((new Date(x_domain[0])), (new Date(x_domain[1])))\n    // const newEndDate = addDays(new Date(x_domain[0]), diff)\n\n    // x_domain[1] = newEndDate\n\n    data = down_sample(data, keep)\n    baselineData = down_sample(baselineData, keep)\n\n    const y_optimized_domain = [data.length, 0]\n    const y_baseline_domain = [baselineData.length, 0]\n    const y_domain = [\n      Math.max(y_optimized_domain[0], y_baseline_domain[0]),\n      Math.min(y_optimized_domain[1], y_baseline_domain[1]),\n    ]\n\n    const { svg, x_scale, y_scale } = init_d3({\n      margin: 40,\n      x_domain,\n      y_domain,\n      width: width ? width : 560,\n      height: height ? height : 500,\n      ref,\n      // x_label: 'time',\n      // y_label: 'task',\n      x_type: d3.scaleUtc,\n      y_type: d3.scaleLinear,\n    })\n\n    const rect_base = svg.append('g')\n    rect_base\n      .selectAll('rect')\n      .data(baselineData)\n      .join('rect')\n      .attr('x', (d) => x_scale(d.start_2))\n      .attr('y', (d, i) => y_scale(i))\n      .attr('width', (d) =>\n        Math.max(x_scale(d.finish_2) - x_scale(d.start_2), 0)\n      )\n      .attr('height', y_scale(1) - y_scale(0) - 1 - 1)\n      .attr('fill', (d) => (d.critical && len(baselineTasks) <= keep ? plot_color_palette.TaskPlot.baselineCriticalTask : plot_color_palette.TaskPlot.baselineTask))\n      .attr('rx', 8)\n      .attr('ry', 8)\n\n    const rect = svg.append('g')\n    rect\n      .selectAll('rect')\n      .data(data)\n      .join('rect')\n      .attr('x', (d) => x_scale(d.start_2))\n      .attr('y', (d, i) => y_scale(i))\n      .attr('width', (d) =>\n        Math.max(x_scale(d.finish_2) - x_scale(d.start_2), 0)\n      )\n      .attr('rx', 8)\n      .attr('ry', 8)\n      .attr('height', y_scale(1) - y_scale(0) - 1 - 1)\n      .attr('fill', (d) => (d.critical && len(tasks) <= keep ?\n        plot_color_palette.TaskPlot.optimizedCriticalTask\n        : color ? color : selectedColor))\n      .on('mouseover', (event, d) => {\n        const { name, drtn_hr_2 } = d\n        const tooltip = (\n          <div title={name} style={{\n            background: '#eeeeee',\n            position: 'absolute',\n            top: event.pageY,\n            left: event.pageX + 10,\n            padding: '6px 8px',\n            pointerEvents: 'none',\n            borderRadius: '8px'\n          }}>\n            {name}<br />\n            <small>{drtn_hr_2} hours</small>\n          </div>\n        )\n        ReactDOM.render(tooltip, document.getElementById('tooltip'))\n      })\n      .on('mouseout', () => {\n        ReactDOM.unmountComponentAtNode(document.getElementById('tooltip'))\n      })\n  }, [tasks])\n\n  if (!(baselineTasks && len(baselineTasks)) || (!(tasks) && len(tasks))) return null\n\n  const msg =\n    len(tasks) > keep\n      ? `Chart is only showing up to first 400 critical paths as the project has ${Object.values(tasks).sort((a, b) => a.start_2 - b.start_2).length} tasks`\n      : ''\n  return (\n    <>\n      {Object.values(tasks).sort((a, b) => a.start_2 - b.start_2).length > 400 ?\n        <Alert sx={{ margin: '20px 20px -20px' }} severity=\"info\">\n          <AlertTitle>{msg}</AlertTitle>\n        </Alert> : ''}\n      <div id=\"tooltip\" />\n      <svg ref={ref}></svg>\n    </>\n  )\n}","import React, { useEffect, useRef } from 'react'\nimport * as d3 from 'd3'\n\nimport { init_d3, domains_with_margin } from '../../utils/plot'\n\nexport default function DistibutionPlot({\n  results = [],\n  optimizer,\n  optimizationPresets,\n  selectedPreset,\n  selectedResultIndex = -1,\n  width = 550, height = 500,\n  k, x_label, y_label, onClick\n}) {\n  const ref = useRef()\n\n  useEffect(() => {\n    if (!results?.length) return null\n\n    let res = [optimizer.baseline_result]\n    Object.values(optimizationPresets).forEach((p) => {\n      if (p.optimizer.results.length > 0)\n        res = res.concat(p.optimizer.results)\n    })\n\n    const x_domain = d3.extent(res.map((d) => d.drtn_day))\n    const y_domain = d3.extent(res.map((d) => d[k]))\n    const domains = domains_with_margin(x_domain, y_domain, 0.15, 0.15)\n\n    const { svg, x_scale, y_scale } = init_d3({\n      x_domain: domains.x_domain,\n      y_domain: domains.y_domain,\n      margin: 50,\n      width, height, ref,\n      x_label,\n      y_label,\n      x_type: d3.scaleLinear,\n      y_type: d3.scaleLinear,\n    })\n\n    const circleBaseline = svg.append('g')\n    circleBaseline.selectAll('circle').data([optimizer.baseline_result]).join('circle')\n      .attr('cx', d => x_scale(d.drtn_day))\n      .attr('cy', d => y_scale(d[k]))\n      .attr('r', d => 6)\n      .attr('fill', '#cccccc')\n\n\n    Object.keys(optimizationPresets).forEach((preset) => {\n      const o = optimizationPresets[preset]\n      const circle = svg.append('g')\n\n      for (const r in o.optimizer.results)\n        o.optimizer.results[r].index = parseInt(r)\n\n      circle.selectAll('circle').data(o.optimizer.results).join('circle')\n        .attr('cx', d => x_scale(d.drtn_day))\n        .attr('cy', d => y_scale(d[k]))\n        .attr('r', (d, i) => {\n          if (i === 0) return 0\n          return i === o.optimizer.sim_in.steps - 1 ? 6 : 2\n        })\n        .attr('fill-opacity', (d, i) => i / o.optimizer.results.length)\n        .style('stroke', (d, i) => selectedResultIndex === d.index && selectedPreset === preset ? '#e61717' : undefined)\n        .attr('stroke-width', (d, i) => selectedResultIndex === d.index && selectedPreset === preset ? 2 : 0)\n        .attr('fill', o.color)\n        .on('click', (e, d) => {\n          onClick(preset, d.index)\n        })\n        .style('cursor', 'pointer')\n    })\n  }, [results])\n\n  if (!results?.length) return null\n\n  return (\n    <svg ref={ref}>\n    </svg>\n  )\n}","import styled from 'styled-components'\n\nexport const OptimizationContainer = styled.div`\n  width: 100%;\n  .summary {\n    width: 100%;\n    display: inline-flex;\n    justify-content: space-between;\n    background: #fbfbfb;\n    margin: 0px 0 20px;\n    .stats {\n      padding: 25px;\n      width: 20%;\n      display: flex;\n      flex-direction: column;\n      position: relative;\n      &:last-child {\n        &:after {\n          width: 0px;\n        }\n      }\n      &:after {\n        content: '';\n        height: 65px;\n        width: 1px;\n        background: #eeeeee;\n        position: absolute;\n        right: 0;\n        top: calc(50% - 32px);\n      }\n      .title {\n        display: flex;\n        align-items: center;\n        svg {\n          margin-left: 5px;\n          width: 18px;\n        }\n      }\n      .figure {\n        display: inline-flex;\n        margin: 16px 0;\n        align-items: baseline;\n        .numbers {\n          font-family: \"Lato\", sans-serif;\n          font-size: 40px;\n          color: #000000;\n          font-weight: 700;\n          margin-right: 10px;\n        }\n        .baseline-stats {\n            font-family: \"Lato\", sans-serif;\n            font-size: 28px;\n            color: #999999;\n            font-weight: 700;\n         }\n      }\n      .badge {\n          padding: 3px 10px;\n          font-size: 12px;\n          font-weight: 700;\n          border-radius: 8px;\n          width: 50px;\n          display: flex;\n          align-items: center;\n          svg {\n            margin-right: 5px;\n          }\n          &.plus {\n            background: #e2f5e2;\n            color: #499249;\n          }\n          &.minus {\n            background: #feeaea;\n            color: #ff4d4d;\n          }\n        }\n    }\n  }\n`\n\nexport const OptimizationCharts = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 20px;\n  width: 100%;\n  /* background: #ffffff; */\n  /* padding: 30px 20px; */\n  box-sizing: border-box;\n  .full-chart {\n    box-sizing: border-box;\n    background: #ffffff;\n    padding: 20px;\n    width: 100%;\n  }\n  .chart { \n    width: 49%;\n    .section {\n      margin-bottom: 20px;\n      background: #ffffff;\n      padding: 20px;\n      .MuiFormControl-root {\n        width: 100%;\n        .presets {\n          justify-content: flex-start;\n          label {\n            width: 33%;\n            margin-right: 0;\n          }\n        }\n      }\n    }\n  }\n  .bar-tooltip {\n    padding: 5px;\n    border-radius: 8px;\n    background: yellow;\n  }\n`\n\nexport const LoadingTitle = styled.div`\n  display: inline-block;\n  @keyframes blink {\n      0% {\n        opacity: .2;\n      }\n      20% {\n        opacity: 1;\n      }\n      100% {\n        opacity: .2;\n      }\n  }\n\n  span {\n    font-size: 50px;\n    animation-name: blink;\n    animation-duration: 1.4s;\n    animation-iteration-count: infinite;\n    animation-fill-mode: both;\n  }\n\n  span:nth-child(2) {\n      animation-delay: .2s;\n  }\n\n  span:nth-child(3) {\n      animation-delay: .4s;\n  }\n`","import React, { useState, useEffect } from 'react'\n\nimport { FormControlLabel, FormControl, Radio, RadioGroup } from '@mui/material'\n\nimport { len } from '../../../mods/a_utils'\n\nimport TaskPlot from '../../../components/Plot/TaskPlot'\nimport DistributionPlot from '../../../components/Plot/Distribution'\nimport Modal from 'src/feat/Modal'\n\nimport { PrimaryButton } from 'src/styled'\nimport { OptimizationContainer, OptimizationCharts, LoadingTitle } from './styled'\n\nexport default function BaselineSummary({ optimizer, optimizationPresets, selectedPreset, selectedResultIndex, handleSelectPreset, handleSelectResultIndex, goNext }) {\n  const balancedResults = optimizationPresets['balanced']?.optimizer?.results?.length\n  const fastestResults = optimizationPresets['shortest_duration']?.optimizer?.results?.length\n  const leastMaxResults = optimizationPresets['least_max_resources']?.optimizer?.results?.length\n  const leastStdResults = optimizationPresets['least_std_resources']?.optimizer?.results?.length\n\n  const loadingPreset = Object.keys(optimizationPresets).filter((o) => {\n    return optimizationPresets[o]?.optimizer?.optimizing\n  }).map((o) => { return o })[0]\n\n  const checkLoadedResults = balancedResults === 0 && fastestResults === 0 && leastMaxResults === 0 && leastStdResults === 0\n\n  const checkSelectedVsLoaded = optimizationPresets[selectedPreset]?.optimizer?.results?.length === 0\n\n  console.log(balancedResults, fastestResults, leastMaxResults, leastStdResults)\n\n  const statData = (title, numbers) => {\n    return <div className='stats'>\n      <div className='title'>{title}\n      </div>\n      <div className='figure'>\n        <div className='numbers'>{numbers}</div>\n      </div>\n    </div >\n  }\n\n  return <>\n    <OptimizationContainer>\n      <h2>Baseline Summary</h2>\n      <div className='summary'>\n        {statData('Project Duration (days)', Math.round(optimizer?.baseline_result?.drtn_day))}\n        {statData('Resources', Math.round(optimizer?.baseline_result?.rsrc_max))}\n        {statData('Tasks', Object.values(optimizer?.baseline_result?.inp?.tasks).length)}\n        {statData('Tasks on Critical Path', Math.round(optimizer?.baseline_result?.num_crt))}\n      </div >\n      {\n        optimizer ? <>\n          <OptimizationCharts className=\"multi-charts\">\n            {optimizationPresets ?\n              <div className='full-chart'>\n                <div className='section'>\n                  {loadingPreset === undefined && balancedResults === 0 ? <h3>Starting Optimization <LoadingTitle><span>.</span><span>.</span><span>.</span></LoadingTitle></h3> : loadingPreset ?\n                    <h3>Currently optimizing for {optimizationPresets[loadingPreset].label} (Step {selectedPreset && optimizationPresets[loadingPreset]?.optimizer?.results?.length}/{optimizer?.sim_in['steps']}) <LoadingTitle><span>.</span><span>.</span><span>.</span></LoadingTitle></h3>\n                    : <h3>Tasks Overview (Optimized) for {optimizationPresets[selectedPreset].label}</h3>\n                  }\n                  <div className='legend'>\n                    <div className='item'>\n                      <div style={{ width: '14px', height: '14px', background: optimizationPresets[loadingPreset ? loadingPreset : selectedPreset].color, marginRight: '5px', borderRadius: '50%' }}></div>\n                      <div>{optimizationPresets[loadingPreset ? loadingPreset : selectedPreset].label}</div>\n                    </div>\n                    <div className='item'>\n                      <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n                      <div>Baseline</div>\n                    </div>\n                    {len(optimizationPresets[loadingPreset ? loadingPreset : selectedPreset].optimizer.results.at(-1)?.inp?.tasks || {}) <= 400 ?\n                      <div className='item'>\n                        <div style={{ width: '14px', height: '14px', background: '#e61717', marginRight: '5px', borderRadius: '50%' }}></div>\n                        <div>Critical Path</div>\n                      </div>\n                      : <></>\n                    }\n                  </div>\n                  {loadingPreset ?\n                    <TaskPlot\n                      tasks={optimizationPresets[loadingPreset].optimizer.results.at(-1)?.inp.tasks || []}\n                      width='1150'\n                      height='600'\n                      color={optimizationPresets[loadingPreset].color}\n                      baselineTasks={optimizer.baseline_result?.inp.tasks}\n                      title='Tasks (Overview)' />\n                    : <TaskPlot\n                      tasks={optimizationPresets[selectedPreset].optimizer.results.at(selectedResultIndex)?.inp.tasks || []}\n                      width='1150'\n                      height='600'\n                      color={optimizationPresets[selectedPreset].color}\n                      baselineTasks={optimizer.baseline_result?.inp.tasks}\n                      title='Tasks (Overview)' />\n                  }\n                </div>\n              </div>\n              : null\n            }\n          </OptimizationCharts>\n          <OptimizationCharts>\n            <div className='chart'>\n              <div className='section'>\n                <h3>Comparison Chart</h3>\n                <div className='legend'>\n                  <div className='item'>\n                    <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n                    <div>Baseline</div>\n                  </div>\n                  {Object.keys(optimizationPresets).map((o) => {\n                    return <div key={o} className='item'>\n                      <div style={{ width: '14px', height: '14px', background: optimizationPresets[o].color, marginRight: '5px', borderRadius: '50%' }}></div>\n                      <div>{optimizationPresets[o].label}</div>\n                    </div>\n                  })}\n                </div>\n                <DistributionPlot\n                  results={[...Object.keys(optimizationPresets).filter((o) => {\n                    return optimizationPresets[o]?.optimizer?.results.length > 0\n                  }).map((o) => {\n                    return {\n                      ...optimizationPresets[o]?.optimizer?.results?.at(-1),\n                    }\n                  }) || [],\n                  {\n                    ...optimizer.baseline_result,\n                    option: 'baseline'\n                  }]}\n                  optimizer={optimizer}\n                  optimizationPresets={optimizationPresets}\n                  selectedPreset={selectedPreset}\n                  selectedResultIndex={selectedResultIndex}\n                  k='rsrc_max'\n                  x_label='Duration (days)'\n                  y_label='Maximum Resource (units)'\n                  title={'Maximum of combined resources VS Project duration'}\n                  onClick={(preset, i) => {\n                    handleSelectPreset(preset)\n                    handleSelectResultIndex(i)\n                  }} />\n              </div>\n            </div>\n\n            <div className='chart'>\n              <div className='section'>\n                <h3>Optimization Presets</h3>\n                <p>These available presets are pre-configured settings that are designed to deliver the best performance or quality for each individual specific use case.</p>\n                <p>Please select from one of the following options to generate your optimized report: </p>\n                <FormControl component='fieldset'>\n                  <RadioGroup value={selectedPreset} onChange={(e) => {\n                    handleSelectPreset(e.target.value)\n                    handleSelectResultIndex(optimizationPresets[e.target.value].optimizer.results.length - 1)\n                  }}>\n                    {Object.keys(optimizationPresets).map((o) => {\n                      return <div key={o} className='row presets'>\n                        <FormControlLabel disabled={optimizationPresets[o]?.optimizer?.results?.length === 0} value={o} control={<Radio />} label={optimizationPresets[o].label} />\n                        <div style={{ fontSize: '12px', fontFamily: 'Inter' }}>{optimizationPresets[o].description}</div>\n                        {/* <Tooltip title={<div style={{ fontSize: '13px', fontFamily: 'Inter' }}>{optimizationPresets[o].description}</div>}><InfoOutlinedIcon /></Tooltip> */}\n                      </div>\n                    })}\n                  </RadioGroup>\n                </FormControl>\n                <div className='row'>\n                  <div />\n                  <PrimaryButton variant='contained' onClick={goNext} disabled={checkSelectedVsLoaded || checkLoadedResults}>\n                    View Optimized Summary\n                  </PrimaryButton>\n                </div>\n              </div>\n            </div>\n          </OptimizationCharts > </> : ''\n      }\n    </OptimizationContainer >\n    {/* <Modal isLoading={isLoading} title=\"Error: 0 optimization steps\" content={<div>We were unable to optimize your schedule any further due to strict constraints. Please try again. <a href=\"/\">Back to homepage.</a></div>} /> */}\n  </>\n}","import styled from 'styled-components'\n\nexport const LazyLoadContainer = styled.div`\n  width: 100%;\n  overflow: hidden;\n  position: absolute;\n  text-align: center;\n  bottom: -13px;\n  height: 30px;\n  background: -moz-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 100%); /* FF3.6-15 */\n  background: -webkit-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* Chrome10-25,Safari5.1-6 */\n  background: linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=0 ); /* IE6-9 */\n  button {\n    border: 1px solid #F0F1F3;\n    color: #424242;\n    box-shadow: 1px 1px 5px rgb(207 234 229 / 25%);\n    border-radius: 8px;\n    padding: 4px 10px;\n    background: #FFFFFF;\n    font-family: \"Inter\", \"Arial\", sans-serif;\n    font-size: 12px;\n  }\n`","import React, { useState } from 'react'\n\nimport { LazyLoadContainer } from './styled'\n\nconst LazyLoad = ({ children, onLoadMore }) => {\n  const [isVisible, setIsVisible] = useState(false)\n\n  const handleClick = () => {\n    setIsVisible(true)\n    onLoadMore()\n  }\n\n  return (\n    <LazyLoadContainer>\n      {isVisible ? children : null}\n      {!isVisible && (\n        <button onClick={handleClick}>Load More</button>\n      )}\n    </LazyLoadContainer>\n  )\n}\n\nexport default LazyLoad\n","import styled from 'styled-components'\nimport { ToggleButtonGroup } from '@mui/material'\n\nexport const OptimizationContainer = styled.div`\n  width: 100%;\n  .summary {\n    width: 100%;\n    display: inline-flex;\n    justify-content: space-between;\n    background: #fbfbfb;\n    margin: 0 0 30px;\n    .stats {\n      padding: 25px;\n      width: 20%;\n      display: flex;\n      flex-direction: column;\n      position: relative;\n      &:last-child {\n        &:after {\n          width: 0px;\n        }\n      }\n      &:after {\n        content: '';\n        height: 65px;\n        width: 1px;\n        background: #eeeeee;\n        position: absolute;\n        right: 0;\n        top: calc(50% - 32px);\n      }\n      .title {\n        display: flex;\n        align-items: center;\n        svg {\n          margin-left: 5px;\n          width: 18px;\n        }\n      }\n      .figure {\n        display: inline-flex;\n        margin: 16px 0;\n        align-items: baseline;\n        .numbers {\n          font-family: \"Lato\", sans-serif;\n          font-size: 40px;\n          color: #000000;\n          font-weight: 700;\n          margin-right: 10px;\n        }\n        .baseline-stats {\n            font-family: \"Lato\", sans-serif;\n            font-size: 28px;\n            color: #999999;\n            font-weight: 700;\n         }\n      }\n      .badge {\n          font-size: 12px;\n          font-weight: 700;\n          border-radius: 8px;\n          font-family: \"Lato\";\n          width: 60px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: #f2f2f2;\n          svg {\n            margin-right: 5px;\n          }\n          &.plus {\n            background: #e2f5e2;\n            color: #499249;\n          }\n          &.minus {\n            background: #feeaea;\n            color: #ff4d4d;\n          }\n        }\n    }\n  }\n`\n\nexport const OptimizationCharts = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 20px;\n  width: 100%;\n  /* background: #ffffff;\n  padding: 30px 20px; */\n  box-sizing: border-box;\n  &.multi-charts {\n    flex-wrap: wrap;\n    .div {\n    flex: 1 0 45%;\n      /* width: 49%; */\n      &:first-child {\n        flex: 0 1 100%;\n      }\n    }\n  }\n  &.full-charts {\n    display: block !important;\n    margin-bottom: 20px;\n  }\n  .chart {\n    margin-bottom: 20px;\n    background: #ffffff;\n    padding: 20px;\n    width: 46%;\n  }\n  .full-chart {\n    box-sizing: border-box;\n    margin-bottom: 20px;\n    background: #ffffff;\n    padding: 20px;\n    width: 100%;\n  }\n  /* .chart {\n    width: 100%;\n  } */\n`\n\nexport const ToggleGroup = styled(ToggleButtonGroup)`\n  margin: 15px 0 10px;\n  button {\n    width: 50%;\n  }\n`","import React, { useState, useEffect, useRef, useReducer } from 'react'\nimport ReactDOM from 'react-dom'\n\nimport * as d3 from 'd3'\nimport { ToggleButton } from '@mui/material'\n\nimport LazyLoad from '../../feat/LazyLoad'\n\nimport { ToggleGroup } from '../../pages/Dashboard/OptimizedSummary/styled'\nimport { limitString } from '../../utils/format'\n\nimport { init_d3 } from '../../utils/plot'\nimport { plot_color_palette } from '../../utils/color'\nimport { ms_per_day } from '../../mods/a_utils'\n\nexport default function CombinedPlot({\n  base_results,\n  new_results,\n  base_resource_distribution,\n  new_resource_distribution,\n  filter,\n  width = 560,\n  height = 500,\n  // keep = 1000,\n}) {\n  const ref = useRef()\n  let resources = new_results\n\n  const [showResourcePlot, setShowResourcePlot] = useState('optimized')\n  const [_, forceUpdate] = useReducer((x) => x + 1, 0)\n\n  useEffect(() => {\n    if (!new_resource_distribution) return\n\n    if (showResourcePlot === 'optimized')\n      resources = new_results\n\n    else if (showResourcePlot === 'baseline')\n      resources = base_results\n\n    const x_optimized_domain = d3.extent(Object.keys(new_resource_distribution))\n    const x_baseline_domain = d3.extent(Object.keys(base_resource_distribution))\n\n    const x_domain = showResourcePlot === 'optimized' ? x_optimized_domain : x_baseline_domain\n    const y_optimized_values = (new_results).map((r) => {\n      return Object.values(r.dist)\n    })\n\n    const y_optimized_domain = d3.extent(y_optimized_values.flat())\n    const y_baseline_values = (base_results).map((r) => {\n      if (filter && r.type === filter)\n        return Object.values(r.dist)\n    })\n\n    const y_baseline_domain = d3.extent(y_baseline_values.flat())\n    const y_domain = showResourcePlot === 'optimized' ? y_optimized_domain : y_baseline_domain\n    const { svg, x_scale, y_scale } = init_d3({\n      x_domain,\n      y_domain,\n      width,\n      height,\n      ref,\n      // x_label: 'time',\n      // y_label: 'units',\n      x_type: d3.scaleUtc,\n      y_type: d3.scaleLinear,\n    })\n\n    let x = 0\n    for (const r in resources) {\n      const rect = svg.append('g')\n      rect\n        .selectAll('rect')\n        .data(Object.entries(resources[r].dist))\n        .join('rect')\n        .attr('x', (d) => x_scale(d[0]))\n        .attr('width', (d) => x_scale(ms_per_day) - x_scale(0))\n        .attr('y', (d) => y_scale(d[1]))\n        .attr('height', (d) => y_scale(y_domain[0]) - y_scale(d[1]))\n        .attr('fill', (d, i) => {\n          if (resources[r].show_in_plot && resources[r].type === filter)\n            return plot_color_palette.ResourcePlot.allResources[x % plot_color_palette.ResourcePlot.allResources.length]\n          else\n            return 'none'\n        })\n        .on('mouseover', (event, d) => {\n          const tooltip = (\n            <div title={resources[r].name} style={{\n              background: '#eeeeee',\n              position: 'absolute',\n              top: event.pageY,\n              left: event.pageX + 10,\n              padding: '6px 8px',\n              pointerEvents: 'none',\n              borderRadius: '8px'\n            }}>\n              {resources[r].name}\n            </div>\n          )\n          ReactDOM.render(tooltip, document.getElementById('tooltip'))\n        })\n        .on('mouseout', () => {\n          ReactDOM.unmountComponentAtNode(document.getElementById('tooltip'))\n        })\n      x++\n    }\n\n  }, [new_resource_distribution, showResourcePlot, _])\n\n  function toggleSelectResource(r) {\n\n    base_results.filter((item) => item.id === r).map((newItem) => {\n      newItem.show_in_plot = !newItem.show_in_plot\n    }\n    )\n    new_results.filter((item) => item.id === r).map((newItem) =>\n      newItem.show_in_plot = !newItem.show_in_plot\n    )\n    forceUpdate()\n  }\n\n  if (!new_resource_distribution) return null\n\n  // const msg =\n  //   len(new_resource_distribution) > keep\n  //     ? `(showing ${keep}/${len(new_resource_distribution)} only due to limited pixels)`\n  //     : ''\n\n  return (\n    <>\n      <ToggleGroup\n        className='row'\n        value={showResourcePlot}\n        exclusive\n      >\n        <ToggleButton value='optimized' onClick={() => setShowResourcePlot('optimized')}>\n          Optimized\n        </ToggleButton>\n        <ToggleButton value='baseline' onClick={() => setShowResourcePlot('baseline')}>\n          Baseline\n        </ToggleButton>\n      </ToggleGroup>\n      <svg ref={ref}></svg>\n\n      {resources ?\n        <ResourceList resources={resources} filter={filter} toggleSelectResource={toggleSelectResource} />\n        : ''}\n    </>\n  )\n}\n\nconst ResourceList = ({ resources, filter, toggleSelectResource }) => {\n  const [visibleCount, setVisibleCount] = useState(Object.values(resources).length > 50 ? 56 : 35)\n\n  const remainingLength = Object.values(resources).length - visibleCount\n\n  const handleLoadMore = () => {\n    setVisibleCount(prevCount => prevCount + remainingLength)\n  }\n\n  return (\n    <>\n      <div className=\"row\"><h4>Legend</h4></div>\n      <div className=\"legend\">\n        {Object.values(resources)\n          .filter(r => r.type === filter)\n          .slice(0, visibleCount)\n          .map((r, i) => (\n            <div\n              key={r + ' ' + i}\n              className=\"item resources\"\n              style={{\n                opacity: r?.show_in_plot ? '100%' : '50%',\n                cursor: 'pointer',\n              }}\n              onClick={(e, i) => {\n                toggleSelectResource(r.id)\n              }}\n            >\n              <div\n                style={{\n                  width: '14px',\n                  height: '14px',\n                  background:\n                    plot_color_palette.ResourcePlot.allResources[i % plot_color_palette.ResourcePlot.allResources.length],\n                  marginRight: '5px',\n                  borderRadius: '50%',\n                }}\n              ></div>\n              <div>{limitString(r.name, 20)}</div>\n            </div>\n          ))}\n        {Object.values(resources).filter(r => r.type === filter).length > visibleCount && (\n          <LazyLoad onLoadMore={handleLoadMore}>\n            <button>Load More</button>\n          </LazyLoad>\n        )}\n      </div>\n    </>\n  )\n}","import React from 'react'\n\nimport { len } from '../../../mods/a_utils'\n\nimport TaskPlot from '../../../components/Plot/TaskPlot'\nimport CombinedPlot from '../../../components/Plot/CombinedPlot'\n\nimport { Tooltip } from '@mui/material'\nimport InfoIcon from '@mui/icons-material/Info'\n\nimport { PrimaryButton, SecondaryButton } from 'src/styled'\nimport { OptimizationContainer, OptimizationCharts } from './styled'\n\nconst calculatePercentage = (optimized, baseline) => {\n  const diff = (optimized - baseline)\n  const percentage = ((diff / baseline) * 100)\n  const checkPositive = Math.sign(percentage)\n  if (checkPositive === 1) {\n    return <span className='badge minus'>{(Math.round(percentage))}%</span>\n  }\n  else if (checkPositive === -1) {\n    return <span className='badge plus'>{(Math.abs(Math.round(percentage)))}%</span>\n  }\n  else { return <span className='badge'>{(Math.round(percentage))}%</span> }\n}\n\nexport default function OptimizedSummary({ optimizer, selectedPreset, selectedResultIndex, goPrev, goNext }) {\n\n  const baselineResources = optimizer?.baseline_result?.inp?.rsrcs\n  const newResources = optimizer?.results?.at(selectedResultIndex)?.inp?.rsrcs\n\n  const resourcesData =\n  {\n    labor: {\n      base: [],\n      new: []\n    },\n    material: {\n      base: [],\n      new: []\n    }\n  }\n\n  if (newResources) {\n    Object.keys(newResources).forEach((l) => {\n      if (newResources[l].type.toLowerCase() === 'labor') {\n        resourcesData.labor.new.push(newResources[l])\n      }\n      if (newResources[l].type.toLowerCase() === 'material') {\n        resourcesData.material.new.push(newResources[l])\n      }\n    })\n  }\n\n  Object.keys(baselineResources).forEach((l) => {\n    if (baselineResources[l].type.toLowerCase() === 'labor') {\n      resourcesData.labor.base.push(baselineResources[l])\n    }\n    if (baselineResources[l].type.toLowerCase() === 'material') {\n      resourcesData.material.base.push(baselineResources[l])\n    }\n  })\n\n  return <OptimizationContainer>\n    <h2><span style={{ textTransform: 'capitalize' }}>{selectedPreset.label}</span> Optimized Summary </h2>\n    <div className='summary'>\n      <div className='stats'>\n        <div className='title'>Project Duration (days)\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(optimizer?.results?.at(selectedResultIndex)?.drtn_day)} </div>\n          <div className='baseline-stats'>{Math.round(optimizer?.baseline_result?.drtn_day)}</div>\n        </div>\n        {calculatePercentage(optimizer?.results?.at(selectedResultIndex)?.drtn_day, optimizer?.baseline_result?.drtn_day)}\n      </div>\n      <div className='stats'>\n        <div className='title'>Resources\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(optimizer?.results?.at(selectedResultIndex)?.rsrc_max)} </div>\n          <div className='baseline-stats'>{Math.round(optimizer?.baseline_result?.rsrc_max)} </div>\n        </div>\n        {calculatePercentage(optimizer?.results?.at(selectedResultIndex)?.rsrc_max, optimizer?.baseline_result?.rsrc_max)}\n      </div>\n      <div className='stats'>\n        <div className='title'>Tasks <Tooltip title='Tasks that were changed'><InfoIcon /></Tooltip>\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(optimizer?.results?.at(selectedResultIndex)?.num_changed)} </div>\n          <div className='baseline-stats'>{Math.round(Object.values(optimizer?.baseline_result?.inp?.tasks).length)} </div>\n        </div>\n        {calculatePercentage(Math.round(Object.values(optimizer?.baseline_result?.inp?.tasks).length) - optimizer?.results?.at(selectedResultIndex)?.num_changed, Object.values(optimizer?.baseline_result?.inp?.tasks).length)}\n      </div>\n      <div className='stats'>\n        <div className='title'>Tasks on Critical Path\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(optimizer?.results[optimizer?.results?.length - 1]?.num_crt)} </div>\n          <div className='baseline-stats'>{Math.round(optimizer?.baseline_result?.num_crt)}  </div>\n        </div>\n        {calculatePercentage(optimizer?.results.at(selectedResultIndex)?.num_crt, optimizer?.baseline_result?.num_crt)}\n      </div>\n    </div>\n    {optimizer?.results?.length > 0 ?\n      <OptimizationCharts className=\"multi-charts\">\n        <div className='full-chart'>\n          <h3>Tasks (Overview)</h3>\n          <span className=\"subtitle\">Overview of all tasks over time</span>\n          <div className='legend'>\n            <div className=\"item\">\n              <div style={{ width: '14px', height: '14px', background: selectedPreset.color, marginRight: '5px', borderRadius: '50%' }}></div>\n              <div>Optimized</div>\n            </div>\n            <div className=\"item\">\n              <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n              <div>Baseline</div>\n            </div>\n            {len(optimizer.results.at(-1)?.inp?.tasks || {}) <= 400 ?\n              <div className=\"item\">\n                <div style={{ width: '14px', height: '14px', background: '#e61717', marginRight: '5px', borderRadius: '50%' }}></div>\n                <div>Critical Path</div>\n              </div>\n              : <></>\n            }\n          </div>\n          {optimizer.results[optimizer.results.length - 1]?.inp?.tasks ?\n            <TaskPlot\n              selectedColor={selectedPreset.color}\n              width=\"1150\"\n              height=\"600\"\n              tasks={optimizer.results?.at(selectedResultIndex)?.inp.tasks}\n              baselineTasks={optimizer.baseline_result?.inp.tasks}\n              title='Tasks (Overview)' />\n            : 'No data'\n          }\n        </div>\n        <div className='full-chart'>\n          <div className='row'>\n            <div>\n              <h3>Labor Resources</h3>\n              <span className=\"subtitle\">Total utilization of multiple resources over time</span>\n            </div>\n          </div>\n          {optimizer.results?.at(selectedResultIndex)?.rsrc_dist ?\n            <CombinedPlot\n              width=\"1150\"\n              base_results={resourcesData.labor.base}\n              new_results={resourcesData.labor.new}\n              base_resource_distribution={optimizer?.baseline_result?.rsrc_dist}\n              new_resource_distribution={optimizer?.results?.at(selectedResultIndex)?.rsrc_dist}\n              filter='Labor'\n              title='Combined Resources' />\n            : 'No data'\n          }\n        </div>\n\n        {resourcesData?.material?.base?.length === 0 ? '' : <>\n          <div className='full-chart'>\n            <div className='row'>\n              <div>\n                <h3>Material Resources</h3>\n                <span className=\"subtitle\">Total utilization of multiple resources over time</span>\n              </div>\n            </div>\n            {optimizer.results?.at(selectedResultIndex)?.rsrc_dist ?\n              <CombinedPlot\n                width=\"1150\"\n                base_results={resourcesData.material.base}\n                new_results={resourcesData.material.new}\n                base_resource_distribution={optimizer?.baseline_result?.rsrc_dist}\n                new_resource_distribution={optimizer?.results?.at(selectedResultIndex)?.rsrc_dist}\n                filter='Material'\n                title='Combined Resources' />\n              : 'No data'\n            }\n          </div></>}\n\n      </OptimizationCharts> : ''}\n    <div className='row'>\n      <SecondaryButton variant='contained' onClick={goPrev}>\n        Back\n      </SecondaryButton>\n      <PrimaryButton variant='contained' onClick={goNext}>\n        View Detailed Report\n      </PrimaryButton>\n    </div>\n  </OptimizationContainer>\n}","import styled from 'styled-components'\n\nexport const TableContainer = styled.div`\n  .MuiDataGrid-main {\n    font-family: \"Inter\"\n  }\n`","import React from 'react'\n\nimport { DataGrid } from '@mui/x-data-grid'\n\nimport { TableContainer } from './styled'\n\nexport default function Table({ rows, columns, hidden_columns }) {\n  const makeRowHeight = (rows.length > 3) ? 500 : 300\n  const initial_state = {\n    columns: {\n      columnVisibilityModel: hidden_columns,\n    },\n  }\n  return <TableContainer>\n    <div style={{\n      height: makeRowHeight, width: '100%'\n    }}>\n      <DataGrid\n        rows={rows}\n        columns={columns}\n        initialState={initial_state}\n      // getRowId={(row) => row.id + row.name + row.t_name}\n      />\n    </div>\n  </TableContainer>\n}","import React, { useEffect, useRef } from 'react'\nimport * as d3 from 'd3'\n\nimport { init_d3 } from '../../utils/plot'\nimport { ms_per_day, len, down_sample } from '../../mods/a_utils'\n\nexport default function ResourcePlot({\n  dist,\n  color,\n  width = 560,\n  height = 500,\n  keep = 1000,\n}) {\n  const ref = useRef()\n  useEffect(() => {\n    if (!dist) return\n\n    const data = down_sample(Object.entries(dist), keep)\n    // const color = d3.scaleOrdinal(d3.schemeCategory10)\n\n    const x_domain = d3.extent(Object.keys(dist))\n    // console.log('Before', x_domain)\n    const y_domain = d3.extent(Object.values(dist))\n    // const scale = d3.scaleLinear(x_domain, [40,width-40])\n    // x_domain[1] = parseFloat(x_domain[1]) + 10000*(scale(ms_per_day) - scale(0))\n    // console.log('After', x_domain, scale(ms_per_day) - scale(0))\n\n    const { svg, x_scale, y_scale } = init_d3({\n      x_domain,\n      y_domain,\n      width,\n      height,\n      ref,\n      x_label: 'time',\n      y_label: 'units',\n      x_type: d3.scaleUtc,\n      y_type: d3.scaleLinear,\n    })\n\n    const rect = svg.append('g')\n\n    rect\n      .selectAll('rect')\n      .data(data)\n      .join('rect')\n      .attr('x', (d) => x_scale(d[0]))\n      .attr('width', x_scale(ms_per_day) - x_scale(0))\n      .attr('y', (d) => y_scale(d[1]))\n      .attr('height', (d) => y_scale(y_domain[0]) - y_scale(d[1]))\n      .attr('fill', color)\n    // .style('fill', (d) => color(d[0]))\n\n    // let legend = svg.append('g')\n    //   .attr('transform', 'translate(0, 20)')\n\n    // legend.selectAll('rect')\n    //   .data(data)\n    //   .join('rect')\n    //   .attr('x', 0)\n    //   .attr('y', (d, i) => i * 20)\n    //   .attr('width', 19)\n    //   .attr('height', 18)\n    //   .style('fill', (d) => color(d[0]))\n\n    // legend.selectAll('text')\n    //   .data(data)\n    //   .join('text')\n    //   .attr('x', 22)\n    //   .attr('y', (d, i) => i * 20 + 14)\n    //   .text(d => {\n    //     return data.name\n    //   })\n\n  }, [dist])\n\n  if (!dist) return null\n  const msg =\n    len(dist) > keep\n      ? `(showing ${keep}/${len(dist)} only due to limited pixels)`\n      : ''\n  return (\n    <>\n      {/* <Title>{title}</Title> */}\n      <>{msg}</>\n      <svg ref={ref}></svg>\n    </>\n  )\n}","import React, { useEffect, useRef } from 'react'\nimport * as d3 from 'd3'\n\nimport { init_d3, domains_with_margin } from '../../utils/plot'\nimport { len } from '../../mods/a_utils'\n\nexport default function LossPlot({\n  results,\n  name,\n  x_label, y_label,\n  width = 550,\n  height = 400,\n  keep = 1000,\n  onClick,\n  selectedResultIndex\n}) {\n  const ref = useRef()\n\n  useEffect(() => {\n    if (!results?.length) return null\n\n    const data = results\n    data.forEach((d, i) => d.idx = i)\n\n    const domains = domains_with_margin(d3.extent(data.map(d => d.drtn_day)), d3.extent(data.map(d => d[name])), 0.15, 0.15)\n\n    const { svg, x_scale, y_scale } = init_d3({\n      // margin: 50,\n      x_domain: domains.x_domain,\n      y_domain: domains.y_domain,\n      width, height, ref,\n      x_label: x_label,\n      y_label: y_label,\n      x_type: d3.scaleLinear,\n      y_type: d3.scaleLinear,\n    })\n\n    const circle = svg.append('g')\n    circle.selectAll('circle').data(data).join('circle')\n      .attr('cx', d => x_scale(d.drtn_day))\n      .attr('cy', d => y_scale(d[name]))\n      .attr('r', (d, i) => i === selectedResultIndex ? 6 : 3)\n      .style('cursor', d => d.option === 'baseline' ? 'auto' : 'pointer')\n      .attr('fill', (d, i) =>\n        d.loss_task + d.loss_rsrc + d.loss_task_rsrc > 0\n          ? i === selectedResultIndex ? '#db4444' : '#cccccc'\n          : i === selectedResultIndex ? '#db4444' : '#00beae'\n      )\n      .on('click', (e, d) => onClick(d.idx))\n  }, [results, selectedResultIndex])\n\n  if (!(results && len(results))) return null\n  const msg =\n    len(results) > keep\n      ? `(showing ${keep}/${len(results)} only due to limited pixels)`\n      : ''\n\n  return (\n    <>\n      <div className='legend'>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#e61717', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Step Selected</div>\n        </div>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#00beae', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Constraints Satisfied</div>\n        </div>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Constraints Violated</div>\n        </div>\n      </div>\n      <>{msg}</>\n      <svg ref={ref}></svg>\n    </>\n  )\n}","import React, { useEffect, useRef } from 'react'\nimport * as d3 from 'd3'\n\nimport { init_d3, domains_with_margin } from '../../utils/plot'\nimport { len } from '../../mods/a_utils'\n\nexport default function StepsPlot({\n  results,\n  name, x_axis,\n  x_label, y_label,\n  width = 550,\n  height = 400,\n  keep = 1000,\n  onClick,\n  selectedResultIndex\n}) {\n  const ref = useRef()\n\n  useEffect(() => {\n    if (!results?.length) return null\n\n    const data = results\n    data.forEach((d, i) => d.idx = i)\n\n    const domains = domains_with_margin(d3.extent([1, data.length]), d3.extent(data.map(d => d[name])), 0, 0)\n\n    const { svg, x_scale, y_scale } = init_d3({\n      margin: 50,\n      x_domain: domains.x_domain,\n      y_domain: domains.y_domain,\n      width, height, ref,\n      x_label: x_label ? x_label : 'Optimization steps',\n      y_label,\n      x_type: d3.scaleLinear,\n      y_type: d3.scaleLinear,\n    })\n\n    const circle = svg.append('g')\n    circle.selectAll('circle').data(data).join('circle')\n      .attr('cx', (d, i) => x_scale(d.idx))\n      .attr('cy', d => y_scale(d[name]))\n      .attr('r', (d, i) => i === selectedResultIndex ? 6 : 3)\n      .style('cursor', d => d.option === 'baseline' ? 'auto' : 'pointer')\n      .attr('fill', (d, i) =>\n        d.loss_task + d.loss_rsrc + d.loss_task_rsrc > 0\n          ? i === selectedResultIndex ? '#db4444' : '#cccccc'\n          : i === selectedResultIndex ? '#db4444' : '#00beae'\n      )\n      .on('click', (e, d) => { onClick(d.idx) })\n  }, [results, selectedResultIndex])\n\n  if (!(results && len(results))) return null\n  const msg =\n    len(results) > keep\n      ? `(showing ${keep}/${len(results)} only due to limited pixels)`\n      : ''\n\n  return (\n    <>\n      <div className='legend'>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#e61717', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Step Selected</div>\n        </div>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#00beae', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Constraints Satisfied</div>\n        </div>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Constraints Violated</div>\n        </div>\n      </div>\n      <>{msg}</>\n      <svg ref={ref}></svg>\n    </>\n  )\n}","import styled from 'styled-components'\n\nimport Table from '@mui/material/Table'\nimport TableHead from '@mui/material/TableHead'\n\n\nexport const TableContent = styled.div`\n  background: white;\n  margin-bottom: 40px;\n  padding: 20px;\n  .circle {\n    width: 14px;\n    height: 14px;\n    border-radius: 50%;\n    background-color: #dddddd;\n    margin: 0 auto;\n    &.critical {\n      background-color: red;\n    }\n  }\n  .MuiDataGrid-columnHeaders {\n    background: #f2f2f2;\n  }\n`\n\nexport const ReportTable = styled(Table)`\n  border: 1px solid #eeeeee;\n  border-radius: 6px;\n  thead {\n    tr {\n      background: #f2f2f2;\n      > th {\n        font-weight: bold;\n        color: #222222;\n      }\n    }\n  }\n  .MuiTableSortLabel-icon {\n    opacity: 1;\n  }\n  \n`\nexport const ReportTableHead = styled(TableHead)``","import React, { useState } from 'react'\n// import FileDownloadIcon from '@mui/icons-material/FileDownload'\n\nimport Modal from 'src/feat/Modal'\n\nimport Table from '../../../components/Table'\nimport ResourcePlot from '../../../components/Plot/ResourcePlot'\nimport LossPlot from '../../../components/Plot/Loss'\nimport StepsPlot from '../../../components/Plot/Step'\n\nimport { plot_color_palette } from '../../../utils/color'\n\nimport { TableContent } from './styled'\nimport { OptimizationContainer } from '../InputData/styled'\nimport { OptimizationCharts } from '../OptimizedSummary/styled'\nimport { PrimaryButton, SecondaryButton } from 'src/styled'\n\nexport default function DetailedReport({ optimizer, selectedPreset, selectedResultIndex, handleSelectResultIndex, goPrev }) {\n  const [openModal, setOpenModal] = useState(false)\n  const data = optimizer?.results[selectedResultIndex]\n\n  // current selected results\n  const selectedTasksResult = data?.inp?.tasks\n  const selectedResourcesResult = data?.inp?.rsrcs\n  const selectedTasksResourcesResult = data?.inp?.task_rsrcs\n\n  // filtered changed tasks\n  const changed_tasks = selectedTasksResult && Object.keys(selectedTasksResult).filter(t => selectedTasksResult[t].changed)\n\n  const tasks_rows =\n    changed_tasks && changed_tasks.map((task) => {\n      const { critical, id, task_code, name, drtn_hr, drtn_hr_2 } = selectedTasksResult[task]\n      const calcRatio = (drtn_hr_2 / drtn_hr).toFixed(2)\n      return ({\n        id: task_code ? task_code : id,\n        critical: critical,\n        name: name,\n        task_code: task_code ? task_code : id,\n        old_duration: `${drtn_hr} hours`,\n        new_duration: `${drtn_hr_2} hours`,\n        ratio: calcRatio\n      })\n    })\n  const tasks_columns = [\n    {\n      field: 'critical', headerName: 'Critical', width: 80, renderCell: (params) => {\n        return params.value ? (\n          <div className='circle critical' />\n        ) : (\n          <div className='circle' />\n        )\n      },\n    },\n    { field: 'id', headerName: 'ID', width: 280, },\n    {\n      field: 'name', headerName: 'Name', width: 430, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    { field: 'old_duration', headerName: 'Duration (Baseline)', width: 150 },\n    { field: 'new_duration', headerName: 'Duration (New)', width: 150 },\n    { field: 'ratio', headerName: 'Ratio', width: 50 },\n  ]\n\n  // filtered changed resources\n  const changed_resources = selectedResourcesResult && Object.keys(selectedResourcesResult)\n  const resources_rows =\n    changed_resources && changed_resources.map((resources) => {\n      const { id, name, type, rng, dist, max, std } = selectedResourcesResult[resources]\n      return ({\n        name: name,\n        id: id,\n        type: type,\n        rng: JSON.stringify(rng),\n        dist: Math.round(Object.values(dist).reduce((total, current) => total + current, 0)),\n        max: Math.round(max),\n        std: Math.round(std)\n      })\n    })\n  const resources_columns = [\n    { field: 'id', headerName: 'ID', width: 120, },\n    { field: 'type', headerName: 'type', width: 150, },\n    {\n      field: 'name', headerName: 'Name', width: 350, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    { field: 'rng', headerName: 'Range [min, max]', width: 130 },\n    { field: 'dist', headerName: 'Resource Dist.', width: 130 },\n    { field: 'max', headerName: 'Max N.', width: 130 },\n    { field: 'std', headerName: 'Standard Deviation', width: 130 },\n  ]\n\n  // filtered task-resources relationships\n  const filteredTasksResourcesResults = []\n  const changed_tasks_resources = selectedTasksResourcesResult && Object.keys(selectedTasksResourcesResult)\n  changed_tasks_resources && changed_tasks_resources.map((rsrc) => {\n    const arrayResources = optimizer?.results[selectedResultIndex]?.inp?.task_rsrcs[rsrc]\n    changed_tasks.map((task) => {\n      const mapTask = optimizer?.results[selectedResultIndex]?.inp?.tasks[task]\n      if (arrayResources) {\n        if (arrayResources.t_id === task) {\n          filteredTasksResourcesResults.push({\n            drtn_hr: mapTask.drtn_hr,\n            drtn_hr_2: mapTask.drtn_hr_2,\n            r_id: arrayResources.r_id,\n            t_id: arrayResources.t_id,\n            units: arrayResources.units,\n            units_2: arrayResources.units_2,\n            units_rng: arrayResources.units_rng,\n            work_hr: arrayResources.work_hr\n          })\n        }\n      }\n    })\n  })\n  const hidden_columns = { id: false }\n  const tasks_resources_rows = filteredTasksResourcesResults &&\n    filteredTasksResourcesResults.map((resources, idx) => {\n      const { task_code, r_id, t_id, units, units_2, units_rng, drtn_hr, drtn_hr_2, work_hr } = resources\n      const checkCritical = (id) => {\n        return (Object.values(data?.crt_path).filter((item) => item === id).length > 0)\n      }\n      return ({\n        critical: checkCritical(t_id),\n        id: idx,\n        t_id: task_code ? task_code : t_id,\n        resource_name: selectedResourcesResult[r_id]?.name,\n        t_name: selectedTasksResult[t_id]?.name,\n        old_units: units && units.toFixed(2),\n        new_units: units_2 && units_2.toFixed(2),\n        rng: JSON.stringify(units_rng),\n        old_duration: `${drtn_hr} hours`,\n        new_duration: `${drtn_hr_2} hours`,\n        work_hr: `${work_hr} hours`,\n      })\n    })\n  const tasks_resources_columns = [\n    {\n      field: 'critical', headerName: 'Critical', width: 80, renderCell: (params) => {\n        return params.value ? (\n          <div className='circle critical' />\n        ) : (\n          <div className='circle' />\n        )\n      },\n    },\n    {\n      field: 'id', headerName: 'ID', width: 0\n    },\n    { field: 't_id', headerName: 'Task Code', width: 120, },\n    {\n      field: 'resource_name', headerName: 'Resource Name', width: 200, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    {\n      field: 't_name', headerName: 'Task Name', width: 350, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    { field: 'rng', headerName: 'Range [min, max]', width: 130 },\n    { field: 'old_units', headerName: 'Units (Old)', width: 130 },\n    { field: 'new_units', headerName: 'Units (New)', width: 130 },\n    { field: 'old_duration', headerName: 'Duration (Old)', width: 130 },\n    { field: 'new_duration', headerName: 'Duration (New)', width: 130 },\n    { field: 'work_hr', headerName: 'Total Work Hours', width: 130 },\n  ]\n\n  return (<>\n    <div className=\"row\">\n      <h2><span style={{ textTransform: 'capitalize' }}>{selectedPreset}</span> Detailed Report</h2>\n      <PrimaryButton onClick={() => setOpenModal(true)} variant='contained'>\n        Export Report\n      </PrimaryButton>\n    </div>\n    <OptimizationContainer>\n      <TableContent>\n        <div className='row'>\n          <h3>Changed Tasks (Overview)</h3>\n          {/* <div><FileDownloadIcon /> Export</div> */}\n        </div>\n        <div className='legend' style={{ width: '400px', justifyContent: 'flex-start', marginBottom: '20px' }}>\n          <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center', marginRight: '10px' }}>\n            <div className='circle critical' /> Critical\n          </div>\n          <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center' }}>\n            <div className='circle' /> Non-Critical\n          </div>\n        </div>\n        {optimizer?.results[selectedResultIndex] ?\n          <Table rows={tasks_rows} columns={tasks_columns} /> : 'Please select a Optimization Preset before generating your report'}\n      </TableContent>\n\n      <h2>Resources Tables</h2>\n      <TableContent>\n        <h4>Changed Resources</h4>\n        {optimizer?.results[selectedResultIndex] ?\n          <Table rows={resources_rows} columns={resources_columns} />\n          : 'Please select a Optimization Preset before generating your report'}\n      </TableContent>\n\n      <TableContent>\n        <h4>Changed Task-Resources</h4>\n        {optimizer?.results[selectedResultIndex] ?\n          <Table hidden_columns={hidden_columns} rows={tasks_resources_rows} columns={tasks_resources_columns} /> : 'Please select a Optimization Preset before generating your report'}\n      </TableContent>\n\n      {optimizer?.loss_weights ? <>\n        <OptimizationCharts className='multi-charts'>\n          <div className='row'><h2>Optimization Iteration Charts</h2></div>\n          <div className='chart'>\n            <h4>Project Duration</h4>\n            <StepsPlot results={optimizer?.results} name='drtn_day' x_axis x_label='Optimization steps' y_label='Duration (days)' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n          <div className='chart'>\n            <h4>Maximum Labour Resources</h4>\n            <StepsPlot results={optimizer?.results} name='rsrc_max' x_axis x_label='Optimization steps' y_label='Maximum Resources' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n          <div className='chart'>\n            <h4>Standard Deviation Labour Resources</h4>\n            <StepsPlot results={optimizer?.results} name='rsrc_std' x_axis x_label='Optimization steps' y_label='Standard Deviation' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n          <div className='chart'>\n            <h4>Number of Changed Tasks</h4>\n            <StepsPlot results={optimizer?.results} name='num_changed' x_axis x_label='Optimization steps' y_label='Number of changed task' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n          <div className='chart'>\n            <h4>Critical Path Tasks</h4>\n            <StepsPlot results={optimizer?.results} name='num_crt' x_axis x_label='Optimization steps' y_label='Number of tasks' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n          <div className='chart'>\n            <h4>Loss Function (Dimensionless)</h4>\n            <StepsPlot results={optimizer?.results} name='loss_sum' x_axis x_label='Optimization steps' y_label='Loss function' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n        </OptimizationCharts>\n        <OptimizationCharts className='multi-charts'>\n          <div className='row'><h2>Resources Plots</h2></div>\n          {Object.values(optimizer?.results[selectedResultIndex]?.inp.rsrcs || {}).map((r, i) => (\n            <div key={r.id} className='chart'>\n              <h4>{`(${r.type}) ${r.name}`}</h4>\n              <ResourcePlot dist={r.dist} title={`(${r.type}) ${r.name}`} color={plot_color_palette.ResourcePlot.allResources[i % plot_color_palette.ResourcePlot.allResources.length]} />\n            </div>\n          ))}\n        </OptimizationCharts>\n        <OptimizationCharts className='multi-charts'>\n          <div className='row'><h2>Loss Function Charts</h2></div>\n          {/* <p>Loss functions in construction schedules are mathematical models used to determine the cost or schedule impact of deviations from the project plan. These functions help to identify potential project risks and allow for proactive measures to be taken to minimize the impact of delays and budget overruns. Common examples include cost-impact and schedule-impact functions.</p> */}\n          <div className='chart'>\n            <h4>Loss Function: Tasks Resources</h4>\n            <LossPlot results={optimizer?.results} name='loss_task_rsrc' x_label='Duration (days)' y_label='Loss function: task resources' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n          <div className='chart'>\n            <h4>Loss Function: Sum</h4>\n            <LossPlot results={optimizer?.results} name='loss_sum' x_label='Duration (days)' y_label='Loss function: sum' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n          <div className='chart'>\n            <h4>Loss Function: Resources</h4>\n            <LossPlot results={optimizer?.results} name='loss_rsrc' x_label='Duration (days)' y_label='Loss function: resources' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n          <div className='chart'>\n            <h4>Loss Function: Tasks</h4>\n            <LossPlot results={optimizer?.results} name='loss_task' x_label='Duration (days)' y_label='Loss function: task' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n        </OptimizationCharts>\n      </> : 'No data'}\n\n      <div className='row'>\n        <SecondaryButton variant='contained' onClick={goPrev}>\n          Back\n        </SecondaryButton>\n        <PrimaryButton onClick={() => setOpenModal(true)} variant='contained'>\n          Export Report\n        </PrimaryButton>\n      </div>\n    </OptimizationContainer>\n\n    <Modal isLoading={openModal} onClose={() => setOpenModal(false)} title=\"Export Optimized File\" content={<div className='row'>\n      <PrimaryButton onClick={() => {\n        optimizer.reader.merge_data(optimizer.results[selectedResultIndex].inp)\n        optimizer.reader.export()\n      }} variant='contained'>Original Format</PrimaryButton> &nbsp;\n      <PrimaryButton onClick={() => {\n        optimizer.reader.export_excel(optimizer.results[selectedResultIndex].inp)\n      }} variant='contained'>Excel</PrimaryButton>\n    </div>} />\n  </>\n  )\n}","import styled from 'styled-components'\n\nexport const DashboardContainer = styled.div`\n  width: 100%;\n  box-sizing: border-box;\n  .content {\n    margin: 20px auto;\n    width: 1200px;\n    max-width: 100%;\n    /* background: #ffffff; */\n    /* padding: 1px 20px 20px; */\n    border-radius: 6px;\n    box-sizing: border-box;\n    .legend {\n      display: flex;\n      justify-content: flex-start;\n      align-items: flex-start;\n      position: relative;\n      font-size: 11px;\n      width: 100%;\n      margin-top: 20px;\n      flex-wrap: wrap;\n      &:has(.resources) {\n        margin-bottom: 30px;\n      }\n      .item {\n        display: flex; \n        justify-content: flex-start;\n        align-items: center;\n        margin-right: 23px;\n        &.resources {\n          width: 14%;\n          margin-right: 0 !important;\n        }\n      }\n      .circle {\n        margin-right: 5px;\n      }\n    }\n  }\n`","import React, { useState, useEffect, useReducer } from 'react'\n\nimport { Optimizer } from './InputData/optimizers/Optimizer'\n\nimport Breadcrumb from '../../components/Breadcrumb'\nimport Header from '../../components/Header'\n\nimport InputData from './InputData'\nimport BaselineSummary from './BaselineSummary'\nimport OptimizedSummary from './OptimizedSummary'\nimport DetailedReport from './DetailedReport'\n\nimport { DashboardContainer } from './styled'\n\nconst steps = [\n  'Input Data',\n  'Baseline Summary',\n  'Optimized Summary',\n  'Optimized Report',\n]\n\nconst DEFAULT_PRESETS = {\n  balanced: {\n    label: 'Balanced',\n    color: '#82B5C7',\n    description:\n      'Best combination of the fastest, minimum and levelled resources',\n  },\n  shortest_duration: {\n    label: 'Fastest',\n    color: '#f7dc5b',\n    description: 'Shortest project duration',\n  },\n  least_max_resources: {\n    label: 'Minimum Resources',\n    color: '#db7930',\n    description: 'Least amount of required resources',\n  },\n  least_std_resources: {\n    label: 'Levelled Resources',\n    color: '#AABB5D',\n    description: 'Best resource distribution',\n  },\n}\n\nexport default function Dashboard() {\n  const [navAt, setNavAt] = useState(0)\n  const [project, setProject] = useState(null)\n  const [isPresetsReset, setIsPresetsReset] = useState(false)\n  const [optimizationPresets, setOptimizationPresets] =\n    useState(DEFAULT_PRESETS)\n  const [selectedPreset, setSelectedPreset] = useState('balanced')\n  const [selectedResultIndex, setSelectedResultIndex] = useState(-1)\n  const [uploadedFile, setUploadedFile] = useState()\n  const [fileName, setFileName] = useState('No file chosen')\n  const [constraintsFileName, setConstraintsFileName] =\n    useState('No file chosen')\n\n  const [_, forceUpdate] = useReducer((x) => x + 1, 0)\n\n  function optimizePresets(project) {\n    if (!project) return\n\n    for (const op in optimizationPresets) {\n      if (optimizationPresets[op]?.optimizer)\n        optimizationPresets[op].optimizer.stop()\n    }\n    for (const op in optimizationPresets) {\n      optimizationPresets[op].optimizer = new Optimizer(project?.fileReader)\n      optimizationPresets[op].optimizer.sim_in = {\n        ...project.optimizer.sim_in,\n      }\n\n      for (const weight in optimizationPresets[op].optimizer.loss_weights)\n        optimizationPresets[op].optimizer.loss_weights[weight] = 0\n      if (op === 'shortest_duration')\n        optimizationPresets[op].optimizer.loss_weights['drtn_day'] = 100\n      else if (op === 'least_max_resources')\n        optimizationPresets[op].optimizer.loss_weights['rsrc_max'] = 100\n      else if (op === 'least_std_resources')\n        optimizationPresets[op].optimizer.loss_weights['rsrc_std'] = 100\n      else if (op === 'balanced') {\n        optimizationPresets[op].optimizer.loss_weights['drtn_day'] = 50\n        optimizationPresets[op].optimizer.loss_weights['rsrc_max'] = 50\n      }\n    }\n\n    optimizationPresets['balanced'].optimizer.optimize(\n      (opt_res1) => {\n        if (opt_res1.length === 1)\n          project.optimizer.baseline_result = { ...opt_res1[0] }\n        optimizationPresets['balanced'].optimizer.optimizing = true\n        optimizationPresets['balanced'].optimizer.results = opt_res1\n        if (selectedPreset === '') setSelectedPreset('balanced')\n        forceUpdate()\n      },\n      (opt_res1) => {\n        optimizationPresets['balanced'].optimizer.optimizing = false\n        optimizationPresets['shortest_duration'].optimizer.optimize(\n          (opt_res2) => {\n            optimizationPresets[\n              'shortest_duration'\n            ].optimizer.optimizing = true\n            optimizationPresets['shortest_duration'].optimizer.results =\n              opt_res2\n            forceUpdate()\n          },\n          (opt_res2) => {\n            optimizationPresets[\n              'shortest_duration'\n            ].optimizer.optimizing = false\n            optimizationPresets['least_max_resources'].optimizer.optimize(\n              (opt_res3) => {\n                optimizationPresets[\n                  'least_max_resources'\n                ].optimizer.optimizing = true\n                optimizationPresets['least_max_resources'].optimizer.results =\n                  opt_res3\n                forceUpdate()\n              },\n              (opt_res3) => {\n                optimizationPresets[\n                  'least_max_resources'\n                ].optimizer.optimizing = false\n                optimizationPresets['least_std_resources'].optimizer.optimize(\n                  (opt_res4) => {\n                    optimizationPresets[\n                      'least_std_resources'\n                    ].optimizer.optimizing = true\n                    optimizationPresets[\n                      'least_std_resources'\n                    ].optimizer.results = opt_res4\n                    forceUpdate()\n                  },\n                  (opt_res4) => {\n                    optimizationPresets[\n                      'least_std_resources'\n                    ].optimizer.optimizing = false\n                    forceUpdate()\n                  }\n                )\n              }\n            )\n          }\n        )\n      }\n    )\n  }\n\n  useEffect(() => {\n    if (isPresetsReset) {\n      optimizePresets(project)\n      setNavAt(1)\n      setIsPresetsReset(false)\n    }\n  }, [optimizationPresets, isPresetsReset])\n\n  let componentToRender = null\n\n  if (navAt === 0)\n    componentToRender = (\n      <InputData\n        project={project}\n        fileName={fileName}\n        setFileName={setFileName}\n        uploadedFile={uploadedFile}\n        setUploadedFile={setUploadedFile}\n        constraintsFileName={constraintsFileName}\n        setConstraintsFileName={setConstraintsFileName}\n        updateProject={(p) => {\n          setProject(p)\n        }}\n        goNext={() => {\n          setOptimizationPresets(DEFAULT_PRESETS)\n          setIsPresetsReset(true)\n        }}\n      />\n    )\n  else if (navAt === 1)\n    componentToRender = (\n      <BaselineSummary\n        optimizer={project?.optimizer}\n        optimizationPresets={optimizationPresets}\n        selectedPreset={selectedPreset}\n        selectedResultIndex={selectedResultIndex}\n        handleSelectPreset={(preset) => {\n          setSelectedPreset(preset)\n          if (\n            optimizationPresets[preset].optimizer.results.length - 1 <\n            selectedResultIndex\n          )\n            setSelectedResultIndex(\n              optimizationPresets[preset].optimizer.results.length - 1\n            )\n        }}\n        handleSelectResultIndex={(index) => {\n          setSelectedResultIndex(index)\n        }}\n        goPrev={() => {\n          setNavAt(navAt - 1)\n        }}\n        goNext={() => {\n          setNavAt(navAt + 1)\n          if (selectedResultIndex === -1)\n            setSelectedResultIndex(\n              optimizationPresets[selectedPreset].optimizer.results.length - 1\n            )\n          project.optimizer.loss_weights = {\n            ...optimizationPresets[selectedPreset].optimizer.loss_weights,\n          }\n          project.optimizer.results = [\n            ...optimizationPresets[selectedPreset].optimizer.results,\n          ]\n        }}\n      />\n    )\n  else if (navAt === 2)\n    componentToRender = (\n      <OptimizedSummary\n        optimizer={project?.optimizer}\n        selectedPreset={optimizationPresets[selectedPreset]}\n        selectedResultIndex={selectedResultIndex}\n        goPrev={() => {\n          setNavAt(navAt - 1)\n        }}\n        goNext={() => {\n          setNavAt(navAt + 1)\n        }}\n      />\n    )\n  else if (navAt === 3)\n    componentToRender = (\n      <DetailedReport\n        optimizer={project?.optimizer}\n        selectedPreset={optimizationPresets[selectedPreset].label}\n        selectedResultIndex={selectedResultIndex}\n        handleSelectResultIndex={(index) => {\n          setSelectedResultIndex(index)\n        }}\n        goPrev={() => {\n          setNavAt(navAt - 1)\n        }}\n        goNext={() => {\n          setNavAt(navAt + 1)\n        }}\n      />\n    )\n\n  const checkPresetResultsLoaded =\n    selectedPreset &&\n    optimizationPresets[selectedPreset]?.optimizer?.results?.length === 0\n\n  return (\n    <>\n      <Header />\n      <Breadcrumb\n        navAt={navAt}\n        steps={steps}\n        navigate={(step) => {\n          if (navAt === 1) {\n            if (selectedResultIndex === -1)\n              setSelectedResultIndex(\n                optimizationPresets[selectedPreset].optimizer.results.length - 1\n              )\n            project.optimizer.loss_weights = {\n              ...optimizationPresets[selectedPreset].optimizer.loss_weights,\n            }\n            project.optimizer.results = [\n              ...optimizationPresets[selectedPreset].optimizer.results,\n            ]\n          }\n          if (step === 0) {\n            setProject(undefined)\n            setFileName('Wait for the file to be re-uploaded')\n          }\n          setNavAt(step)\n        }}\n        disabled={\n          checkPresetResultsLoaded ||\n          navAt === 0 ||\n          project === null ||\n          project?.optimizer === undefined ||\n          optimizationPresets['balanced']?.optimizer?.optimizing === undefined\n        }\n      />\n      <DashboardContainer>\n        <div className=\"content\">{componentToRender}</div>\n      </DashboardContainer>\n    </>\n  )\n}\n","require('dotenv').config()\n\nexport async function login(body) {\n\treturn await fetch(`${process.env.REACT_APP_API_URL}/auth/login`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(body)\n\t})\n}\n\nexport async function requestResetPassword(body) {\n\treturn await fetch(`${process.env.REACT_APP_API_URL}/auth/request-reset-password`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(body)\n\t})\n}\n\nexport async function resetPassword(body) {\n\treturn await fetch(`${process.env.REACT_APP_API_URL}/auth/reset-password`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(body)\n\t})\n}","export function validateEmail(email) {\n  const re = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\n  const result = re.test(String(email).toLowerCase())\n  if (result) { return { result: result, message: '' } }\n\n  return { result: result, message: 'Please enter a valid email address.' }\n}\n\nexport function validatePassword(password) {\n  if (password.length < 8)\n  \treturn { result: false, message: 'Password must be 8 characters or longer.' }\n\n  const upperReg = /[A-Z]+/\n  if (upperReg.test(password))\n    return { result: false, message: 'Password must contain an uppercase letter.' }\n\n  const lowerReg = /[A-Z]+/\n  if (lowerReg.test(password))\n    return { result: false, message: 'Password must contain a lowercase letter.' }\n\n  const numberReg = /[0-9]+/\n  if (numberReg.test(password))\n    return { result: false, message: 'Password must contain a number.' }\n\n  return { result: true, message: '' }\n}","import styled from 'styled-components'\n\nexport const LoginContainer = styled.div`\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(\n    180deg,\n    rgba(255, 204, 103, 0.195) 0%,\n    rgba(0, 145, 132, 0.3) 100%\n  );\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .MuiBox-root {\n    width: 450px;\n    h3 {\n      margin-top: 0;\n    }\n    &.form {\n      background: #ffffff;\n      padding: 30px;\n      border-radius: 16px;\n      box-sizing: border-box;\n      /* display: flex;\n      flex-direction: column; */\n      .MuiTextField-root {\n        width: 100%;\n        margin-bottom: 12px;\n      }\n    }\n    img.logo {\n      width: 300px;\n    }\n  }\n  .divider {\n    position: relative;\n    &:after { \n      content: '';\n      position: absolute;\n      height: 1px;\n      width: 100%;\n      background: #eeeeee;\n      left: 0;\n      bottom: 0;\n    }\n  }\n  .error {\n    color: rgb(0, 190, 174) !important;\n    font-weight: 700;\n  }\n`\n","import React, { useState, useRef } from 'react'\n\nimport Box from '@mui/material/Box'\nimport TextField from '@mui/material/TextField'\nimport { useSignIn } from 'react-auth-kit'\nimport { useNavigate } from 'react-router-dom'\n\nimport { login } from '../../lib/fetch'\n\nimport { validateEmail } from '../../utils/validator'\nimport { LoginContainer } from './styled'\n\nimport FLlogo from '../../assets/images/logo.png'\nimport { PrimaryButton } from 'src/styled'\n\nexport default function Login() {\n  const emailRef = useRef()\n  const [emailErrorMessage, setEmailErrorMessage] = useState('')\n  const [errorMessage, setErrorMessage] = useState('')\n\n  const passwordRef = useRef()\n  const [passwordErrorMessage, setPasswordErrorMessage] = useState('')\n\n  const signIn = useSignIn()\n  const navigate = useNavigate()\n\n  async function handleLogin() {\n    const validEmail = validateEmail(emailRef.current.value)\n    setEmailErrorMessage(validEmail.message)\n    if (!validEmail.result) { return }\n\n    const response = await login({\n      email: emailRef.current.value,\n      password: passwordRef.current.value,\n    })\n      .then((response) => {\n        return response.json()\n      })\n      .then((data) => {\n        if (data.resetPasswordRequired) {\n          // setErrorMessage('Your account has no password, you will be taken to reset password page')\n          setErrorMessage('This is your first time logging in, you will be redirected to set up a password.')\n          navigate('/#/reset-password?email=' + emailRef.current.value)\n          return\n        } else if (data.accessToken) {\n          signIn({\n            token: data.accessToken,\n            expiresIn: 24 * 60, // in minutes -> 1 day\n            tokenType: 'Bearer',\n            authState: { email: emailRef.current.value },\n          })\n          navigate('/')\n          return\n        } else {\n          setErrorMessage(data.message)\n          return\n        }\n      })\n      .catch((error) => {\n        console.error('Error:', error)\n      })\n  }\n\n  function handleForgotPassword() {\n    navigate('/reset-password?email=' + emailRef.current.value)\n  }\n\n  return (\n    <LoginContainer>\n      <Box\n        sx={{ display: 'flex', flexDirection: 'column', marginRight: '40px' }}\n      >\n        <img className='logo' src={FLlogo} alt='Frontline Logo' />\n        <h1>Optimization Platform</h1>\n        Find the best sequence of activities with\n        optimal resource loading to ace your project\n      </Box>\n      <Box className='form' component='form' noValidate autoComplete='off'>\n        <h2>Log In</h2>\n        <p className='error'>{errorMessage}</p>\n        <TextField\n          label='Email'\n          variant='outlined'\n          inputRef={emailRef}\n          error={emailErrorMessage !== ''}\n          helperText={emailErrorMessage}\n          placeholder='sample@googlemail.com'\n        />\n        <TextField\n          label='Password'\n          type='password'\n          variant='outlined'\n          inputRef={passwordRef}\n          error={passwordErrorMessage !== ''}\n          helperText={passwordErrorMessage}\n          placeholder='******'\n        />\n        <div className='row'>\n          <span style={{ textDecoration: 'underline', cursor: 'pointer' }} onClick={handleForgotPassword}>Forgot password</span>\n          <PrimaryButton variant='contained' onClick={handleLogin}>\n            Login\n          </PrimaryButton>\n        </div><br />\n        <div className='divider' />\n        <h2>New Users</h2>\n        Our platform is currently only available to subscribers.\n        Please contact <a href='mailto:sales@frontlinec.com' target=\"_blank\" rel=\"noreferrer\">sales@frontlinec.com</a> to request a demo.\n      </Box>\n    </LoginContainer>\n  )\n}\n","import styled from 'styled-components'\n\nexport const ResetContainer = styled.div`\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(\n    180deg,\n    rgba(255, 204, 103, 0.195) 0%,\n    rgba(0, 145, 132, 0.3) 100%\n  );\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .MuiBox-root {\n    width: 450px;\n    h3 {\n      margin-top: 0;\n    }\n    &.form {\n      background: #ffffff;\n      padding: 30px;\n      border-radius: 16px;\n      box-sizing: border-box;\n      /* display: flex;\n      flex-direction: column; */\n      p {\n        color: #888888;\n        &.error {\n          color: rgb(0, 190, 174);\n          font-weight: 700;\n          margin-bottom: 15px;\n        }\n      }\n      .MuiTextField-root {\n        width: 100%;\n        margin-bottom: 12px;\n      }\n    }\n    img.logo {\n      width: 300px;\n    }\n  }\n`\n","import React, { useState } from 'react'\nimport { useSearchParams } from 'react-router-dom'\n\nimport Box from '@mui/material/Box'\nimport TextField from '@mui/material/TextField'\n\nimport { requestResetPassword, resetPassword } from '../../lib/fetch'\nimport { useNavigate } from 'react-router-dom'\n\nimport FLlogo from '../../assets/images/logo.png'\n\nimport { validateEmail } from '../../utils/validator'\nimport { LoginContainer } from '../Login/styled'\n\nimport { ResetContainer } from './styled'\nimport { PrimaryButton, SecondaryButton } from 'src/styled'\n\nexport default function ResetPassword() {\n  const [searchParams, setSearchParams] = useSearchParams()\n  const [email, setEmail] = useState(searchParams.get('email') ? searchParams.get('email') : '')\n  const [password, setPassword] = useState('')\n  const [resetToken, setResetToken] = useState(searchParams.get('resetToken'))\n\n  const [errorMessage, setErrorMessage] = useState('')\n\n  const navigate = useNavigate()\n\n  async function handleRequestResetPassword() {\n    const validEmail = validateEmail(email)\n    setErrorMessage(validEmail.message)\n    if (!validEmail.result) { return }\n\n    const response = await requestResetPassword({ email: email })\n      .then(response => { return response.json() })\n      .then((data) => {\n        setErrorMessage('We have sent the password reset instructions to your email. Please note the link expires in 1 hour.')\n      })\n      .catch((error) => { console.error('Error:', error) })\n  }\n\n  async function handleResetPassword() {\n    const response = await resetPassword({ email: email, password: password, token: resetToken })\n      .then(response => { return response.json() })\n      .then((data) => {\n        setErrorMessage('Your password has been successfully reset!')\n        navigate('/')\n      })\n      .catch((error) => { console.error('Error:', error) })\n  }\n\n  function handleBackPage() {\n    navigate('/login')\n  }\n\n  if (resetToken)\n    return (\n      <LoginContainer>\n        <Box\n          sx={{ display: 'flex', flexDirection: 'column', marginRight: '40px' }}\n        >\n          <img className='logo' src={FLlogo} alt=\"Frontline Logo\" />\n          <h1>Optimization Platform</h1>\n          Find the best sequence of activities with\n          optimal resource loading to ace your project\n        </Box>\n        <Box className='form' component='form' noValidate autoComplete='off'>\n          <h2>Reset Password</h2>\n          {errorMessage}\n          <p>Your new password must be different from previous used passwords.</p>\n          <TextField label='Email' variant='outlined' value={email} disabled={true} />\n          <br />\n          <TextField label='Password' type='password' variant='outlined' value={password} onChange={e => setPassword(e.target.value)} />\n          <br />\n          <div className=\"row\">\n            <div />\n            <PrimaryButton variant='contained' onClick={handleResetPassword}>\n              Reset Password\n            </PrimaryButton>\n          </div>\n        </Box>\n      </LoginContainer>\n    )\n\n  return (\n    <>\n      <ResetContainer>\n        <Box\n          sx={{ display: 'flex', flexDirection: 'column', marginRight: '40px' }}\n          noValidate\n          autoComplete='off'\n        >\n          <img className='logo' src={FLlogo} alt=\"Frontline Logo\" />\n          <h1>Optimization Platform</h1>\n          Find the best sequence of activities with\n          optimal resource loading to ace your project\n        </Box>\n        <Box className='form' component='form' noValidate autoComplete='off'>\n          <h3>Reset Password</h3>\n          <p className='error'>{errorMessage}</p>\n          <p>Enter the email associated with your account and we'll send an email with instructions to reset your password.</p>\n          <TextField label='Email' placeholder=\"example@gmail.com\" variant='outlined' value={email} onChange={e => setEmail(e.target.value)} />\n          <div className=\"row\">\n            <SecondaryButton variant='contained' onClick={handleBackPage}>\n              Back\n            </SecondaryButton>\n            <PrimaryButton variant='contained' onClick={handleRequestResetPassword}>\n              Request\n            </PrimaryButton>\n          </div>\n        </Box>\n      </ResetContainer>\n    </>\n  )\n}","import React from 'react'\nimport { HashRouter, Route, Routes } from 'react-router-dom'\nimport { AuthProvider, RequireAuth } from 'react-auth-kit'\n\nimport Dashboard from './pages/Dashboard'\nimport Login from './pages/Login'\nimport ResetPassword from './pages/ResetPassword'\n\nimport { AppContainer } from './styled'\n\nexport default function App() {\n  return (\n    <AuthProvider\n      authType={'cookie'}\n      authName={'_auth'}\n      cookieDomain={window.location.hostname}\n      cookieSecure={false}\n    >\n      <HashRouter>\n        <AppContainer>\n          <Routes>\n            <Route\n              path='/'\n              element={\n                <RequireAuth loginPath='/login'>\n                  <Dashboard />\n                </RequireAuth>\n              }\n            />\n            <Route path='/login' element={<Login />} />\n            <Route path='/reset-password' element={<ResetPassword />} />\n          </Routes>\n        </AppContainer>\n      </HashRouter>\n    </AuthProvider>\n  )\n}\n","import { AppRegistry } from 'react-native'\nimport App from './App'\nimport './main.css'\n\nAppRegistry.registerComponent('App', () => App)\n\nAppRegistry.runApplication('App', {\n  rootTag: document.getElementById('root')\n})\n","module.exports = __webpack_public_path__ + \"static/media/logo.458142f4.png\";"],"sourceRoot":""}