{"version":3,"sources":["components/Breadcrumb/styled.js","components/Breadcrumb/index.js","components/Header/styled.js","components/Header/index.js","engine/autoGrad.js","engine/models.js","engine/utils.js","engine/Optimizer.js","engine/samples.js","engine/P6XerReader.js","engine/MspXmlReader.js","feat/Modal/styled.js","feat/Modal/index.js","styled.js","pages/Dashboard/InputData/styled.js","pages/Dashboard/InputData/index.js","mods/a_utils.js","utils/color.js","utils/plot.js","components/Plot/TaskPlot.js","components/Plot/Distribution.js","pages/Dashboard/BaselineSummary/styled.js","pages/Dashboard/BaselineSummary/index.js","feat/LazyLoad/styled.js","feat/LazyLoad/index.js","pages/Dashboard/OptimizedSummary/styled.js","components/Plot/CombinedPlot.js","utils/format.js","pages/Dashboard/OptimizedSummary/index.js","components/Table/styled.js","components/Table/index.js","components/Plot/ResourcePlot.js","components/Plot/Step.js","pages/Dashboard/DetailedReport/styled.js","pages/Dashboard/DetailedReport/index.js","pages/Dashboard/styled.js","pages/Dashboard/index.js","lib/fetch.js","utils/validator.js","pages/Login/styled.js","pages/Login/index.js","pages/ResetPassword/styled.js","pages/ResetPassword/index.js","App.js","index.js","assets/images/logo.png"],"names":["BreadcrumbContainer","styled","Stepper","Breadcrumb","steps","navAt","navigate","disabled","activeStep","alternativeLabel","map","label","i","Step","key","onClick","window","location","href","StepLabel","HeaderContainer","div","Header","signOut","useSignOut","useNavigate","React","useState","anchorEl","setAnchorEl","open","Boolean","className","src","FLlogo","alt","id","aria-controls","undefined","aria-haspopup","aria-expanded","event","currentTarget","fontSize","Menu","onClose","anchorOrigin","vertical","horizontal","transformOrigin","MenuListProps","MenuList","MenuItem","ListItemIcon","ListItemText","Divider","toValue","x","Value","data","_children","gradient","_backward","this","_previous","Set","other","out","Math","pow","round","topological_order","visited","build_topology","value","has","add","forEach","push","reverse","mul","AdamOptimizer","parameters","lr","beta1","beta2","epsilon","Object","assign","m","v","entries","t","constrain","mHat","vHat","newValue","sqrt","Distribution","xy","min","max","span","y","values","length","Infinity","sub","findMinMaxSpan","addRangeLoss","sampleMin","sampleMax","loss","Project","tasks","resources","calendars","settings","considerActualDates","optimizationSteps","learningRate","minDurationRatio","maxDurationRatio","output","Task","predecessors","Resource","Calendar","TaskPredecessor","TaskResource","toObject","keys","object","len","asArray","Array","isArray","parser","Date","parse","str","toISOString","substring","parseInt","split","writeExcel","tables","filename","maxWidth","book","xlsx","book_new","name","rows","sheet","json_to_sheet","columnName","maxLen","row","String","wch","book_append_sheet","readExcel","file","File","Promise","resolve","reader","FileReader","onload","e","target","result","type","SheetNames","sheet_to_json","Sheets","readAsBinaryString","clip","Optimizer","project","results","_ignoreTasks","_reorderTasks","simulate","planned","plannedproject","JSON","stringify","constraintTables","_makeConstraints","console","log","projectFileName","task","ignore","predecessorId","found","orderedTasks","lastLen","every","Error","criticalId","durationRatios","projectStart","projectFinish","criticalPredecessorId","critical","msPerHour","calendarId","weekHourCount","actualStart","newStart","actualFinish","newFinish","newDuration","plannedDuration","durationRatio","durationMs","__findStartFromPredecessors","plannedStart","projectDurationDays","laborDistribution","__findResourceDistribution","criticalPath","__findCriticalPath","constraintLoss","__findConstraintLoss","start","predecessor","lagMs","lagHour","resource","distribution","startDay","floor","finishDay","calendar","plannedUnits","resourceId","newUnitsPerHour","newUnitsPerDay","day","ts","evaluate","minUnitsPerDay","maxUnitsPerDay","d","newTasks","newTaskResources","newResources","convertOutput","laborDistributionDays","laborDistributionMin","laborDistributionMax","laborDistributionSpan","code","join","newPlanned","newOutput","newTask","taskInfo","calendarInfo","relationInfo","plannedInfo","plannedFinish","actualInfo","frontlineInfo","criticalPathInfo","criticalPredecessor","constraintInfo","minDuration","maxDuration","newTaskResource","taskId","taskType","taskCode","resourceInfo","resourceType","resourceCode","plannedUnitsPerHour","newResource","distributionInfo","distributionDays","distributionMin","distributionMax","distributionSpan","taskResources","plannedProperties","newProperties","getValuesToMinimize","scales","optimizer","t1","now","amplitude","sort","a","b","backward","step","newRatio","t2","optimize","p6Task","task_id","proj_id","wbs_id","clndr_id","phys_complete_pct","rev_fdbk_flag","est_wt","lock_plan_flag","auto_compute_act_flag","complete_pct_type","task_type","duration_type","status_code","task_code","task_name","rsrc_id","total_float_hr_cnt","free_float_hr_cnt","remain_drtn_hr_cnt","act_work_qty","remain_work_qty","target_work_qty","target_drtn_hr_cnt","target_equip_qty","act_equip_qty","remain_equip_qty","cstr_date","act_start_date","act_end_date","late_start_date","late_end_date","expect_end_date","early_start_date","early_end_date","restart_date","reend_date","target_start_date","target_end_date","rem_late_start_date","rem_late_end_date","cstr_type","priority_type","suspend_date","resume_date","float_path","float_path_order","guid","tmpl_guid","cstr_date2","cstr_type2","driving_path_flag","act_this_per_work_qty","act_this_per_equip_qty","external_early_start_date","external_late_end_date","cbs_id","pre_pess_start_date","pre_pess_finish_date","post_pess_start_date","post_pess_finish_date","create_date","update_date","create_user","update_user","location_id","control_updates_flag","crt_path_num","p6Resource","parent_rsrc_id","role_id","shift_id","user_id","pobs_id","rsrc_seq_num","email_addr","employee_code","office_phone","other_phone","rsrc_name","rsrc_short_name","rsrc_title_name","def_qty_per_hr","cost_qty_type","ot_factor","active_flag","def_cost_qty_link_flag","ot_flag","curr_id","unit_id","rsrc_type","ts_approve_user_id","timesheet_flag","rsrc_notes","load_tasks_flag","level_flag","last_checksum","p6Calendar","default_flag","clndr_name","base_clndr_id","last_chng_date","clndr_type","day_hr_cnt","week_hr_cnt","month_hr_cnt","year_hr_cnt","rsrc_private","clndr_data","p6TaskPredecessor","task_pred_id","pred_task_id","pred_proj_id","pred_type","lag_hr_cnt","comments","aref","arls","p6TaskResource","taskrsrc_id","cost_qty_link_flag","acct_id","skill_level","remain_qty","target_qty","remain_qty_per_hr","target_lag_drtn_hr_cnt","target_qty_per_hr","act_ot_qty","act_reg_qty","relag_drtn_hr_cnt","cost_per_qty","target_cost","act_reg_cost","act_ot_cost","remain_cost","rollup_dates_flag","target_crv","remain_crv","actual_crv","ts_pend_act_end_flag","rate_type","act_this_per_cost","act_this_per_qty","curv_id","cost_per_qty_source_type","has_rsrchours","taskrsrc_sum_id","mspTask","UID","Name","Active","ID","Type","Manual","IsNull","CreateDate","WBS","OutlineNumber","OutlineLevel","Priority","ManualStart","ManualFinish","ManualDuration","Start","Finish","Duration","Work","Stop","Resume","EffortDriven","Recurring","OverAllocated","Estimated","Milestone","Summary","Critical","IsSubproject","ExternalTask","EarlyFinish","EarlyStart","LateStart","LateFinish","StartVariance","FinishVariance","WorkVariance","FreeSlack","TotalSlack","FixedCost","FixedCostAccrual","PercentComplete","PercentWorkComplete","Cost","OvertimeCost","OvertimeWork","ActualStart","ActualDuration","ActualCost","ActualOvertimeCost","ActualWork","ActualOvertimeWork","RegularWork","RemainingDuration","RemainingWork","RemainingOvertimeCost","RemainingOvertimeWork","ACWP","CV","ConstraintType","LevelAssignments","LevelingCanSplit","LevelingDelay","CalendarUID","Hyperlink","HyperlinkAddress","HyperlinkSubAddress","IgnoreResourceCalendar","HideBar","Rollup","BCWS","BCWP","PhysicalPercentComplete","EarnedValueMethod","Baseline","IsPublished","mspResource","Initials","WorkGroup","MaxUnits","PeakUnits","CanLevel","AccrueAt","StandardRate","OvertimeRate","OvertimeRateFormat","CostPerUse","RemainingCost","CostVariance","SV","IsInactive","IsGeneric","BookingType","CreationDate","IsEnterprise","mspCalendar","IsBaseCalendar","BaseCalendarUID","WeekDays","WeekDay","DayType","DayWorking","WorkingTimes","WorkingTime","FromTime","ToTime","mspTaskPredecessor","PredecessorUID","CrossProject","LinkLag","LagFormat","mspTaskResource","ResourceUID","TaskUID","Delay","LinkedFields","PeekUnits","Units","WorkContour","TimephasedData","P6XerReader","rawText","trim","rawData","rawTextToRawData","rawDataToProject","readAsText","header","text","table","line","columns","items","slice","TASK","samples","RSRC","Labor","Equip","Mat","CALENDAR","TASKPRED","TASKRSRC","parseFloat","lines","projectToRawData","rawDataToRawText","document","createElement","setAttribute","encodeURIComponent","style","display","body","appendChild","click","removeChild","exportFile","parts","extension","pop","addToFilename","MspXmlReader","XMLParser","ignoreAttributes","ignoreDeclaration","ignorePiTags","p","Tasks","ActualFinish","PredecessorLink","Resources","defaultCalendar","totalCalendars","Calendars","time","hour","totalAssignments","Assignments","Assignment","XMLBuilder","build","LoadingModal","Modal","ModalContent","Box","isLoading","spinner","title","content","aria-labelledby","aria-describedby","AppContainer","PrimaryButton","Button","SecondaryButton","Content","OptimizationContainer","InputField","Input","ratioMarks","stepMarks","InputData","uploadedFile","setUploadedFile","fileName","setFileName","constraintsFileName","setConstraintsFileName","updateProject","setOptimizer","goNext","setIsLoading","isFileUploaded","setIsFileUploaded","setProject","considerDates","setConsiderDates","ratio","setRatio","setSteps","setLearningRate","useEffect","handleConsiderDatesChange","readProject","endsWith","read","buttonOnClick","setTimeout","optimizeDefaults","alignItems","hidden","onChange","files","accept","htmlFor","textDecoration","cursor","fetch","then","r","blob","downloadConstraints","applyConstraints","FormControl","Tooltip","fontFamily","justifyContent","FormControlLabel","checked","control","Radio","defaultValue","placeholder","variant","width","toString","Slider","valueLabelDisplay","getAriaLabel","marks","aria-label","size","down_sample","data_","keep","skip","plot_color_palette","TaskPlot","optimizedTask","optimizedCriticalTask","baselineTask","baselineCriticalTask","ComparisonPlot","ResourcePlot","allResources","init_d3","margin","x_domain","y_domain","height","ref","x_label","y_label","x_type","d3","y_type","x1","x2","y2","y1","x_scale","y_scale","svg","current","attr","selectChildren","remove","append","call","g","tickValues","xGrid","scale","tickFormat","tickSizeInner","yGrid","domains_with_margin","x_amount","y_amount","x_margin","y_margin","selectedColor","baselineTasks","color","useRef","baselineData","filter","bd","y_optimized_domain","y_baseline_domain","selectAll","on","tooltip","background","position","top","pageY","left","pageX","padding","pointerEvents","borderRadius","ReactDOM","render","getElementById","unmountComponentAtNode","DistibutionPlot","baselineResults","optimizationPresets","selectedPreset","selectedResultIndex","k","outputs","flat","laborMax","domains","newData","drtn_day","rsrc_max","newName","OptimizationCharts","LoadingTitle","BaselineSummary","baseline","setSelectedPreset","setSelectedResultIndex","currentTasks","setCurrentTasks","listOfPresets","selectedPresetResult","at","statData","numbers","duration","critical_paths","marginRight","component","RadioGroup","o","LazyLoadContainer","LazyLoad","children","onLoadMore","isVisible","setIsVisible","ToggleGroup","ToggleButtonGroup","CombinedPlot","base_results","new_results","base_resource_distribution","new_resource_distribution","showResourcePlot","setShowResourcePlot","useReducer","_","forceUpdate","x_optimized_domain","x_baseline_domain","y_optimized_values","y_baseline_values","show_in_plot","exclusive","ToggleButton","toggleSelectResource","item","newItem","ResourceList","visibleCount","setVisibleCount","remainingLength","opacity","limit","prevCount","calculatePercentage","optimized","percentage","checkPositive","sign","abs","OptimizedSummary","goPrev","selectedPresetResultOutput","baselineProjectDuration","newProjectDuration","baselineResources","baselineCriticalTasks","newCriticalTasks","resourcesData","labor","base","new","material","resource_distribution","l","toLowerCase","textTransform","TableContainer","Table","hidden_columns","makeRowHeight","initial_state","columnVisibilityModel","DataGrid","initialState","dist","Number","msg","StepsPlot","x_axis","idx","option","TableContent","TableHead","DetailedReport","handleSelectResultIndex","openModal","setOpenModal","currentResources","setCurrentResources","changedTasks","tasks_rows","calcRatio","toFixed","old_duration","new_duration","tasks_columns","field","headerName","renderCell","params","maxHeight","whiteSpace","hide","wordWrap","resources_rows","reduce","total","std","resources_columns","filteredTasksResourcesResults","resourceName","resource_id","resource_name","planned_duration","units_new_per_hour","planned_units","planned_units_per_hour","tasks_resources_rows","t_id","t_name","new_units_per_hour","tasks_resources_columns","marginBottom","index","merge_data","inp","export","exportToExcel","DashboardContainer","presets","balanced","description","fastest","min_resources","levelled_resources","Dashboard","setNavAt","isPresetsReset","setIsPresetsReset","setOptimizationPresets","componentToRender","login","process","method","headers","requestResetPassword","resetPassword","validateEmail","email","test","message","require","config","LoginContainer","Login","emailRef","emailErrorMessage","setEmailErrorMessage","errorMessage","setErrorMessage","passwordRef","passwordErrorMessage","signIn","useSignIn","validEmail","password","response","json","resetPasswordRequired","accessToken","token","expiresIn","tokenType","authState","catch","error","sx","flexDirection","noValidate","autoComplete","TextField","inputRef","helperText","rel","ResetContainer","ResetPassword","useSearchParams","searchParams","get","setEmail","setPassword","resetToken","App","authType","authName","cookieDomain","hostname","cookieSecure","path","element","loginPath","AppRegistry","registerComponent","runApplication","rootTag","module","exports"],"mappings":"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","file":"static/js/main.6d21315e.chunk.js","sourcesContent":["import styled from 'styled-components'\nimport { Stepper } from '@mui/material'\n\nexport const BreadcrumbContainer = styled(Stepper)`\n  margin: 30px auto;\n  width: 1200px;\n  .Mui-active circle {\n    color: #00beae;\n  }\n  .Mui-completed circle,.Mui-completed {\n    color: #002F2B !important;\n  }\n`","import React from 'react'\n\nimport { Step, StepLabel } from '@mui/material'\n\nimport { BreadcrumbContainer } from './styled'\n\n\nexport default function Breadcrumb({ steps, navAt, navigate, disabled }) {\n  return <BreadcrumbContainer activeStep={navAt} alternativeLabel>\n    {steps.map((label, i) => (\n      <Step key={label} onClick={() => {\n        if (navAt !== 0) {\n          if (i === 0) {\n            window.location.href = '/'\n          }\n        }\n        if (!disabled)\n          navigate(i)\n      }}>\n        <StepLabel>{label}</StepLabel>\n      </Step>\n    ))}\n  </BreadcrumbContainer>\n}\n","import styled from 'styled-components'\n\nexport const HeaderContainer = styled.div`\n  width: 100%;\n  box-sizing: border-box;\n  min-height: 55px;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  .header { \n    margin: 0 auto 20px;\n    padding: 20px 0;\n    max-width: 1200px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .logo {\n      display: flex;\n      align-items: center;\n      img {\n        max-width: 200px;\n        margin-right: 20px;\n      }\n    }\n    .menu {\n      &:focus {\n         outline: none !important;\n      }\n    }\n  }\n`","import React from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { useSignOut } from 'react-auth-kit'\n\nimport Menu from '@mui/material/Menu'\nimport MenuList from '@mui/material/MenuList'\nimport MenuItem from '@mui/material/MenuItem'\nimport ListItemText from '@mui/material/ListItemText'\nimport ListItemIcon from '@mui/material/ListItemIcon'\nimport Divider from '@mui/material/Divider'\n\nimport { HeaderContainer } from './styled'\n\nimport FLlogo from '../../assets/images/logo.png'\n\nimport MenuIcon from '@mui/icons-material/Menu'\nimport LaptopMacIcon from '@mui/icons-material/LaptopMac'\nimport LogoutIcon from '@mui/icons-material/Logout'\n\nexport default function Header() {\n  const signOut = useSignOut()\n  const navigate = useNavigate()\n\n  function handleLogout() {\n    signOut()\n    // Might put some delay here (3 secs?)\n    // alert('You have been logged out. You will be redirected to the login page.')\n    navigate('/login')\n  }\n\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const open = Boolean(anchorEl)\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  return <HeaderContainer>\n    <div className='header'>\n      <div className='logo'>\n        <a href='/'><img src={FLlogo} alt='Frontline Logo' /></a>\n        <span>v2.0.0</span>\n      </div>\n      <div className='account'>\n        <MenuIcon\n          id='basic-button'\n          aria-controls={open ? 'basic-menu' : undefined}\n          aria-haspopup='true'\n          aria-expanded={open ? 'true' : undefined}\n          onClick={handleClick} fontSize='medium' />\n        <Menu\n          id='basic-menu'\n          anchorEl={anchorEl}\n          open={open}\n          onClose={handleClose}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          transformOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          MenuListProps={{\n            'aria-labelledby': 'basic-button',\n          }}>\n          <MenuList className='menu'>\n            <MenuItem\n              onClick={() => {\n                window.open('https://app.frontline-optimizer.com/v1.0.0/', '_blank', 'noopener,noreferrer')\n              }} >\n              <ListItemIcon>\n                <LaptopMacIcon fontSize='small' />\n              </ListItemIcon>\n              <ListItemText>Back to v1.0.0</ListItemText>\n            </MenuItem>\n            <Divider />\n            <MenuItem onClick={handleLogout} >\n              <ListItemIcon>\n                <LogoutIcon />\n              </ListItemIcon>\n              <ListItemText>Log Out</ListItemText>\n            </MenuItem>\n          </MenuList>\n        </Menu>\n      </div>\n    </div>\n  </HeaderContainer>\n}\n","function toValue(x) {\n  if (x instanceof Value) return x;\n  return new Value(x);\n}\n\n// gradient is derivative\nexport class Value {\n  gradient = 0;\n  _backward = () => { };\n\n  constructor(data, _children = []) {\n    this.data = data;\n    this._previous = new Set(_children);\n  }\n\n  add(other) {\n    other = toValue(other);\n    let out = new Value(this.data + other.data, [this, other]);\n\n    out._backward = () => {\n      this.gradient += out.gradient;\n      other.gradient += out.gradient;\n    };\n\n    return out;\n  }\n\n  mul(other) {\n    other = toValue(other);\n    let out = new Value(this.data * other.data, [this, other]);\n\n    out._backward = () => {\n      this.gradient += other.data * out.gradient;\n      other.gradient += this.data * out.gradient;\n    };\n\n    return out;\n  }\n\n  pow(other) {\n    let out = new Value(Math.pow(this.data, other), [this]);\n\n    out._backward = () => {\n      this.gradient += other * Math.pow(this.data, other - 1) * out.gradient;\n    };\n\n    return out;\n  }\n\n  round() {\n    let out = new Value(Math.round(this.data), [this]);\n    out._backward = () => {\n      this.gradient += out.gradient;\n    };\n    return out;\n  }\n\n  backward() {\n    let topological_order = [];\n    let visited = new Set();\n\n    let build_topology = (value = new Value(0)) => {\n      if (!visited.has(value)) {\n        visited.add(value);\n        value._previous.forEach(build_topology);\n        topological_order.push(value);\n      }\n    };\n    build_topology(this);\n\n    this.gradient = 1;\n    topological_order.reverse().forEach((value) => {\n      value._backward();\n    });\n  }\n\n  sub(other) {\n    other = toValue(other);\n    return this.add(other.mul(-1));\n  }\n\n  div(other) {\n    other = toValue(other);\n    return this.mul(other.pow(-1));\n  }\n}\n\nexport class AdamOptimizer {\n  constructor(parameters, lr = 1e-3, beta1 = 0.9, beta2 = 0.999, epsilon = 1e-8) {\n    Object.assign(this, { parameters, lr, beta1, beta2, epsilon });\n    this.m = {};\n    this.v = {};\n    Object.entries(parameters).forEach(([id, value]) => {\n      this.m[id] = 0;\n      this.v[id] = 0;\n    });\n    this.t = 0;\n  }\n\n  step(constrain = (id, value) => value) {\n    let { parameters, lr, beta1, beta2, epsilon, m, v } = this;\n    this.t += 1;\n    Object.entries(parameters).forEach(([id, value]) => {\n      m[id] = beta1 * m[id] + (1 - beta1) * value.gradient;\n      v[id] = beta2 * v[id] + (1 - beta2) * Math.pow(value.gradient, 2);\n      let mHat = m[id] / (1 - Math.pow(beta1, this.t));\n      let vHat = v[id] / (1 - Math.pow(beta2, this.t));\n      let newValue = value.data - (lr * mHat) / (Math.sqrt(vHat) + epsilon);\n      parameters[id] = new Value(constrain(id, newValue));\n    });\n  }\n}\n\nexport function findMinMaxSpan(values = [new Value(0)]) {\n  values = Object.values(values);\n  if (!values.length) return;\n  let min = new Value(Infinity),\n    max = new Value(-Infinity);\n  values.forEach((value) => {\n    if (value.data < min.data) min = value;\n    if (value.data > max.data) max = value;\n  });\n  let span = max.sub(min);\n  return { min, max, span };\n}\n\nexport class Distribution {\n  xy = {};\n  min = new Value(0);\n  max = new Value(0);\n  span = new Value(0);\n\n  add(x, y) {\n    if (!this.xy[x]) this.xy[x] = new Value(0);\n    this.xy[x] = this.xy[x].add(y);\n  }\n\n  evaluate() {\n    Object.assign(this, findMinMaxSpan(this.xy));\n  }\n}\n\nexport function addRangeLoss(sampleMin, sampleMax, min, max, loss = new Value(0)) {\n  if (sampleMin?.data < min) {\n    loss = loss.add(sampleMin.sub(min).div(-min));\n  }\n  if (sampleMax?.data > max) {\n    loss = loss.add(sampleMax.sub(max).div(max));\n  }\n  return loss;\n}\n","export class Project {\n  projectFileName;\n  tasks = {}; // maps ID to task\n  resources = {}; // maps ID to resource\n  calendars = {}; // maps ID to calendars\n\n  settings = {\n    considerActualDates: false, // change UI input, remove default date\n    optimizationSteps: 20,\n    learningRate: 0.025, // how many percent want to change at every step\n    minDurationRatio: 0.5, // min\n    maxDurationRatio: 1.5,\n  };\n\n  output = {\n    //projectStart,\n    //projectFinish,\n    //projectDurationDays,\n    //laborDistribution,\n    //criticalPath,\n    //constraintLoss,\n  };\n}\n\nexport class Task {\n  id;\n  name; // Activity Name | task_name | Name\n  code; // ... | task_code | ...\n  type; // Activity Type | task_type | Task or Milestone\n\n  calendarId; // Activity Calendars | clndr_id | Task Calendar\n  predecessors = {};\n  resources = {};\n\n  //start; // Start | start_date | Start\n  //finish; // Finish | end_date | Finish\n  //duration; // At Completion Duration | total_drtn_hr_cnt | Duration\n\n  //earlyStart; // Early Start | early_start_date | Early Start\n  //earlyFinish; // Early Finish | early_end_date | Early Finish\n\n  //lateStart; // Late Start | late_start_date | Late Start\n  //lateFinish; // Late Finish | late_end_date | Late Finish\n\n  plannedStart; // Planned Start | target_start_date | Baseline Start\n  plannedFinish; // Planned Finish | target_end_date | Baseline Finish\n  plannedDuration; // Planned Duration | target_drtn_hr_cnt | Baseline Duration\n\n  actualStart; // Actual Start | act_start_date | Actual Start\n  actualFinish; // Actual Finish | act_end_date | Actual Finish\n  //actualDuration; // Actual Duration | act_drtn_hr_cnt | Actual Duration\n\n  //remainingDuration; // Remaining Duration | remain_drtn_hr_cnt | Remaining Duration\n\n  durationRatio;\n  newDuration;\n  newStart;\n  newFinish;\n\n  criticalPredecessorId;\n  critical;\n\n  ignore;\n}\n\nexport class Resource {\n  id;\n  name; // Resource Name | rsrc_name | Name\n  code; // Resource ID | rsrc_short_name | Initials\n  type; // Resource Type (labor, equipment, material) | rsrc_type | Type (work = labor / equipment)\n\n  //maxUnitsPerHour; // Max Units/Time | max_qty_per_hr | Max Units\n\n  distribution;\n}\n\nexport class Calendar {\n  id;\n  name;\n  //dayHourCount;\n  weekHourCount;\n}\n\nexport class TaskPredecessor {\n  id;\n  taskId;\n  predecessorId;\n\n  type;\n  lagHour;\n}\n\nexport class TaskResource {\n  id;\n  taskId;\n  resourceId;\n\n  //totalUnits; // At Completion Units | total_qty | Work\n\n  plannedUnits; // Planned Units | target_qty | Planned Work\n  plannedUnitsPerHour; // Planned Units/Time | target_qty_per_hr | Units\n\n  //actualUnits; // Actual Regular Units | act_reg_qty | Actual Work\n  //actualUnitsPerHour; // Actual Overtime Units | act_ot_qty | Actual Overtime Work\n\n  newUnitsPerHour;\n  newUnitsPerDay;\n}\n","import * as xlsx from \"xlsx\";\n\nexport async function fetchFile(url = \"\") {\n  let filename = url.split(\"/\").pop();\n  let res = await fetch(url);\n  let blob = await res.blob();\n  return new File([blob], filename);\n}\n\nexport function toObject(keys = [], values) {\n  let object = {};\n  keys.forEach((key, i) => (object[key] = values[i]));\n  return object;\n}\n\nexport function len(x) {\n  return Object.keys(x).length;\n}\n\nexport function asArray(x) {\n  return x ? (Array.isArray(x) ? x : [x]) : [];\n}\n\nexport const parser = {\n  parseDate(x) {\n    return Date.parse(x + \"Z\");\n  },\n  strDate(x) {\n    if (!x) return;\n    let str = new Date(x).toISOString();\n    return str.substring(0, 10) + \" \" + str.substring(11, 16);\n  },\n  parseDuration(x = \"PT200H0M0S\") {\n    return parseInt(x.split(\"PT\")[1].split(\"H\")[0]);\n  },\n  strDuration(x) {\n    return `PT${x}H0M0S`;\n  },\n};\n\nexport function writeExcel(tables, filename, maxWidth = 50) {\n  let book = xlsx.utils.book_new();\n  Object.entries(tables).forEach(([name, rows]) => {\n    rows = Object.values(rows);\n    let sheet = xlsx.utils.json_to_sheet(rows);\n    sheet[\"!cols\"] = Object.keys(rows[0]).map((columnName) => {\n      let maxLen = Math.max(\n        columnName.length,\n        ...rows.map((row) => (row[columnName] ? String(row[columnName]).length : 0))\n      );\n      return { wch: Math.min(maxWidth, maxLen + 1) };\n    });\n    xlsx.utils.book_append_sheet(book, sheet, name);\n  });\n  xlsx.writeFile(book, filename);\n}\n\nexport function readExcel(file = new File()) {\n  return new Promise((resolve) => {\n    let reader = new FileReader();\n    reader.onload = (e) => {\n      let book = xlsx.read(e.target.result, { type: \"binary\" });\n      let tables = {};\n      book.SheetNames.forEach((name) => {\n        tables[name] = xlsx.utils.sheet_to_json(book.Sheets[name]);\n      });\n      resolve(tables);\n    };\n    reader.readAsBinaryString(file);\n  });\n}\n\nexport function exportFile(filename, text) {\n  let e = document.createElement(\"a\");\n  let prefix = \"data:text/plain;charset=utf-8,\";\n  e.setAttribute(\"href\", prefix + encodeURIComponent(text));\n  e.setAttribute(\"download\", filename);\n  e.style.display = \"none\";\n  document.body.appendChild(e);\n  e.click();\n  document.body.removeChild(e);\n}\n\nexport function clip(value, min, max) {\n  if (min || min === 0) value = Math.max(min, value);\n  if (max || max === 0) value = Math.min(max, value);\n  return value;\n}\n\nexport function addToFilename(filename = \"\", add = \"\") {\n  let parts = filename.split(\".\");\n  let extension = parts.pop();\n  return parts.join(\".\") + add + \".\" + extension;\n}\n","import { Value, Distribution, AdamOptimizer, addRangeLoss } from \"./autoGrad\";\nimport { Project, Task } from \"./models\";\nimport { clip, len, parser, readExcel, writeExcel } from \"./utils\";\n\nconst MS_PER_HOUR = 60 * 60 * 1000;\nconst MS_PER_DAY = 24 * MS_PER_HOUR;\nconst MS_PER_WEEK = 7 * MS_PER_DAY;\n\nexport class Optimizer {\n  project = new Project();\n  results = {};\n\n  constructor(project = new Project()) {\n    this.project = project;\n    this._ignoreTasks();\n    this._reorderTasks();\n\n    this.simulate();\n    this.planned = this.project.output;\n\n    // BASELINE\n    this.plannedproject = JSON.parse(JSON.stringify(this.project))\n\n    this.constraintTables = this._makeConstraints();\n    console.log(project.projectFileName);\n  }\n\n  _ignoreTasks() {\n    let { tasks } = this.project;\n    Object.values(tasks).forEach((task) => {\n      task.ignore = task.type !== \"Task\";\n    });\n    Object.values(tasks).forEach((task) => {\n      Object.values(task.predecessors).forEach((x) => {\n        let predecessor = tasks[x.predecessorId];\n        if (predecessor.ignore) {\n          delete task.predecessors[x.predecessorId];\n        }\n      });\n    });\n  }\n\n  _reorderTasks() {\n    let { tasks, resources, calendars } = this.project;\n    let found = {};\n    this.orderedTasks = [];\n\n    const loopOnce = () => {\n      Object.values(tasks).forEach((task) => {\n        if (found[task.id]) return;\n        if (task.ignore) found[task.id] = true;\n        if (Object.values(task.predecessors).every((x) => found[x.predecessorId])) {\n          found[task.id] = true;\n          if (!task.ignore) this.orderedTasks.push(task);\n        }\n      });\n    };\n\n    while (1) {\n      let lastLen = len(found);\n      loopOnce();\n      if (len(found) === lastLen) break;\n    }\n\n    if (len(found) !== len(tasks)) {\n      throw new Error(\"predecessor error\");\n    } else {\n      console.log(\n        `topological reordering successful. ${len(this.orderedTasks)}/${len(tasks)} tasks considered. ${len(\n          resources\n        )} resources. ${len(calendars)} calendars.`\n      );\n    }\n  }\n\n  simulate(durationRatios = {}) {\n    let { settings, calendars } = this.project;\n\n    let projectStart = new Value(Infinity);\n    let projectFinish = new Value(0);\n    let criticalId;\n\n    this.orderedTasks.forEach((task) => {\n      task.criticalPredecessorId = null;\n      task.critical = null;\n\n      let msPerHour = MS_PER_WEEK / calendars[task.calendarId].weekHourCount;\n\n      if (settings.considerActualDates && task.actualStart) {\n        task.newStart = new Value(task.actualStart);\n        if (task.actualFinish) {\n          task.newFinish = new Value(task.actualFinish);\n          task.newDuration = task.newFinish.sub(task.newStart).div(msPerHour).round();\n        } else {\n          task.newDuration = new Value(task.plannedDuration);\n          task.newFinish = task.newStart.add(task.newDuration.mul(msPerHour));\n        }\n      } else {\n        task.durationRatio = durationRatios[task.id] || new Value(1);\n        task.newDuration = task.durationRatio.mul(task.plannedDuration).round();\n        let durationMs = task.newDuration.mul(msPerHour);\n        if (len(task.predecessors)) {\n          task.newStart = this.__findStartFromPredecessors(task, durationMs);\n        } else {\n          task.newStart = new Value(task.plannedStart);\n        }\n        task.newFinish = task.newStart.add(durationMs);\n      }\n\n      if (task.newStart.data < projectStart.data) {\n        projectStart = task.newStart;\n      }\n      if (task.newFinish.data > projectFinish.data) {\n        projectFinish = task.newFinish;\n        criticalId = task.id;\n      }\n    });\n\n    let projectDurationDays = projectFinish.sub(projectStart).div(MS_PER_DAY);\n    let laborDistribution = this.__findResourceDistribution();\n    let criticalPath = this.__findCriticalPath(criticalId);\n    let constraintLoss = this.__findConstraintLoss();\n\n    // console.log(\n    //   `${Math.round(projectDurationDays.data)} days. labor: max ${Math.round(laborDistribution.max.data)}, span ${Math.round(laborDistribution.span.data)}. critical: ${len(criticalPath)}. constraint loss: ${constraintLoss.data}.`\n    // );\n\n    this.project.output = {\n      projectStart,\n      projectFinish,\n      projectDurationDays,\n      laborDistribution,\n      criticalPath,\n      constraintLoss,\n    };\n  }\n\n  __findStartFromPredecessors(task = new Task(), durationMs) {\n    let newStart = new Value(0);\n    Object.values(task.predecessors).forEach((x) => {\n      let predecessor = this.project.tasks[x.predecessorId];\n      let lagMs = x.lagHour * MS_PER_HOUR;\n      let start;\n      if (x.type === \"FS\") {\n        start = predecessor.newFinish.add(lagMs);\n      } else if (x.type === \"SS\") {\n        start = predecessor.newStart.add(lagMs);\n      } else if (x.type === \"FF\") {\n        start = predecessor.newFinish.add(lagMs).sub(durationMs);\n      } else if (x.type === \"SF\") {\n        start = predecessor.newStart.add(lagMs).sub(durationMs);\n      }\n      if (start.data > newStart.data) {\n        newStart = start;\n        task.criticalPredecessorId = predecessor.id;\n      }\n    });\n    return newStart;\n  }\n\n  __findResourceDistribution() {\n    let { resources, calendars } = this.project;\n    Object.values(resources).forEach((resource) => {\n      resource.distribution = new Distribution();\n    });\n    let laborDistribution = new Distribution();\n\n    this.orderedTasks.forEach((task) => {\n      if (task.newDuration.data === 0) return;\n\n      let startDay = Math.floor(task.newStart.data / MS_PER_DAY);\n      let finishDay = Math.floor(task.newFinish.data / MS_PER_DAY);\n      let calendar = calendars[task.calendarId];\n\n      Object.values(task.resources).forEach((x) => {\n        if (x.plannedUnits === 0) return;\n\n        let resource = resources[x.resourceId];\n        x.newUnitsPerHour = new Value(x.plannedUnits).div(task.newDuration);\n        if (resource.type === \"Material\") {\n          x.newUnitsPerDay = x.newUnitsPerHour.mul(calendar.weekHourCount / 7);\n        } else {\n          x.newUnitsPerDay = x.newUnitsPerHour;\n        }\n\n        for (let day = startDay; day <= finishDay; day++) {\n          let ts = day * MS_PER_DAY;\n          resource.distribution.add(ts, x.newUnitsPerDay);\n          if (resource.type === \"Labor\") {\n            laborDistribution.add(ts, x.newUnitsPerDay);\n          }\n        }\n      });\n    });\n\n    Object.values(resources).forEach((resource) => {\n      resource.distribution.evaluate();\n    });\n    laborDistribution.evaluate();\n    return laborDistribution;\n  }\n\n  __findCriticalPath(criticalId) {\n    let criticalPath = [];\n    while (criticalId) {\n      criticalPath.push(criticalId);\n      let task = this.project.tasks[criticalId];\n      task.critical = true;\n      criticalId = task.criticalPredecessorId;\n    }\n    return criticalPath;\n  }\n\n  __findConstraintLoss() {\n    let loss = new Value(0);\n\n    this.orderedTasks.forEach((task) => {\n      Object.values(task.resources).forEach((x) => {\n        loss = addRangeLoss(x.newUnitsPerDay, x.newUnitsPerDay, x.minUnitsPerDay, x.maxUnitsPerDay, loss);\n      });\n    });\n\n    Object.values(this.project.resources).forEach((x) => {\n      let d = x.distribution;\n      loss = addRangeLoss(d.min, d.max, x.minUnitsPerDay, x.maxUnitsPerDay, loss);\n    });\n\n    return loss;\n  }\n\n  _makeConstraints() {\n    let { planned, project } = this;\n    let { tasks, resources, calendars, output } = project;\n    let newTasks = [];\n    let newTaskResources = [];\n    let newResources = [];\n\n    const convertOutput = (out) => ({\n      projectStart: parser.strDate(out.projectStart.data),\n      projectFinish: parser.strDate(out.projectFinish.data),\n      projectDurationDays: Math.round(out.projectDurationDays.data),\n      laborDistributionDays: len(out.laborDistribution.xy),\n      laborDistributionMin: out.laborDistribution.min.data,\n      laborDistributionMax: out.laborDistribution.max.data,\n      laborDistributionSpan: out.laborDistribution.span.data,\n      criticalPath: out.criticalPath.map((id) => tasks[id].code).join(\", \"),\n      constraintLoss: out.constraintLoss.data,\n    });\n\n    let newPlanned = [convertOutput(planned)];\n    let newOutput = [convertOutput(output)];\n\n    Object.values(tasks).forEach((task) => {\n      let calendar = calendars[task.calendarId];\n      let newTask = {\n        taskInfo: \"|||\",\n        id: task.id,\n        type: task.type,\n        ignore: task.ignore,\n        code: task.code,\n        name: task.name,\n\n        calendarInfo: \"|||\",\n        weekHourCount: calendar.weekHourCount,\n\n        relationInfo: \"|||\",\n        predecessors: Object.values(task.predecessors)\n          .map((x) => tasks[x.predecessorId].code)\n          .join(\", \"),\n        resources: Object.values(task.resources)\n          .map((x) => resources[x.resourceId].code)\n          .join(\", \"),\n\n        plannedInfo: \"|||\",\n        plannedDuration: task.plannedDuration,\n        plannedStart: parser.strDate(task.plannedStart),\n        plannedFinish: parser.strDate(task.plannedFinish),\n\n        actualInfo: \"|||\",\n        actualStart: parser.strDate(task.actualStart),\n        actualFinish: parser.strDate(task.actualFinish),\n\n        frontlineInfo: \"|||\",\n        durationRatio: task.durationRatio?.data,\n        newDuration: task.newDuration?.data,\n        newStart: parser.strDate(task.newStart?.data),\n        newFinish: parser.strDate(task.newFinish?.data),\n\n        criticalPathInfo: \"|||\",\n        criticalPredecessor: tasks[task.criticalPredecessorId]?.code,\n        critical: task.critical,\n\n        constraintInfo: \"|||\",\n        minDuration: null,\n        maxDuration: null,\n      };\n      newTasks.push(newTask);\n\n      Object.values(task.resources).forEach((x) => {\n        let resource = resources[x.resourceId];\n        let newUnitsPerHour = x.newUnitsPerHour?.data || 0;\n        let newUnitsPerDay = x.newUnitsPerDay?.data || 0;\n\n        let newTaskResource = {\n          id: x.id,\n\n          taskInfo: \"|||\",\n          taskId: x.taskId,\n          taskType: task.type,\n          taskCode: task.code,\n\n          resourceInfo: \"|||\",\n          resourceId: x.resourceId,\n          resourceType: resource.type,\n          resourceCode: resource.code,\n\n          calendarInfo: \"|||\",\n          weekHourCount: calendar.weekHourCount,\n\n          plannedInfo: \"|||\",\n          plannedUnits: x.plannedUnits,\n          plannedUnitsPerHour: x.plannedUnitsPerHour,\n\n          frontlineInfo: \"|||\",\n          newDuration: task.newDuration?.data,\n          newUnitsPerHour,\n          newUnitsPerDay,\n\n          constraintInfo: \"|||\",\n          minUnitsPerDay: null,\n          maxUnitsPerDay: null,\n        };\n        newTaskResources.push(newTaskResource);\n      });\n    });\n\n    Object.values(resources).forEach((resource) => {\n      let d = resource.distribution;\n      let newResource = {\n        resourceInfo: \"|||\",\n        id: resource.id,\n        type: resource.type,\n        code: resource.code,\n        name: resource.name,\n\n        distributionInfo: \"|||\",\n        distributionDays: len(d.xy),\n        distributionMin: d.min.data,\n        distributionMax: d.max.data,\n        distributionSpan: d.span.data,\n\n        constraintInfo: \"|||\",\n        minUnitsPerDay: null,\n        maxUnitsPerDay: null,\n      };\n      newResources.push(newResource);\n    });\n\n    return {\n      tasks: newTasks,\n      resources: newResources,\n      taskResources: newTaskResources,\n      plannedProperties: newPlanned,\n      newProperties: newOutput,\n    };\n  }\n\n  downloadConstraints() {\n    let name = this.project.projectFileName + \"_FrontlineConstraints.xlsx\";\n    writeExcel(this.constraintTables, name);\n  }\n\n  exportToExcel() {\n    let name = this.project.projectFileName + \"_FrontlineExport.xlsx\";\n    writeExcel(this._makeConstraints(), name);\n  }\n\n  async applyConstraints(file = new File()) {\n    let { tasks, resources } = this.project;\n    let tables = await readExcel(file);\n\n    tables.tasks.forEach((x) => {\n      let y = tasks[x.id];\n      if (y) {\n        y.minDuration = x.minDuration;\n        y.maxDuration = x.maxDuration;\n      }\n    });\n\n    tables.resources.forEach((x) => {\n      let y = resources[x.id];\n      if (y) {\n        y.minUnitsPerDay = x.minUnitsPerDay;\n        y.maxUnitsPerDay = x.maxUnitsPerDay;\n      }\n    });\n\n    tables.taskResources.forEach((x) => {\n      let y = tasks[x.taskId]?.resources[x.resourceId];\n      if (y) {\n        y.minUnitsPerDay = x.minUnitsPerDay;\n        y.maxUnitsPerDay = x.maxUnitsPerDay;\n      }\n    });\n  }\n\n  optimize(name, getValuesToMinimize) {\n    let { project, results } = this;\n    let { settings, tasks } = project;\n\n    if (!results[name]) results[name] = [];\n\n    let durationRatios = {};\n    this.orderedTasks.forEach((task) => {\n      durationRatios[task.id] = new Value(1);\n    });\n\n    let scales = {};\n\n    let optimizer = new AdamOptimizer(durationRatios, settings.learningRate);\n\n    let t1 = Date.now();\n\n    for (let i = 0; i < settings.optimizationSteps; i++) {\n      this.simulate(durationRatios);\n\n      let values = [project.output.constraintLoss, ...getValuesToMinimize(project)];\n\n      let loss = new Value(0);\n      values.forEach((value, i) => {\n        if (value.data > 0) {\n          let amplitude = i === 0 ? 10 : 1;\n          if (scales[i] === undefined) scales[i] = amplitude / value.data;\n          loss = loss.add(value.mul(scales[i]));\n        }\n      });\n\n      results[name].push({\n        durationRatios: { ...durationRatios },\n        output: project.output,\n        loss: loss.data,\n      });\n      results[name].sort((a, b) => b.loss - a.loss);\n\n      loss.backward();\n      optimizer.step((id, newRatio) => {\n        let task = tasks[id];\n        newRatio = clip(newRatio, task.minDuration / task.plannedDuration, task.maxDuration / task.plannedDuration);\n        newRatio = clip(newRatio, settings.minDurationRatio, settings.maxDurationRatio);\n        return newRatio;\n      });\n    }\n\n    let t2 = Date.now();\n    console.log(\"optimization took\", t2 - t1, \"ms\");\n    // console.log(results);\n  }\n\n  optimizeDefaults() {\n    this.optimize(\"Balanced\", (project) => [project.output.projectDurationDays, project.output.laborDistribution.max]);\n    this.optimize(\"Fastest\", (project) => [project.output.projectDurationDays]);\n    this.optimize(\"Minimum Resources\", (project) => [project.output.laborDistribution.max]);\n    this.optimize(\"Levelled Resources\", (project) => [project.output.projectDurationDays, project.output.laborDistribution.max, project.output.laborDistribution.span]);\n  }\n}\n","export const p6Task = {\n  task_id: \"7274634\",\n  proj_id: \"1066\",\n  wbs_id: \"2447995\",\n  clndr_id: \"16216\",\n  phys_complete_pct: \"0\",\n  rev_fdbk_flag: \"N\",\n  est_wt: \"1\",\n  lock_plan_flag: \"N\",\n  auto_compute_act_flag: \"N\",\n  complete_pct_type: \"CP_Phys\",\n  task_type: \"TT_FinMile\",\n  duration_type: \"DT_FixedDrtn\",\n  status_code: \"TK_NotStart\",\n  task_code: \"K.RC.15.E10.005\",\n  task_name: \"Release for Construction Lower Rush River Inlet @ Lower Rush River Inlet S10\",\n  rsrc_id: \"\",\n  total_float_hr_cnt: \"640\",\n  free_float_hr_cnt: \"136\",\n  remain_drtn_hr_cnt: \"0\",\n  act_work_qty: \"0\",\n  remain_work_qty: \"0\",\n  target_work_qty: \"0\",\n  target_drtn_hr_cnt: \"0\",\n  target_equip_qty: \"0\",\n  act_equip_qty: \"0\",\n  remain_equip_qty: \"0\",\n  cstr_date: \"\",\n  act_start_date: \"\",\n  act_end_date: \"\",\n  late_start_date: \"2024-09-18 18:00\",\n  late_end_date: \"2024-09-18 18:00\",\n  expect_end_date: \"\",\n  early_start_date: \"2024-05-24 18:00\",\n  early_end_date: \"2024-05-24 18:00\",\n  restart_date: \"2024-05-24 18:00\",\n  reend_date: \"2024-05-24 18:00\",\n  target_start_date: \"2024-05-24 18:00\",\n  target_end_date: \"2024-05-24 18:00\",\n  rem_late_start_date: \"2024-09-18 18:00\",\n  rem_late_end_date: \"2024-09-18 18:00\",\n  cstr_type: \"\",\n  priority_type: \"PT_Normal\",\n  suspend_date: \"\",\n  resume_date: \"\",\n  float_path: \"\",\n  float_path_order: \"\",\n  guid: \"8Ahn9Ewgz0mdXd0n7Q+UEA\",\n  tmpl_guid: \"7uj+KW3K7EyRqcwm24llpw\",\n  cstr_date2: \"\",\n  cstr_type2: \"\",\n  driving_path_flag: \"N\",\n  act_this_per_work_qty: \"0\",\n  act_this_per_equip_qty: \"0\",\n  external_early_start_date: \"\",\n  external_late_end_date: \"\",\n  cbs_id: \"\",\n  pre_pess_start_date: \"\",\n  pre_pess_finish_date: \"\",\n  post_pess_start_date: \"\",\n  post_pess_finish_date: \"\",\n  create_date: \"2023-01-12 20:18\",\n  update_date: \"2023-01-12 20:18\",\n  create_user: \"IMUNOZ\",\n  update_user: \"IMUNOZ\",\n  location_id: \"\",\n  control_updates_flag: \"N\",\n  crt_path_num: \"\",\n};\n\nexport const p6Resource = {\n  rsrc_id: \"1318\",\n  parent_rsrc_id: \"\",\n  clndr_id: \"6645\",\n  role_id: \"\",\n  shift_id: \"\",\n  user_id: \"\",\n  pobs_id: \"\",\n  guid: \"Cjk2LqM8xkW5h20mdCXeaA\",\n  rsrc_seq_num: \"3\",\n  email_addr: \"\",\n  employee_code: \"\",\n  office_phone: \"\",\n  other_phone: \"\",\n  rsrc_name: \"Cost\",\n  rsrc_short_name: \"C-1\",\n  rsrc_title_name: \"\",\n  def_qty_per_hr: \"0\",\n  cost_qty_type: \"QT_Hour\",\n  ot_factor: \"0\",\n  active_flag: \"Y\",\n  auto_compute_act_flag: \"Y\",\n  def_cost_qty_link_flag: \"Y\",\n  ot_flag: \"N\",\n  curr_id: \"1\",\n  unit_id: \"101\",\n  rsrc_type: \"RT_Mat\",\n  location_id: \"\",\n  ts_approve_user_id: \"\",\n  timesheet_flag: \"N\",\n  rsrc_notes: \"?????<HTML><BODY></BODY></HTML>\",\n  load_tasks_flag: \"\",\n  level_flag: \"\",\n  last_checksum: \"\",\n};\n\nexport const p6Calendar = {\n  clndr_id: \"597\",\n  default_flag: \"N\",\n  clndr_name: \"Standard 5 Day Workweek\",\n  proj_id: \"\",\n  base_clndr_id: \"\",\n  last_chng_date: \"2000-04-26 14:11\",\n  clndr_type: \"CA_Base\",\n  day_hr_cnt: \"8\",\n  week_hr_cnt: \"40\",\n  month_hr_cnt: \"172\",\n  year_hr_cnt: \"2000\",\n  rsrc_private: \"N\",\n  clndr_data:\n    \"(0||CalendarData()(    (0||DaysOfWeek()(      (0||1()())      (0||2()(        (0||0(s|08:00|f|12:00)())        (0||1(s|13:00|f|17:00)())))      (0||3()(        (0||0(s|08:00|f|12:00)())        (0||1(s|13:00|f|17:00)())))      (0||4()(        (0||0(s|08:00|f|12:00)())        (0||1(s|13:00|f|17:00)())))      (0||5()(        (0||0(s|08:00|f|12:00)())        (0||1(s|13:00|f|17:00)())))      (0||6()(        (0||0(s|08:00|f|12:00)())        (0||1(s|13:00|f|17:00)())))      (0||7()())))    (0||Exceptions()())))\",\n};\n\nexport const p6TaskPredecessor = {\n  task_pred_id: \"12321174\",\n  task_id: \"7283774\",\n  pred_task_id: \"7283773\",\n  proj_id: \"1066\",\n  pred_proj_id: \"1066\",\n  pred_type: \"PR_SS\",\n  lag_hr_cnt: \"0\",\n  comments: \"\",\n  float_path: \"\",\n  aref: \"2025-06-11 08:00\",\n  arls: \"2025-06-25 08:00\",\n};\n\nexport const p6TaskResource = {\n  taskrsrc_id: \"8713042\",\n  task_id: \"7279501\",\n  proj_id: \"1066\",\n  cost_qty_link_flag: \"Y\",\n  role_id: \"\",\n  acct_id: \"\",\n  rsrc_id: \"10078\",\n  pobs_id: \"\",\n  skill_level: \"\",\n  remain_qty: \"50\",\n  target_qty: \"50\",\n  remain_qty_per_hr: \"1\",\n  target_lag_drtn_hr_cnt: \"0\",\n  target_qty_per_hr: \"1\",\n  act_ot_qty: \"0\",\n  act_reg_qty: \"0\",\n  relag_drtn_hr_cnt: \"0\",\n  ot_factor: \"\",\n  cost_per_qty: \"0.0000\",\n  target_cost: \"0.0000\",\n  act_reg_cost: \"0.0000\",\n  act_ot_cost: \"0.0000\",\n  remain_cost: \"0.0000\",\n  act_start_date: \"\",\n  act_end_date: \"\",\n  restart_date: \"2023-07-12 08:00\",\n  reend_date: \"2023-07-18 18:00\",\n  target_start_date: \"2023-07-12 08:00\",\n  target_end_date: \"2023-07-18 18:00\",\n  rem_late_start_date: \"2024-11-05 08:00\",\n  rem_late_end_date: \"2024-11-12 18:00\",\n  rollup_dates_flag: \"N\",\n  target_crv: \"\",\n  remain_crv: \"\",\n  actual_crv: \"\",\n  ts_pend_act_end_flag: \"N\",\n  guid: \"ddVEJHT/c0SG/89BsElFgQ\",\n  rate_type: \"COST_PER_QTY\",\n  act_this_per_cost: \"0.0000\",\n  act_this_per_qty: \"0\",\n  curv_id: \"\",\n  rsrc_type: \"RT_Labor\",\n  cost_per_qty_source_type: \"ST_Rsrc\",\n  create_user: \"IMUNOZ\",\n  create_date: \"2023-01-12 20:18\",\n  cbs_id: \"\",\n  has_rsrchours: \"\",\n  taskrsrc_sum_id: \"\",\n};\n\nexport const mspTask = {\n  UID: 0,\n  Name: \"PDD- Master programme Asper  EOT-Productivity Delay -011021 - REV\",\n  Active: 1,\n  ID: 0,\n  Type: 1,\n  Manual: 0,\n  IsNull: 0,\n  CreateDate: \"2009-10-12T11:25:00\",\n  WBS: 0,\n  OutlineNumber: 0,\n  OutlineLevel: 0,\n  Priority: 500,\n  ManualStart: \"2019-08-01T08:00:00\",\n  ManualFinish: \"2025-02-21T17:00:00\",\n  ManualDuration: \"PT14864H0M0S\",\n  Start: \"2019-08-01T08:00:00\",\n  Finish: \"2025-02-21T17:00:00\",\n  Duration: \"PT14864H0M0S\",\n  Work: \"PT3680H0M0S\",\n  Stop: \"2019-08-01T08:00:00\",\n  Resume: \"2019-08-01T08:00:00\",\n  EffortDriven: 1,\n  Recurring: 0,\n  OverAllocated: 0,\n  Estimated: 0,\n  Milestone: 0,\n  Summary: 1,\n  Critical: 1,\n  IsSubproject: 0,\n  ExternalTask: 0,\n  EarlyFinish: \"2025-02-21T17:00:00\",\n  EarlyStart: \"2019-08-01T08:00:00\",\n  LateStart: \"2019-08-01T08:00:00\",\n  LateFinish: \"2025-02-21T17:00:00\",\n  StartVariance: 0,\n  FinishVariance: 0,\n  WorkVariance: 220800000,\n  FreeSlack: 0,\n  TotalSlack: 0,\n  FixedCost: 0,\n  FixedCostAccrual: 3,\n  PercentComplete: 4.42973767279852,\n  PercentWorkComplete: 0,\n  Cost: 0,\n  OvertimeCost: 0,\n  OvertimeWork: \"PT0H0M0S\",\n  ActualStart: \"2019-08-01T08:00:00\",\n  ActualDuration: \"PT658H26M0S\",\n  ActualCost: 0,\n  ActualOvertimeCost: 0,\n  ActualWork: \"PT0H0M0S\",\n  ActualOvertimeWork: \"PT0H0M0S\",\n  RegularWork: \"PT0H0M0S\",\n  RemainingDuration: \"PT14205H33M0S\",\n  RemainingWork: \"PT3680H0M0S\",\n  RemainingOvertimeCost: 0,\n  RemainingOvertimeWork: \"PT0H0M0S\",\n  ACWP: 0,\n  CV: 0,\n  ConstraintType: 0,\n  LevelAssignments: 0,\n  LevelingCanSplit: 0,\n  LevelingDelay: 0,\n  CalendarUID: -1,\n  Hyperlink: \"\",\n  HyperlinkAddress: \"\",\n  HyperlinkSubAddress: \"\",\n  IgnoreResourceCalendar: 0,\n  HideBar: 0,\n  Rollup: 0,\n  BCWS: 0,\n  BCWP: 0,\n  PhysicalPercentComplete: 0,\n  EarnedValueMethod: 0,\n  Baseline: {\n    Duration: \"PT0H0M0S\",\n  },\n  IsPublished: 1,\n};\n\nexport const mspResource = {\n  CalendarUID: 4,\n  UID: 1,\n  ID: 1,\n  Name: \"CC1 Steel\",\n  Type: 1,\n  IsNull: 0,\n  Initials: \"C\",\n  WorkGroup: 0,\n  MaxUnits: 1,\n  PeakUnits: 0,\n  OverAllocated: 0,\n  Start: \"9999-12-31T23:59:59\",\n  CanLevel: 1,\n  AccrueAt: 3,\n  Work: \"PT0H0M0S\",\n  RegularWork: \"PT0H0M0S\",\n  OvertimeWork: \"PT0H0M0S\",\n  ActualWork: \"PT0H0M0S\",\n  RemainingWork: \"PT0H0M0S\",\n  ActualOvertimeWork: \"PT0H0M0S\",\n  RemainingOvertimeWork: \"PT0H0M0S\",\n  PercentWorkComplete: 0,\n  StandardRate: 0,\n  Cost: 0,\n  OvertimeRate: 0,\n  OvertimeRateFormat: 2,\n  OvertimeCost: 0,\n  CostPerUse: 0,\n  ActualCost: 0,\n  ActualOvertimeCost: 0,\n  RemainingCost: 0,\n  RemainingOvertimeCost: 0,\n  WorkVariance: 0,\n  CostVariance: 0,\n  SV: 0,\n  CV: 0,\n  ACWP: 0,\n  BCWS: 0,\n  BCWP: 0,\n  IsInactive: 0,\n  IsGeneric: 0,\n  BookingType: 0,\n  CreationDate: \"8/28/2019 5:16:00 PM\",\n  IsEnterprise: 0,\n};\n\nexport const mspCalendar = {\n  UID: 7,\n  Name: \"covid 19\",\n  IsBaseCalendar: 1,\n  BaseCalendarUID: -1,\n  WeekDays: {\n    WeekDay: [\n      {\n        DayType: 1,\n        DayWorking: 0,\n      },\n      {\n        DayType: 2,\n        DayWorking: 1,\n        WorkingTimes: {\n          WorkingTime: [\n            {\n              FromTime: \"08:00:00\",\n              ToTime: \"12:00:00\",\n            },\n            {\n              FromTime: \"13:00:00\",\n              ToTime: \"17:00:00\",\n            },\n          ],\n        },\n      },\n      {\n        DayType: 3,\n        DayWorking: 1,\n        WorkingTimes: {\n          WorkingTime: [\n            {\n              FromTime: \"08:00:00\",\n              ToTime: \"12:00:00\",\n            },\n            {\n              FromTime: \"13:00:00\",\n              ToTime: \"17:00:00\",\n            },\n          ],\n        },\n      },\n      {\n        DayType: 4,\n        DayWorking: 1,\n        WorkingTimes: {\n          WorkingTime: [\n            {\n              FromTime: \"08:00:00\",\n              ToTime: \"12:00:00\",\n            },\n            {\n              FromTime: \"13:00:00\",\n              ToTime: \"17:00:00\",\n            },\n          ],\n        },\n      },\n      {\n        DayType: 5,\n        DayWorking: 1,\n        WorkingTimes: {\n          WorkingTime: [\n            {\n              FromTime: \"08:00:00\",\n              ToTime: \"12:00:00\",\n            },\n            {\n              FromTime: \"13:00:00\",\n              ToTime: \"17:00:00\",\n            },\n          ],\n        },\n      },\n      {\n        DayType: 6,\n        DayWorking: 1,\n        WorkingTimes: {\n          WorkingTime: [\n            {\n              FromTime: \"08:00:00\",\n              ToTime: \"12:00:00\",\n            },\n            {\n              FromTime: \"13:00:00\",\n              ToTime: \"17:00:00\",\n            },\n          ],\n        },\n      },\n      {\n        DayType: 7,\n        DayWorking: 0,\n      },\n    ],\n  },\n};\n\nexport const mspTaskPredecessor = {\n  PredecessorUID: 16546,\n  Type: 1,\n  CrossProject: 0,\n  LinkLag: 0,\n  LagFormat: 7,\n};\n\nexport const mspTaskResource = {\n  UID: 2870,\n  ResourceUID: 2,\n  TaskUID: 16323,\n  ActualCost: 0,\n  ActualWork: \"PT0H0M0S\",\n  Cost: 0,\n  Delay: 0,\n  Finish: \"2024-05-22T17:00:00\",\n  LinkedFields: 0,\n  PeekUnits: 1,\n  Start: \"2023-08-03T08:00:00\",\n  Stop: \"2024-05-22T17:00:00\",\n  Units: 1,\n  Work: \"PT1920H0M0S\",\n  WorkContour: 0,\n  PercentWorkComplete: \"0%\",\n  TimephasedData: [],\n};\n","import { addToFilename, exportFile, parser, toObject } from './utils'\nimport { Project, Task, Resource, Calendar, TaskPredecessor, TaskResource } from './models'\nimport * as samples from './samples'\n\n/*\nhttps://docs.oracle.com/cd/F25600_01/English/Mapping_and_Schema/ms_project_import_export_data_map_xml/helpmain.htm?toc.htm?97947.htm\nhttps://docs.oracle.com/cd/F51303_01/English/Mapping_and_Schema/xer_import_export_data_map_project/\nhttps://learn.microsoft.com/en-us/office-project/xml-data-interchange/project-elements-and-xml-structure?view=project-client-2016\n*/\n\nexport class P6XerReader {\n  async read(file = new File()) {\n    let reader = new FileReader()\n    return new Promise((resolve) => {\n      reader.onload = (e) => {\n        this.rawText = e.target.result.trim()\n        this.rawData = this.rawTextToRawData(this.rawText)\n        this.project = this.rawDataToProject(this.rawData)\n        this.project.projectFileName = file.name\n        resolve(this.project)\n      }\n      reader.readAsText(file)\n    })\n  }\n\n  rawTextToRawData(text = '') {\n    let header,\n      tables = {},\n      table = [],\n      keys\n    text.split('\\n').forEach((line) => {\n      let columns = line.split('\\t').map((x) => x.trim())\n      let type = columns[0],\n        items = columns.slice(1)\n      switch (type) {\n        case 'ERMHDR':\n          header = items\n          break\n        case '%T':\n          let name = items[0]\n          table = tables[name] = []\n          break\n        case '%F':\n          keys = items\n          break\n        case '%R':\n          let values = items\n          table.push(toObject(keys, values))\n          break\n        case '%E':\n          break\n        default:\n          break\n      }\n    })\n    let rawData = { header, tables }\n    return rawData\n  }\n\n  rawDataToProject(rawData) {\n    let { tables } = rawData\n    let project = new Project()\n\n    tables.TASK.forEach((x = samples.p6Task) => {\n      let y = new Task()\n      y.id = x.task_id\n      y.name = x.task_name\n      y.code = x.task_code\n      y.type = x.task_type.slice(3)\n\n      y.calendarId = x.clndr_id\n      y.predecessors = {}\n      y.resources = {}\n\n      y.plannedStart = parser.parseDate(x.target_start_date)\n      y.plannedFinish = parser.parseDate(x.target_end_date)\n      y.plannedDuration = parseInt(x.target_drtn_hr_cnt)\n\n      y.actualStart = parser.parseDate(x.act_start_date)\n      y.actualFinish = parser.parseDate(x.act_end_date)\n\n      project.tasks[y.id] = y\n    })\n\n    Object.values(tables.RSRC).forEach((x = samples.p6Resource) => {\n      let y = new Resource()\n      y.id = x.rsrc_id\n      y.name = x.rsrc_name\n      y.code = x.rsrc_short_name\n      y.type = { Labor: 'Labor', Equip: 'Equipment', Mat: 'Material' }[x.rsrc_type.slice(3)]\n\n      project.resources[y.id] = y\n    })\n\n    tables.CALENDAR.forEach((x = samples.p6Calendar) => {\n      let y = new Calendar()\n      y.id = x.clndr_id\n      y.name = x.clndr_name\n      y.weekHourCount = parseInt(x.week_hr_cnt)\n\n      project.calendars[y.id] = y\n    })\n\n    tables.TASKPRED.forEach((x = samples.p6TaskPredecessor) => {\n      let y = new TaskPredecessor()\n      y.id = x.task_pred_id\n      y.taskId = x.task_id\n      y.predecessorId = x.pred_task_id\n\n      y.type = x.pred_type.slice(3)\n      y.lagHour = parseInt(x.lag_hr_cnt)\n\n      let task = project.tasks[y.taskId]\n      task.predecessors[y.predecessorId] = y\n    })\n\n    Object.values(tables.TASKRSRC).forEach((x = samples.p6TaskResource) => {\n      let y = new TaskResource()\n      y.id = x.taskrsrc_id\n      y.taskId = x.task_id\n      y.resourceId = x.rsrc_id\n\n      y.plannedUnits = parseFloat(x.target_qty)\n      let task = project.tasks[y.taskId]\n      y.plannedUnitsPerHour = task.plannedDuration > 0 ? y.plannedUnits / task.plannedDuration : 0\n\n      task.resources[y.resourceId] = y\n    })\n\n    return project\n  }\n\n  projectToRawData(project) {\n    let rawData = JSON.parse(JSON.stringify(this.rawData))\n    let { tables } = rawData\n\n    tables.TASK.forEach((x = samples.p6Task) => {\n      let y = project.tasks[x.task_id]\n      if (y) {\n        x.target_start_date = parser.strDate(y.newStart?.data)\n        x.target_end_date = parser.strDate(y.newFinish?.data)\n        x.target_drtn_hr_cnt = y.newDuration?.data\n\n        if (x.act_start_date) x.act_start_date = parser.strDate(y.newStart?.data)\n        if (x.act_end_date) x.act_end_date = parser.strDate(y.newFinish?.data)\n      }\n    })\n\n    Object.values(tables.TASKRSRC).forEach((x = samples.p6TaskResource) => {\n      let y = project.tasks[x.task_id]?.resources[x.rsrc_id]\n      if (y) {\n        x.target_qty_per_hr = y.newUnitsPerHour?.data\n      }\n    })\n\n    return rawData\n  }\n\n  rawDataToRawText(rawData) {\n    let { header, tables } = rawData\n    let lines = []\n    lines.push(['ERMHDR', ...header].join('\\t'))\n    Object.entries(tables).forEach(([name, table]) => {\n      lines.push(['%T', name].join('\\t'))\n      lines.push(['%F', ...Object.keys(table[0])].join('\\t'))\n      table.forEach((row) => {\n        lines.push(['%R', ...Object.values(row)].join('\\t'))\n      })\n    })\n    lines.push('%E')\n    return lines.join('\\n')\n  }\n\n  exportToOriginal(project) {\n    let rawData = this.projectToRawData(project)\n    let rawText = this.rawDataToRawText(rawData)\n    let filename = addToFilename(project.projectFileName, '_FrontlineExport')\n    exportFile(filename, rawText)\n  }\n}\n","import { XMLBuilder, XMLParser } from 'fast-xml-parser'\nimport { Calendar, Project, Resource, Task, TaskPredecessor, TaskResource } from './models'\nimport { P6XerReader } from './P6XerReader'\nimport * as samples from './samples'\nimport { asArray, parser } from './utils'\n\nconst MS_PER_HOUR = 60 * 60 * 1000\n\nexport class MspXmlReader extends P6XerReader {\n  rawTextToRawData(text = '') {\n    let parser = new XMLParser({\n      ignoreAttributes: false,\n      ignoreDeclaration: false,\n      ignorePiTags: false,\n    })\n    let rawData = parser.parse(text)\n    return rawData\n  }\n\n  rawDataToProject(rawData) {\n    if (!rawData) return;\n    let project = new Project()\n\n    let p = rawData.Project\n\n    const totalTasks = p?.Tasks?.Task\n\n    totalTasks.forEach((x = samples.mspTask) => {\n      let y = new Task()\n      y.id = x.UID\n      y.name = x.Name\n      y.code = x.WBS\n      y.type = x.Summary ? 'Summary' : x.Milestone ? 'Milestone' : 'Task'\n\n      y.calendarId = x.CalendarUID\n      y.predecessors = {}\n      y.resources = {}\n\n      y.plannedStart = parser.parseDate(x.Start)\n      y.plannedFinish = parser.parseDate(x.Finish)\n      y.plannedDuration = parser.parseDuration(x.Duration)\n\n      y.actualStart = parser.parseDate(x.ActualStart)\n      y.actualFinish = parser.parseDate(x.ActualFinish)\n\n      project.tasks[y.id] = y\n\n      asArray(x.PredecessorLink).forEach((a = samples.mspTaskPredecessor) => {\n        let b = new TaskPredecessor()\n        b.id = null\n        b.taskId = y.id\n        b.predecessorId = a.PredecessorUID\n\n        b.type = ['FF', 'FS', 'SF', 'SS'][a.Type]\n        b.lagHour = a.LinkLag / 600\n\n        y.predecessors[b.predecessorId] = b\n      })\n    })\n\n    asArray(p?.Resources?.Resource).forEach((x = samples.mspResource) => {\n      let y = new Resource()\n      y.id = x.UID\n      y.name = x.Name\n      y.code = x.Initials\n      y.type = ['Material', 'Labor', 'Cost'][x.Type]\n\n      project.resources[y.id] = y\n    })\n\n    let defaultCalendar = new Calendar()\n    defaultCalendar.id = '-1'\n    defaultCalendar.name = 'standard 5 days 8 hours'\n    defaultCalendar.weekHourCount = 40\n    project.calendars[defaultCalendar.id] = defaultCalendar\n\n    const totalCalendars = p?.Calendars?.Calendar\n\n    totalCalendars && totalCalendars.forEach((x = samples.mspCalendar) => {\n      let y = new Calendar()\n      y.id = x.UID\n      y.name = x.Name\n      y.weekHourCount = 0\n\n      if (x?.WeekDays?.WeekDay !== undefined) {\n        Object.values(x?.WeekDays?.WeekDay).forEach((day) => {\n          let dayName = [null, 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'][day.DayType]\n          if (dayName) {\n            asArray(day.WorkingTimes?.WorkingTime).forEach((time) => {\n              let date = '1971-06-28T'\n              let ms = Date.parse(date + time.ToTime) - Date.parse(date + time.FromTime)\n              let hour = ms / MS_PER_HOUR\n              if (hour < 0) hour += 24\n              y.weekHourCount += hour\n            })\n          }\n        })\n      }\n\n      project.calendars[y.id] = y\n    })\n\n    const totalAssignments = p?.Assignments?.Assignment\n\n    totalAssignments && totalAssignments.forEach((x = samples.mspTaskResource) => {\n      let y = new TaskResource()\n      y.id = x.UID\n      y.taskId = x.TaskUID\n      y.resourceId = x.ResourceUID\n\n      y.plannedUnits = parser.parseDuration(x.Work)\n      let task = project.tasks[y.taskId]\n\n      y.plannedUnitsPerHour = task.plannedDuration > 0 ? y.plannedUnits / task.plannedDuration : 0\n\n      task.resources[y.resourceId] = y\n    })\n\n    return project\n  }\n\n  projectToRawData(project) {\n    let rawData = JSON.parse(JSON.stringify(this.rawData))\n    let p = rawData.Project\n\n    p.Tasks.Task.forEach((x = samples.mspTask) => {\n      let y = project.tasks[x.UID]\n      if (y) {\n        x.Start = parser.strDate(y.newStart?.data)\n        x.Finish = parser.strDate(y.newFinish?.data)\n        x.Duration = parser.strDuration(y.newDuration?.data)\n\n        if (x.ActualStart) x.ActualStart = parser.strDate(y.newStart?.data)\n        if (x.ActualFinish) x.ActualFinish = parser.strDate(y.newFinish?.data)\n      }\n    })\n\n    const totalAssignments = p.Assignments?.Assignment\n\n    totalAssignments.forEach((x = samples.mspTaskResource) => {\n      let y = project.tasks[x.TaskUID]?.resources[x.ResourceUID]\n      if (y) {\n        x.Units = x.PeekUnits = y.newUnitsPerHour?.data\n      }\n    })\n\n    return rawData\n  }\n\n  rawDataToRawText(rawData) {\n    let builder = new XMLBuilder({\n      ignoreAttributes: false,\n    })\n    return builder.build(rawData)\n  }\n}\n","import styled from 'styled-components'\nimport { Modal, Box } from '@mui/material'\n\nexport const LoadingModal = styled(Modal)`\n  &.MuiModal-root {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .MuiBox-root {\n    background: #f2f2f2;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n    .loader {\n      width: 64px;\n      height: 64px;\n      background: linear-gradient(180deg, #002F2B 0%, rgba(0, 0, 0, 0.1) 25%);\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n      animation: spin 1s linear infinite;\n      margin: 0 0 15px;\n    }\n    .loader::after {\n      content: \"\";\n      width: calc(100% - 4px);\n      height: calc(100% - 4px);\n      border-radius: 50%;\n      background: #f2f2f2;\n    }\n    @keyframes spin {\n      100% {\n        transform: rotate(360deg);\n      }\n    }\n    .title {\n      font-size: 20px;\n      font-family: \"Nunito\", sans-serif;\n      font-weight: 500;\n      margin: 0 0 15px;\n    }\n    span {\n      color: #696969;\n    }\n    &:focus-visible {\n      outline: none;\n    }\n}\n`\n\nexport const ModalContent = styled(Box)`\n  position: 'absolute';\n  top: '50%';\n  left: '50%';\n  transform: 'translate(-50%, -50%)';\n   box-shadow: 1px 1px 5px rgb(207 234 229 / 25%);\n  width: 400px;\n  padding: 40px 20px;\n  border-radius: 64px;\n`","import React from 'react'\n\nimport { LoadingModal, ModalContent } from './styled'\n\nconst Modal = ({ isLoading, spinner, onClose, title, content }) => {\n  return (\n    <LoadingModal\n      open={isLoading}\n      onClose={onClose}\n      aria-labelledby='modal-modal-title'\n      aria-describedby='modal-modal-description'\n    >\n      <ModalContent>\n        {spinner ? <div className='loader' /> : ''}\n\n        <div className='title' id='modal-modal-title'>\n          {title}\n        </div>\n        <span>{content}</span>\n      </ModalContent>\n    </LoadingModal>\n  )\n}\n\nexport default Modal","import styled from 'styled-components'\nimport Button from '@mui/material/Button'\n\nexport const AppContainer = styled.div`\n  background: #F0F1F3;\n  margin: 0;\n  /* padding: 0 0 50px; */\n  min-height: 100vh;\n  min-width: 1200px;\n  .row {\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n    box-sizing: border-box;\n    /* margin-top: 10px; */\n  }\n  .MuiTableCell-body, .MuiTableCell-head {\n    font-family: \"Inter\", Arial, Helvetica, sans-serif;\n  }\n`\n\nexport const PrimaryButton = styled(Button)`\n  padding: 10px 20px !important;\n  box-shadow: none !important;\n  background: #008277 !important;\n  width: auto !important;   \n  font-weight: bold !important;\n  text-transform: capitalize !important;\n  font-size: 1rem !important;\n  font-family: \"Inter\", sans-serif !important;\n  &:hover {\n      background: #0b534d !important;\n    }\n  &.Mui-disabled {\n    color: #dbdbdb;    \n    background: #f0f0f0 !important;\n  }\n`\n\nexport const SecondaryButton = styled(PrimaryButton)`\n  padding: 10px 20px !important;\n  box-shadow: none !important;\n  color: #008277 !important;\n  border: 1px solid #008277 !important;\n  background: white !important;\n  width: auto !important;\n  text-transform: capitalize !important;\n  font-weight: bold !important;\n  &:hover {\n  background: white !important;\n      color: #0b534d !important;\n    }\n  &.Mui-disabled {\n    color: #dbdbdb;    \n    border: 1px solid #f0f0f0 !important;\n  }\n`","import { Input } from '@mui/material'\nimport styled from 'styled-components'\n\nexport const Content = styled.div`\n    background: #ffffff;\n    padding: 1px 20px 20px;\n`\n\nexport const OptimizationContainer = styled.div`\n  width: 100%;\n  .upload-file {\n    /* width: 100%; */\n    margin: 20px 0;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    color: #008277;\n    font-weight: 700;\n    button, input {\n      /* width: 100% !important; */\n      justify-content: flex-start;\n      font-family: \"Inter\", sans-serif;\n    }\n    label {\n      font-weight: 700 !important;\n      svg {\n        margin-right: 8px;\n      }\n    }\n    .upload-button {\n      background: #008277;\n      color: #FFFFFF;\n      border: 1px transparent;\n      padding: 10px 20px;\n      text-align: center;\n      margin-right: 20px;\n      border-radius: 6px;\n      cursor: pointer;\n      &:hover {\n        background: #0b534d;\n      }\n      &.second-upload {\n        color: #008277;\n        background: transparent;\n        border: 1px solid;\n        &:hover {\n          color: #0b534d;\n        }\n      }\n    }\n  }\n  .optimization-input {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    .section {\n      width: 100%;\n      display: flex;\n      margin: 10px 0;\n      min-height: 50px;\n      display: flex-start !important;\n      justify-content: space-between;\n      position: relative;\n      &.disabled {\n        opacity: 0.3;\n      }\n      &:last-of-type {\n        &:after {\n          height: 0;\n        }\n      }\n      &:after {\n        content: '';\n        position: absolute;\n        background: #eeeeee;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        height: 1px;\n      }\n      .intro {\n        width: 40%;\n        h2 {\n          margin: 0;\n          font-size: 18px;\n          font-weight: 500;\n        }\n        h3 {\n          margin: 0;\n          color: #888888;\n          font-weight: 300;\n          font-size: 16px;\n          line-height: 16px;\n        }\n      }\n      .input-wrapper {\n        width: 60%;\n        .inputs {\n          margin: 0 0 20px;\n          display: flex;\n          justify-content: space-between;\n        }\n      }\n      label {\n         margin-bottom: 0px;\n         font-weight: 400;\n         display: flex;\n         align-items: center;\n        svg {\n          margin-left: 5px;\n          width: 18px;\n        }\n      }\n      .MuiSlider-colorPrimary {\n        color: #00A597;\n        margin: 15px 0;\n      }\n      .MuiInput-root {\n        margin: 6px 0;\n        border: 1px solid #f2f2f2;\n        &.Mui-focused {\n          border: 1px solid #00beae;\n          background: #ffffff;\n        }\n        &:after {\n          border: 0;\n        }\n      }\n      .MuiFormControl-root {\n        width: 45%;\n        margin-right: 50px;\n      }\n    }\n  }\n`\n\nexport const InputField = styled(Input)`\n  background: #f2f2f2;\n  border-radius: 6px;\n  padding: 4px 8px;\n  &:before {\n    border: 0 !important;\n  }\n`","import React, { useState, useEffect } from 'react'\n\nimport { Optimizer } from 'src/engine/Optimizer'\nimport { MspXmlReader } from 'src/engine/MspXmlReader'\nimport { P6XerReader } from 'src/engine/P6XerReader'\n\nimport { Slider, FormControl, FormControlLabel, Tooltip, Radio } from '@mui/material'\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined'\nimport UploadFileIcon from '@mui/icons-material/UploadFile'\n\nimport Modal from 'src/feat/Modal'\n\nimport { PrimaryButton } from 'src/styled'\nimport { Content, OptimizationContainer, InputField } from './styled'\n\nconst ratioMarks = [\n  {\n    value: 0,\n    label: '0%',\n  },\n  {\n    value: 100,\n    label: '100%',\n  },\n  {\n    value: 200,\n    label: '200%',\n  },\n]\n\nconst stepMarks = [\n  {\n    value: 0,\n    label: '0',\n  },\n  {\n    value: 50,\n    label: '50',\n  },\n  {\n    value: 100,\n    label: '100',\n  },\n]\n\nexport default function InputData({\n  uploadedFile,\n  setUploadedFile,\n  fileName,\n  setFileName,\n  constraintsFileName,\n  setConstraintsFileName,\n  updateProject,\n  optimizer,\n  setOptimizer,\n  goNext,\n}) {\n  const [isLoading, setIsLoading] = useState(false)\n  const [isFileUploaded, setIsFileUploaded] = useState(false)\n  const [project, setProject] = useState(null)\n\n  const [considerDates, setConsiderDates] = useState(optimizer?.project?.settings ? optimizer.project.settings.considerActualDates : true)\n  const [ratio, setRatio] = useState(optimizer?.project?.settings ? [optimizer.project.settings.minDurationRatio, optimizer.project.settings.maxDurationRatio] : [50, 150])\n  const [steps, setSteps] = useState(optimizer?.project?.settings ? optimizer.project.settings.optimizationSteps : 20)\n  const [learningRate, setLearningRate] = useState(optimizer?.project?.settings ? optimizer.project.settings.learningRate : 0.025)\n\n  useEffect(() => {\n    if (optimizer?.project?.settings) {\n      optimizer.project.settings.minDurationRatio = ratio[0] / 100\n      optimizer.project.settings.maxDurationRatio = ratio[1] / 100\n    }\n  }, [ratio])\n\n  useEffect(() => {\n    if (optimizer?.project?.settings) {\n      optimizer.project.settings.optimizationSteps = steps\n    }\n  }, [steps])\n\n  useEffect(() => {\n    if (optimizer?.project?.settings) {\n      optimizer.project.settings.considerActualDates = considerDates\n    }\n    updateProject(project)\n  }, [considerDates])\n\n  useEffect(() => {\n    if (optimizer?.project?.settings) {\n      optimizer.project.settings.learningRate = learningRate\n    }\n  }, [learningRate])\n\n  const handleConsiderDatesChange = (value) => {\n    if (value === 'true') {\n      setConsiderDates(true)\n    } else setConsiderDates(false)\n  }\n\n  const readProject = async (file) => {\n    // setIsLoading(true)\n    setUploadedFile(file)\n    setFileName(file.name)\n\n    let reader = file?.name.endsWith('xer') ? new P6XerReader() : new MspXmlReader()\n    let project = await reader.read(file)\n    setProject(project)\n    setOptimizer(new Optimizer(project))\n    setIsFileUploaded(true)\n  }\n\n  function readConstraints(file) {\n    setConstraintsFileName(file.name)\n    optimizer.applyConstraints(file)\n  }\n\n  useEffect(() => {\n    if (uploadedFile) {\n      readProject(uploadedFile)\n    }\n    updateProject(project)\n  }, [uploadedFile])\n\n  const useDemoProject = () => {\n    fetch('/demo_project.xml')\n      .then((r) => r.blob())\n      .then((r) => {\n        const file = new File([r], 'demo_project.xml')\n        setUploadedFile(file)\n        setIsFileUploaded(true)\n      })\n  }\n\n  const buttonOnClick = async () => {\n    setIsLoading(true)\n\n    setTimeout(function () {\n      goNext()\n      optimizer.optimizeDefaults()\n      setIsLoading(false)\n    }, 500)\n  }\n\n\n  return (\n    <Content>\n      <h2>Upload schedule and enter optimization settings</h2>\n      <OptimizationContainer>\n        <div className=\"optimization-input\">\n          <div className=\"section\">\n            <div className=\"intro\">\n              <h2>Schedule</h2>\n              <h3>Upload your schedule (.xer or .xml)</h3>\n            </div>\n            <div className=\"input-wrapper\">\n              <div className=\"inputs\" style={{ alignItems: 'center' }}>\n                <div className=\"upload-file\">\n                  <input\n                    hidden\n                    type=\"file\"\n                    id=\"project-file\"\n                    name=\"project\"\n                    onChange={(e) => {\n                      setUploadedFile(e.target.files[0])\n                    }}\n                    accept=\".xer,.xml\"\n                  />\n                  <label className=\"upload-button\" htmlFor=\"project-file\">\n                    <UploadFileIcon /> Upload file\n                  </label>\n                  <span>{fileName}</span>\n                </div>\n                <span>\n                  or{' '}\n                  <span\n                    style={{ textDecoration: 'underline', cursor: 'pointer' }}\n                    onClick={useDemoProject}\n                  >\n                    use a demo project\n                  </span>\n                </span>\n              </div>\n            </div>\n          </div>\n          <div className={`section ${isFileUploaded ? '' : 'disabled'}`}>\n            <div className=\"intro\">\n              <h2>Constraints</h2>\n              <h3>\n                Upload your constraints (\n                <span\n                  style={{ textDecoration: 'underline', cursor: 'pointer' }}\n                  onClick={() => {\n                    optimizer.downloadConstraints()\n                  }}\n                >\n                  download template\n                </span>\n                )\n              </h3>\n            </div>\n            <div className=\"input-wrapper\">\n              <div className=\"inputs\">\n                <div className=\"upload-file\">\n                  <input\n                    hidden\n                    type=\"file\"\n                    id=\"constraints-file\"\n                    name=\"constraints\"\n                    onChange={(e) => {\n                      readConstraints(e.target.files[0])\n                    }}\n                    accept=\".xls,.xlsx\"\n                  />\n                  <label\n                    className=\"upload-button  second-upload\"\n                    htmlFor=\"constraints-file\"\n                  >\n                    <UploadFileIcon /> Upload file\n                  </label>\n                  <span>{constraintsFileName}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className={`section ${isFileUploaded ? '' : 'disabled'}`}>\n            <div className=\"intro\">\n              <h2>Optimization Settings</h2>\n              <h3>Customize your optimization results</h3>\n            </div>\n            <div className=\"input-wrapper\">\n              <div className=\"inputs\">\n                <FormControl>\n                  <label>Consider Actual Date\n                    <Tooltip\n                      title={\n                        <div style={{ fontSize: '13px', fontFamily: 'Inter' }}>\n                          Selecting yes to consider Actual Dates will cause the optimizer to strictly following the project's dates which may result in lesser optimization results\n                        </div>\n                      }\n                    >\n                      <InfoOutlinedIcon />\n                    </Tooltip></label>\n                  <div className=\"row\" style={{ justifyContent: 'flex-start' }}>\n                    <FormControlLabel value={true} checked={considerDates === true} control={<Radio />} label=\"Yes\" onChange={(e) =>\n                      handleConsiderDatesChange(e.target.value)} />\n                    <FormControlLabel value={false} checked={considerDates === false} control={<Radio />} label=\"No\" onChange={(e) => handleConsiderDatesChange(e.target.value)} />\n                  </div>\n                </FormControl>\n                <FormControl>\n                  <label>\n                    Learning Rate\n                    <Tooltip\n                      title={\n                        <div style={{ fontSize: '13px', fontFamily: 'Inter' }}>\n                          The learning rate is a tuning parameter in an\n                          optimization algorithm that determines the step size\n                          at each iteration while moving toward a minimum of a\n                          loss function.\n                        </div>\n                      }\n                    >\n                      <InfoOutlinedIcon />\n                    </Tooltip>\n                  </label>\n                  <InputField\n                    id=\"learningRate\"\n                    defaultValue={learningRate}\n                    onChange={(e) => setLearningRate(e.value.target)}\n                    placeholder=\"eg: 0.025\"\n                    variant=\"outlined\"\n                    disabled={!isFileUploaded}\n                  />\n                </FormControl>\n              </div>\n              <div className=\"inputs\">\n                <FormControl style={{ width: '100%' }}>\n                  <label>\n                    Optimization Ratio {' '}\n                    {ratio ? (\n                      <>\n                        {ratio[0].toString()}% - {ratio[1].toString()}%)\n                      </>\n                    ) : (\n                      ''\n                    )}\n                    <Tooltip\n                      title={\n                        <div style={{ fontSize: '13px', fontFamily: 'Inter' }}>\n                          Ratio = New Duration over Baseline Duration\n                        </div>\n                      }\n                    >\n                      <InfoOutlinedIcon />\n                    </Tooltip>\n                  </label>\n                  <Slider\n                    id=\"optimization-ratio\"\n                    step={5}\n                    min={1}\n                    max={200}\n                    valueLabelDisplay=\"auto\"\n                    getAriaLabel={() => 'Optimization Ratio'}\n                    value={ratio}\n                    marks={ratioMarks}\n                    onChange={(e) => setRatio(e.target.value)}\n                    disabled={!isFileUploaded}\n                  />\n                </FormControl>\n              </div>\n              <div className=\"inputs\">\n                <FormControl style={{ width: '100%' }}>\n                  <label>Optimization Steps ({steps.toString()})\n                  </label>\n                  <Slider\n                    id=\"optimization-steps\"\n                    aria-label=\"optimization-steps\"\n                    value={steps}\n                    onChange={(e) => {\n                      setSteps(e.target.value)\n                    }}\n                    step={1}\n                    min={10}\n                    max={50}\n                    marks={stepMarks}\n                    valueLabelDisplay=\"auto\"\n                    disabled={!isFileUploaded}\n                  />\n                </FormControl>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div />\n          <PrimaryButton\n            variant=\"contained\"\n            onClick={buttonOnClick}\n            disabled={!isFileUploaded}\n          >\n            Next\n          </PrimaryButton>\n        </div>\n\n        <Modal\n          isLoading={isLoading}\n          title={`Reading File Data (${uploadedFile && uploadedFile.size / 1000000} Mb)`}\n          content=\"This may take up to a few minutes.\"\n          spinner\n        />\n\n      </OptimizationContainer >\n    </Content >\n  )\n}\n","import * as xlsx from 'xlsx'\n\nexport const ms_per_hr = 60 * 60 * 1000\nexport const ms_per_day = 24 * ms_per_hr\nexport const ms_per_week = 7 * ms_per_day\n\nexport function encode_id(id) { return 'id_' + id }\nexport function len(x) { return x && Object.keys(x).length }\nexport function copy(x) { return JSON.parse(JSON.stringify(x)) }\n\nexport function parse_drtn_hr(x = 'PT200H0M0S') {\n  return parseFloat(x.split('PT')[1].split('H')[0])\n}\n\nexport function recover_drtn(drtn_hr) {\n  return 'PT' + drtn_hr + 'H0M0S'\n}\n\nexport function parse_time(x = '07:00:00') {\n  return Date.parse('1971-06-28T' + x)\n    - Date.parse('1971-06-28T00:00:00')\n}\n\nexport function to_iso(timestamp) {\n  return new Date(timestamp).toISOString().split('.')[0]\n}\n\nexport function fmt_date(date) {\n  return new Date(date).toISOString().replace('T', ' ').slice(0, 16)\n}\n\nexport function export_excel({ book, filename }) {\n  let wb = xlsx.utils.book_new()\n  Object.entries(book).forEach(([name, data]) => {\n    let ws = xlsx.utils.json_to_sheet(Object.values(data))\n    xlsx.utils.book_append_sheet(wb, ws, name)\n  })\n  xlsx.writeFile(wb, filename)\n}\n\nexport function read_excel(file) {\n  return new Promise((res) => {\n    let reader = new FileReader()\n    reader.onload = e => {\n      let book = xlsx.read(e.target.result, { type: 'binary' })\n      let data = {}\n      book.SheetNames.forEach(name => {\n        data[name] = xlsx.utils.sheet_to_json(book.Sheets[name], {\n          //raw: true,\n        })\n      })\n      res(data)\n    }\n    reader.readAsBinaryString(file)\n  })\n}\n\nexport function to_dict(keys = [], values = []) {\n  let dic = {}\n  keys.forEach((k, i) => dic[k] = values[i])\n  return dic\n}\n\nexport function export_file(filename, text) {\n  let elm = document.createElement('a')\n  let prefix = 'data:text/plain;charset=utf-8,'\n  elm.setAttribute('href', prefix + encodeURIComponent(text))\n  elm.setAttribute('download', filename)\n  elm.style.display = 'none'\n  document.body.appendChild(elm)\n  elm.click()\n  document.body.removeChild(elm)\n}\n\nexport function down_sample(data_, keep) {\n  let data = []\n  if (data_.length > keep) {\n    let skip = Math.floor(data_.length / keep)\n    for (let i = 0; i < keep; i++) {\n      data.push(data_[i * skip])\n    }\n  }\n  else data = data_\n  return data\n}\n\nexport function sleep(ms) {\n  return new Promise((res, rej) => {\n    setTimeout(() => { res() }, ms)\n  })\n}","export const frontline_color_palette = {\n  FrontlineGreen: '',\n  FrontlineYellow: '',\n  FrontlineOrange: '',\n  FrontlineBlue: '',\n  FrontlineRed: ''\n}\n\nexport const plot_color_palette = {\n  TaskPlot: {\n    optimizedTask: '#82B5C799',\n    optimizedCriticalTask: '#e6171799',\n    baselineTask: '#CCCCCC99',\n    baselineCriticalTask: '#e6a7a799'\n  },\n  ComparisonPlot: {\n    'Balanced': '#82B5C799',\n    'Fastest': '#f7dc5b99',\n    'Minimum Resources': '#db793099',\n    'Levelled Resources': '#AABB5D99'\n  },\n  ResourcePlot: {\n    allResources: ['#55CBCD98', '#f7dc5b98', '#FFAEA598', '#82B5C798', '#939ce398', '#AABB5D98', '#BAA19098', '#db793098', '#099A4D98', '#f07e9398', '#FDAE6198', '#D53E4F98', '#ABDDA498', '#E6F598', '#9B4FA298', '#6891F98F']\n  }\n}","import * as d3 from 'd3'\n\nexport function init_d3({\n  margin = 50,\n  x_domain,\n  y_domain,\n  width,\n  height,\n  ref,\n  x_label,\n  y_label,\n  x_type = d3.scaleLinear,\n  y_type = d3.scaleLinear,\n}) {\n\n  const x1 = margin,\n    x2 = width - margin,\n    y2 = margin,\n    y1 = height - margin,\n    x_scale = x_type(x_domain, [x1, x2]),\n    y_scale = y_type(y_domain, [y1, y2])\n\n  const svg = d3.select(ref.current).attr('width', width).attr('height', height)\n  svg.selectChildren().remove()\n\n  const x_axis = svg.append('g')\n\n  x_axis\n    .call(d3.axisBottom(x_scale))\n    .attr('transform', `translate(0, ${y1})`)\n    .call((g) => {\n      g.append('text')\n        .attr('x', width / 2)\n        .attr('y', 40)\n        .attr('fill', '#2d2d2d')\n        .attr('font-size', 16)\n        .attr('text-align', 'right')\n        .text(x_label)\n    })\n\n  const x_axis_2 = svg.append('g')\n  x_axis_2.call(d3.axisTop(x_scale).tickValues([])).attr('transform', `translate(0, ${y2})`)\n\n  const y_axis = svg.append('g')\n  y_axis\n    .call(d3.axisLeft(y_scale))\n    .attr('transform', `translate(${x1}, 0)`)\n    .call((g) => {\n      g.append('text')\n        .attr('text-anchor', 'end')\n        .attr('y', 30) // margin from TOP\n        .attr('x', -30) // margin from TOP\n        .attr('fill', '#2d2d2d')\n        .attr('font-size', 16)\n        .text(y_label)\n        // .attr('transform', 'rotate(-90)')\n        .attr('text-anchor', 'start')\n    })\n\n  const y_axis_2 = svg.append('g')\n  y_axis_2.call(d3.axisRight(y_scale).tickValues([])).attr('transform', `translate(${x2}, 0)`)\n\n  const xGrid = d3.axisBottom()\n    .scale(x_scale)\n    .tickFormat('')\n    .tickSizeInner(height - 2 * margin)\n\n  svg.append('g')\n    .attr('class', 'x-grid')\n    .attr('transform', `translate(0, ${y2})`)\n    .style('opacity', 0.3)\n    .style('stroke-dasharray', ('3, 3'))\n    .call(xGrid)\n\n  const yGrid = d3.axisLeft()\n    .scale(y_scale)\n    .tickFormat('')\n    .tickSizeInner(-width + 2 * margin)\n\n  svg.append('g')\n    .attr('class', 'x-grid')\n    .attr('transform', `translate(${x1}, 0)`)\n    .style('opacity', 0.3)\n    .style('stroke-dasharray', ('3, 3'))\n    .call(yGrid)\n\n  return { svg, x_scale, y_scale }\n}\n\nexport function domains_with_margin(x_domain, y_domain, x_amount, y_amount) {\n  const x_margin = (x_domain[1] - x_domain[0]) * x_amount\n  const y_margin = (y_domain[1] - y_domain[0]) * y_amount\n  return {\n    x_domain: [x_domain[0] - x_margin, x_domain[1] + x_margin],\n    y_domain: [y_domain[0] - y_margin, y_domain[1] + y_margin]\n  }\n}","import React, { useEffect, useRef } from 'react'\nimport ReactDOM from 'react-dom'\n\nimport * as d3 from 'd3'\n\nimport { init_d3 } from '../../utils/plot'\nimport { plot_color_palette } from '../../utils/color'\nimport { len, down_sample } from '../../mods/a_utils'\n\nimport { Alert, AlertTitle } from '@mui/material'\n\nexport default function TaskPlot({\n  selectedColor,\n  tasks,\n  baselineTasks,\n  width,\n  height,\n  color,\n  keep = 400,\n}) {\n  const ref = useRef()\n  useEffect(() => {\n    // if (!(baselineTasks && len(baselineTasks)) || (!(tasks) && len(tasks))) return\n    // if (!tasks) return\n\n    let data = Object.values(tasks).sort((a, b) => a.newStart?.data - b.newStart?.data)\n    let baselineData = Object.values(baselineTasks).sort((a, b) => a.plannedStart - b.plannedStart)\n\n    if (data.length > keep) {\n      data = data.filter((d, i) => i < 150)\n      baselineData = baselineData.filter((bd, i) => i < 150)\n    }\n\n    const x_optimized_domain = [\n      Math.min(...Object.values(data).map((i) => i.newStart?.data)),\n      Math.max(...Object.values(data).map((i) => i.newFinish?.data)),\n    ]\n\n    const x_baseline_domain = [\n      Math.min(...Object.values(data).map((i) => i.plannedStart)),\n      Math.max(...Object.values(data).map((i) => i.plannedFinish)),\n    ]\n\n    const x_domain = x_baseline_domain\n    // [Math.min(x_optimized_domain[0], x_baseline_domain[0]),\n    // Math.max(x_baseline_domain[1], x_optimized_domain[1],),]\n\n    data = down_sample(data, keep)\n    baselineData = down_sample(baselineData, keep)\n\n    const y_optimized_domain = [data.length, 0]\n    const y_baseline_domain = [baselineData.length, 0]\n    const y_domain = [\n      Math.max(y_optimized_domain[0], y_baseline_domain[0]),\n      Math.min(y_optimized_domain[1], y_baseline_domain[1]),\n    ]\n\n    const { svg, x_scale, y_scale } = init_d3({\n      margin: 40,\n      x_domain,\n      y_domain,\n      width: width ? width : 560,\n      height: height ? height : 500,\n      ref,\n      // x_label: 'time',\n      // y_label: 'task',\n      x_type: d3.scaleUtc,\n      y_type: d3.scaleLinear,\n    })\n\n    const rect_base = svg.append('g')\n\n    rect_base\n      .selectAll('rect')\n      .data(data)\n      .join('rect')\n      .attr('x', (d) => x_scale(d.plannedStart))\n      .attr('y', (d, i) => y_scale(i))\n      .attr('rx', 8)\n      .attr('ry', 8)\n      .attr('width', (d) => Math.max(x_scale(d.plannedFinish) - x_scale(d.plannedStart), 0))\n      .attr('height', y_scale(1) - y_scale(0) - 0.5 - 0.5)\n      .attr('fill', (d) => {\n        return d.critical ? plot_color_palette.TaskPlot.baselineCriticalTask : plot_color_palette.TaskPlot.baselineTask\n      })\n\n    const rect = svg.append('g')\n\n    rect\n      .selectAll('rect')\n      .data(data)\n      .join('rect')\n      .attr('x', (d) => x_scale(d.newStart?.data))\n      .attr('y', (d, i) => y_scale(i))\n      .attr('width', (d) =>\n        Math.max(x_scale(d.newFinish?.data) - x_scale(d.newStart?.data), 0)\n      )\n      .attr('height', y_scale(1) - y_scale(0) - 0.5 - 0.5)\n      .attr('rx', 8)\n      .attr('ry', 8)\n      .attr('fill', (d) => (d.critical ?\n        plot_color_palette.TaskPlot.optimizedCriticalTask\n        : color ? color : selectedColor))\n      .on('mouseover', (event, d) => {\n        const { name, newDuration } = d\n        const tooltip = (\n          <div title={name} style={{\n            background: '#eeeeee',\n            position: 'absolute',\n            top: event.pageY,\n            left: event.pageX + 10,\n            padding: '6px 8px',\n            pointerEvents: 'none',\n            borderRadius: '8px'\n          }}>\n            {name}<br />\n            <small>{newDuration.data} hours</small>\n          </div>\n        )\n        ReactDOM.render(tooltip, document.getElementById('tooltip'))\n      })\n      .on('mouseout', () => {\n        ReactDOM.unmountComponentAtNode(document.getElementById('tooltip'))\n      })\n  }, [tasks, baselineTasks])\n\n  if (!(baselineTasks && len(baselineTasks)) || (!(tasks) && len(tasks))) return null\n\n  const msg =\n    len(tasks) > keep\n      ? `Chart is only showing up to 400 critical tasks as the project has ${Object.values(tasks).sort((a, b) => a.newStart?.data - b.newStart?.data).length} tasks`\n      : ''\n  return (\n    <>\n      {/* {Object.values(tasks).sort((a, b) => a.start_2 - b.start_2).length > 400 ?\n        <Alert sx={{ margin: '20px 20px -20px' }} severity=\"info\">\n          <AlertTitle>{msg}</AlertTitle>\n        </Alert> : ''} */}\n      <div id=\"tooltip\" />\n      <svg ref={ref}></svg>\n    </>\n  )\n}","import React, { useEffect, useRef } from 'react'\nimport * as d3 from 'd3'\n\nimport { init_d3, domains_with_margin } from '../../utils/plot'\nimport { plot_color_palette } from '../../utils/color'\n\nexport default function DistibutionPlot({\n  results,\n  baselineResults,\n  steps,\n  optimizer,\n  optimizationPresets,\n  selectedPreset,\n  selectedResultIndex = -1,\n  width = 550, height = 500,\n  k, x_label, y_label, onClick\n}) {\n  const ref = useRef()\n\n  useEffect(() => {\n    if (!Object.values(results).length) return null\n\n    const outputs = Object.values(results).flat().map(({ output }) => {\n      return output.projectDurationDays.data\n    })\n\n    const laborMax = Object.values(results).flat().map(({ output }) => {\n      return output.laborDistribution.max.data\n    })\n\n    const x_domain = d3.extent(outputs)\n    const y_domain = d3.extent(laborMax)\n    const domains = domains_with_margin(x_domain, y_domain, 0.15, 0.15)\n\n    const { svg, x_scale, y_scale } = init_d3({\n      x_domain: domains.x_domain,\n      y_domain: domains.y_domain,\n      margin: 50,\n      width, height, ref,\n      x_label,\n      y_label,\n      x_type: d3.scaleLinear,\n      y_type: d3.scaleLinear,\n    })\n\n    const newData = []\n    Object.entries(results).map(([key, value]) => {\n      value.map((i) => {\n        newData.push({\n          name: key,\n          drtn_day: i.output.projectDurationDays.data,\n          rsrc_max: i.output.laborDistribution.max.data\n        })\n      })\n    }).flat()\n\n    newData.push({\n      name: 'Baseline',\n      drtn_day: baselineResults.output.projectDurationDays.data,\n      rsrc_max: baselineResults.output.laborDistribution.max.data\n    })\n\n    const circleBaseline = svg.append('g')\n    circleBaseline.selectAll('circle')\n      .data(newData)\n      .join('circle')\n      .attr('cx', d =>\n        x_scale(d.drtn_day)\n      )\n      .attr('cy', d => y_scale(d.rsrc_max))\n      .attr('r', d => 4)\n      .attr('fill', (d, i) => {\n        const newName = d.name\n        return d.name !== 'Baseline' ? plot_color_palette.ComparisonPlot[newName.toString()] : '#CCCCCC'\n      })\n  }, [results, baselineResults])\n\n  return (\n    <svg ref={ref}>\n    </svg>\n  )\n}\n","import styled from 'styled-components'\n\nexport const OptimizationContainer = styled.div`\n  width: 100%;\n  .summary {\n    width: 100%;\n    display: inline-flex;\n    justify-content: space-between;\n    background: #fbfbfb;\n    margin: 0px 0 20px;\n    .stats {\n      padding: 25px;\n      width: 20%;\n      display: flex;\n      flex-direction: column;\n      position: relative;\n      &:last-child {\n        &:after {\n          width: 0px;\n        }\n      }\n      &:after {\n        content: '';\n        height: 65px;\n        width: 1px;\n        background: #eeeeee;\n        position: absolute;\n        right: 0;\n        top: calc(50% - 32px);\n      }\n      .title {\n        display: flex;\n        align-items: center;\n        svg {\n          margin-left: 5px;\n          width: 18px;\n        }\n      }\n      .figure {\n        display: inline-flex;\n        margin: 16px 0;\n        align-items: baseline;\n        .numbers {\n          font-family: \"Lato\", sans-serif;\n          font-size: 40px;\n          color: #000000;\n          font-weight: 700;\n          margin-right: 10px;\n        }\n        .baseline-stats {\n            font-family: \"Lato\", sans-serif;\n            font-size: 28px;\n            color: #999999;\n            font-weight: 700;\n         }\n      }\n      .badge {\n          padding: 3px 10px;\n          font-size: 12px;\n          font-weight: 700;\n          border-radius: 8px;\n          width: 50px;\n          display: flex;\n          align-items: center;\n          svg {\n            margin-right: 5px;\n          }\n          &.plus {\n            background: #e2f5e2;\n            color: #499249;\n          }\n          &.minus {\n            background: #feeaea;\n            color: #ff4d4d;\n          }\n        }\n    }\n  }\n`\n\nexport const OptimizationCharts = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 20px;\n  width: 100%;\n  /* background: #ffffff; */\n  /* padding: 30px 20px; */\n  box-sizing: border-box;\n  .full-chart {\n    box-sizing: border-box;\n    background: #ffffff;\n    padding: 20px;\n    width: 100%;\n  }\n  .chart { \n    width: 49%;\n    .section {\n      margin-bottom: 20px;\n      background: #ffffff;\n      padding: 20px;\n      .MuiFormControl-root {\n        width: 100%;\n        .presets {\n          justify-content: flex-start;\n          label {\n            width: 33%;\n            margin-right: 0;\n          }\n        }\n      }\n    }\n  }\n  .bar-tooltip {\n    padding: 5px;\n    border-radius: 8px;\n    background: yellow;\n  }\n`\n\nexport const LoadingTitle = styled.div`\n  display: inline-block;\n  @keyframes blink {\n      0% {\n        opacity: .2;\n      }\n      20% {\n        opacity: 1;\n      }\n      100% {\n        opacity: .2;\n      }\n  }\n\n  span {\n    font-size: 50px;\n    animation-name: blink;\n    animation-duration: 1.4s;\n    animation-iteration-count: infinite;\n    animation-fill-mode: both;\n  }\n\n  span:nth-child(2) {\n      animation-delay: .2s;\n  }\n\n  span:nth-child(3) {\n      animation-delay: .4s;\n  }\n`","import React, { useState, useEffect } from 'react'\n\nimport { FormControlLabel, FormControl, Radio, RadioGroup } from '@mui/material'\n\nimport { len } from '../../../mods/a_utils'\nimport { plot_color_palette } from '../../../utils/color'\n\nimport TaskPlot from '../../../components/Plot/TaskPlot'\nimport DistributionPlot from '../../../components/Plot/Distribution'\nimport Modal from 'src/feat/Modal'\n\nimport { PrimaryButton } from 'src/styled'\nimport { OptimizationContainer, OptimizationCharts, LoadingTitle } from './styled'\n\nexport default function BaselineSummary({ optimizer, baseline, results, selectedPreset, setSelectedPreset, selectedResultIndex, setSelectedResultIndex, goNext }) {\n\n  const [currentTasks, setCurrentTasks] = useState(Object.values(optimizer.project.tasks).filter((i) => i.newFinish))\n  const baselineTasks = Object.values(optimizer.plannedproject.tasks).filter((i) => i.newFinish)\n\n  const listOfPresets = Object.keys(results)\n  const selectedPresetResult = results[selectedPreset]\n\n  useEffect(() => {\n    setSelectedResultIndex(optimizer.results[selectedPreset].length - 1)\n  }, [])\n\n  useEffect(() => {\n    setCurrentTasks(Object.values(optimizer.project.tasks).filter((i) => i.newFinish))\n    optimizer.simulate(selectedPresetResult.at(selectedResultIndex).durationRatios)\n  }, [selectedPresetResult]) // preset changes here \n\n  const statData = (title, numbers) => {\n    return <div className='stats'>\n      <div className='title'>{title}\n      </div>\n      <div className='figure'>\n        <div className='numbers'>{numbers}</div>\n      </div>\n    </div >\n  }\n\n  return <>\n    <OptimizationContainer>\n      <h2>Baseline Summary</h2>\n      <div className='summary'>\n        {statData('Project Duration (days)', Math.round(baseline?.duration))}\n        {statData('Resources', Math.round(baseline?.resources?.length))}\n        {statData('Tasks', Object.values(baseline?.tasks).length)}\n        {statData('Tasks on Critical Path', Math.round(baseline?.critical_paths?.length))}\n      </div >\n\n      {\n        results ? <>\n          <OptimizationCharts className=\"multi-charts\">\n            {listOfPresets ?\n              <div className='full-chart'>\n                <div className='section'>\n                  {results === 0 || results === undefined ? <h3><LoadingTitle><span>.</span><span>.</span><span>.</span></LoadingTitle></h3> : <h3>Tasks Overview</h3>}\n                  <div className='legend'>\n                    <div className='item'>\n                      <div style={{ width: '14px', height: '14px', background: plot_color_palette.ComparisonPlot[selectedPreset], marginRight: '5px', borderRadius: '50%' }}></div>\n                      <div>{selectedPreset}</div>\n                    </div>\n                    <div className='item'>\n                      <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n                      <div>Baseline</div>\n                    </div>\n                    <div className='item'>\n                      <div style={{ width: '14px', height: '14px', background: '#e61717', marginRight: '5px', borderRadius: '50%' }}></div>\n                      <div>Critical Path</div>\n                    </div>\n                    {/*\n                    {len(optimizationPresets[loadingPreset ? loadingPreset : selectedPreset].optimizer.results.at(-1)?.inp?.tasks || {}) <= 400 ?\n                      <div className='item'>\n                        <div style={{ width: '14px', height: '14px', background: '#e61717', marginRight: '5px', borderRadius: '50%' }}></div>\n                        <div>Critical Path</div>\n                      </div>\n                      : <></>\n                    } */}\n                  </div>\n                  <TaskPlot\n                    tasks={currentTasks || []}\n                    width='1150'\n                    height='650'\n                    color={plot_color_palette.ComparisonPlot[selectedPreset]}\n                    baselineTasks={baselineTasks || []}\n                    title='Tasks (Overview)' />\n                </div>\n              </div>\n              : null\n            }\n          </OptimizationCharts>\n          <OptimizationCharts>\n            <div className='chart'>\n              <div className='section'>\n                <h3>Comparison Chart</h3>\n                <div className='legend'>\n                  <div className='item'>\n                    <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n                    <div>Baseline</div>\n                  </div>\n\n                  {listOfPresets.map((p) => {\n                    return <div key={p} className='item'>\n                      <div style={{ width: '14px', height: '14px', background: plot_color_palette.ComparisonPlot[p], marginRight: '5px', borderRadius: '50%' }}></div>\n                      <div>{p}</div>\n                    </div>\n                  })}\n                </div>\n\n                <DistributionPlot\n                  results={results}\n                  baselineResults={optimizer?.plannedproject}\n                  steps={optimizer?.project?.settings?.optimizationSteps}\n                  // optimizationPresets={optimizationPresets}\n                  selectedPreset={selectedPreset}\n                  selectedResultIndex={selectedResultIndex}\n                  x_label='Duration (days)'\n                  y_label='Maximum Resource (units)'\n                // onClick={(preset, i) => {\n                //   handleSelectPreset(preset)\n                //   handleSelectResultIndex(i)\n                // }}\n                />\n              </div>\n            </div>\n\n            <div className='chart'>\n              <div className='section'>\n                <h3>Optimization Presets</h3>\n                <p>These available presets are pre-configured settings that are designed to deliver the best performance or quality for each individual specific use case.</p>\n                <p>Please select from one of the following options to generate your optimized report: </p>\n                <FormControl component='fieldset'>\n                  <RadioGroup\n                    value={selectedPreset}\n                    onChange={(e) => {\n                      setSelectedPreset(e.target.value)\n                      setSelectedResultIndex(optimizer.results[e.target.value].length - 1)\n                    }}\n                  >\n                    {listOfPresets.map((o) => {\n                      return <div key={o} className='row presets'>\n                        <FormControlLabel value={o} control={<Radio />} label={o} />\n                        <div style={{ fontSize: '12px', fontFamily: 'Inter' }}>{o}</div>\n                      </div>\n                    })}\n                  </RadioGroup>\n                </FormControl>\n                <div className='row'>\n                  <div />\n                  <PrimaryButton variant='contained' onClick={goNext}>\n                    View Optimized Summary\n                  </PrimaryButton>\n                </div>\n              </div>\n            </div>\n          </OptimizationCharts > </> : ''\n      }\n\n    </OptimizationContainer >\n    {/* <Modal isLoading={isLoading} title=\"Error: 0 optimization steps\" content={<div>We were unable to optimize your schedule any further due to strict constraints. Please try again. <a href=\"/\">Back to homepage.</a></div>} /> */}\n  </>\n}","import styled from 'styled-components'\n\nexport const LazyLoadContainer = styled.div`\n  width: 100%;\n  overflow: hidden;\n  position: absolute;\n  text-align: center;\n  bottom: -13px;\n  height: 30px;\n  background: -moz-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 100%); /* FF3.6-15 */\n  background: -webkit-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* Chrome10-25,Safari5.1-6 */\n  background: linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=0 ); /* IE6-9 */\n  button {\n    border: 1px solid #F0F1F3;\n    color: #424242;\n    box-shadow: 1px 1px 5px rgb(207 234 229 / 25%);\n    border-radius: 8px;\n    padding: 4px 10px;\n    background: #FFFFFF;\n    font-family: \"Inter\", \"Arial\", sans-serif;\n    font-size: 12px;\n  }\n`","import React, { useState } from 'react'\n\nimport { LazyLoadContainer } from './styled'\n\nconst LazyLoad = ({ children, onLoadMore }) => {\n  const [isVisible, setIsVisible] = useState(false)\n\n  const handleClick = () => {\n    setIsVisible(true)\n    onLoadMore()\n  }\n\n  return (\n    <LazyLoadContainer>\n      {isVisible ? children : null}\n      {!isVisible && (\n        <button onClick={handleClick}>Load More</button>\n      )}\n    </LazyLoadContainer>\n  )\n}\n\nexport default LazyLoad\n","import styled from 'styled-components'\nimport { ToggleButtonGroup } from '@mui/material'\n\nexport const OptimizationContainer = styled.div`\n  width: 100%;\n  .summary {\n    width: 100%;\n    display: inline-flex;\n    justify-content: space-between;\n    background: #fbfbfb;\n    margin: 0 0 30px;\n    .stats {\n      padding: 25px;\n      width: 20%;\n      display: flex;\n      flex-direction: column;\n      position: relative;\n      &:last-child {\n        &:after {\n          width: 0px;\n        }\n      }\n      &:after {\n        content: '';\n        height: 65px;\n        width: 1px;\n        background: #eeeeee;\n        position: absolute;\n        right: 0;\n        top: calc(50% - 32px);\n      }\n      .title {\n        display: flex;\n        align-items: center;\n        svg {\n          margin-left: 5px;\n          width: 18px;\n        }\n      }\n      .figure {\n        display: inline-flex;\n        margin: 16px 0;\n        align-items: baseline;\n        .numbers {\n          font-family: \"Lato\", sans-serif;\n          font-size: 40px;\n          color: #000000;\n          font-weight: 700;\n          margin-right: 10px;\n        }\n        .baseline-stats {\n            font-family: \"Lato\", sans-serif;\n            font-size: 28px;\n            color: #999999;\n            font-weight: 700;\n         }\n      }\n      .badge {\n          font-size: 12px;\n          font-weight: 700;\n          border-radius: 8px;\n          font-family: \"Lato\";\n          width: 60px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: #f2f2f2;\n          svg {\n            margin-right: 5px;\n          }\n          &.plus {\n            background: #e2f5e2;\n            color: #499249;\n          }\n          &.minus {\n            background: #feeaea;\n            color: #ff4d4d;\n          }\n        }\n    }\n  }\n`\n\nexport const OptimizationCharts = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 20px;\n  width: 100%;\n  /* background: #ffffff;\n  padding: 30px 20px; */\n  box-sizing: border-box;\n  &.multi-charts {\n    flex-wrap: wrap;\n    .div {\n    flex: 1 0 45%;\n      /* width: 49%; */\n      &:first-child {\n        flex: 0 1 100%;\n      }\n    }\n  }\n  &.full-charts {\n    display: block !important;\n    margin-bottom: 20px;\n  }\n  .chart {\n    margin-bottom: 20px;\n    background: #ffffff;\n    padding: 20px;\n    width: 46%;\n  }\n  .full-chart {\n    box-sizing: border-box;\n    margin-bottom: 20px;\n    background: #ffffff;\n    padding: 20px;\n    width: 100%;\n  }\n  /* .chart {\n    width: 100%;\n  } */\n`\n\nexport const ToggleGroup = styled(ToggleButtonGroup)`\n  margin: 15px 0 10px;\n  button {\n    width: 50%;\n  }\n`","import React, { useState, useEffect, useRef, useReducer } from 'react'\nimport ReactDOM from 'react-dom'\n\nimport * as d3 from 'd3'\nimport { ToggleButton } from '@mui/material'\n\nimport LazyLoad from '../../feat/LazyLoad'\n\nimport { ToggleGroup } from '../../pages/Dashboard/OptimizedSummary/styled'\nimport { limitString } from '../../utils/format'\n\nimport { init_d3 } from '../../utils/plot'\nimport { plot_color_palette } from '../../utils/color'\nimport { ms_per_day } from '../../mods/a_utils'\n\nexport default function CombinedPlot({\n  base_results,\n  new_results,\n  base_resource_distribution,\n  new_resource_distribution,\n  filter,\n  width = 560,\n  height = 800,\n  // keep = 1000,\n}) {\n  const ref = useRef()\n  let resources = new_results\n\n  const [showResourcePlot, setShowResourcePlot] = useState('optimized')\n  const [_, forceUpdate] = useReducer((x) => x + 1, 0)\n\n  useEffect(() => {\n    if (!new_resource_distribution) return\n\n    if (showResourcePlot === 'optimized')\n      resources = new_results\n\n    else if (showResourcePlot === 'baseline')\n      resources = base_results\n\n    const x_optimized_domain = d3.extent(new_resource_distribution.map((r) => r.x))\n    const x_baseline_domain = d3.extent(base_resource_distribution.map((r) => r.x))\n\n    const x_domain = showResourcePlot === 'optimized' ? x_optimized_domain : x_baseline_domain\n    const y_optimized_values = (new_resource_distribution).map((r) => {\n      return r.y\n    })\n\n    const y_optimized_domain = d3.extent(y_optimized_values.flat())\n    const y_baseline_values = (base_resource_distribution).map((r) => {\n      return r.y\n    })\n\n    const y_baseline_domain = d3.extent(y_baseline_values.flat())\n    const y_domain = showResourcePlot === 'optimized' ? y_optimized_domain : y_baseline_domain\n\n    const { svg, x_scale, y_scale } = init_d3({\n      x_domain,\n      y_domain,\n      width,\n      height,\n      ref,\n      // x_label: 'time',\n      // y_label: 'units',\n      x_type: d3.scaleUtc,\n      y_type: d3.scaleLinear,\n    })\n\n    let x = 0\n    for (const r in resources) {\n      const rect = svg.append('g')\n      rect\n        .selectAll('rect')\n        .data(Object.entries(resources[r].distribution.xy))\n        .join('rect')\n        .attr('x', (d) => x_scale(d[0]))\n        .attr('width', (d) => x_scale(ms_per_day) - x_scale(0))\n        .attr('y', (d) => y_scale(d[1].data))\n        .attr('height', (d) => y_scale(y_domain[0]) - y_scale(d[1].data))\n        .attr('fill', (d, i) => {\n          if (resources[r].show_in_plot && resources[r].type === filter) {\n            return plot_color_palette.ResourcePlot.allResources[x % plot_color_palette.ResourcePlot.allResources.length]\n          }\n          else\n            return 'none'\n        })\n        .on('mouseover', (event, d) => {\n          const tooltip = (\n            <div title={resources[r].name} style={{\n              background: '#eeeeee',\n              position: 'absolute',\n              top: event.pageY,\n              left: event.pageX + 10,\n              padding: '6px 8px',\n              pointerEvents: 'none',\n              borderRadius: '8px'\n            }}>\n              {resources[r].name}\n            </div>\n          )\n          ReactDOM.render(tooltip, document.getElementById('tooltip'))\n        })\n        .on('mouseout', () => {\n          ReactDOM.unmountComponentAtNode(document.getElementById('tooltip'))\n        })\n      x++\n    }\n\n  }, [new_resource_distribution, showResourcePlot, _])\n\n  function toggleSelectResource(r) {\n    base_results.filter((item) => item.id === r).map((newItem) => {\n      newItem.show_in_plot = !newItem.show_in_plot\n    }\n    )\n    new_results.filter((item) => item.id === r).map((newItem) =>\n      newItem.show_in_plot = !newItem.show_in_plot\n    )\n    forceUpdate()\n  }\n\n  if (!new_resource_distribution) return null\n\n  return (\n    <>\n      <ToggleGroup\n        className='row'\n        value={showResourcePlot}\n        exclusive\n      >\n        <ToggleButton value='optimized' onClick={() => setShowResourcePlot('optimized')}>\n          Optimized\n        </ToggleButton>\n        <ToggleButton value='baseline' onClick={() => setShowResourcePlot('baseline')}>\n          Baseline\n        </ToggleButton>\n      </ToggleGroup>\n      <svg ref={ref}></svg>\n      <div id=\"tooltip\" />\n\n      {resources ?\n        <ResourceList resources={resources} filter={filter} toggleSelectResource={toggleSelectResource} />\n        : ''}\n    </>\n  )\n}\n\nconst ResourceList = ({ resources, filter, toggleSelectResource }) => {\n  const [visibleCount, setVisibleCount] = useState(Object.values(resources).length > 50 ? 56 : 35)\n\n  const remainingLength = Object.values(resources).length - visibleCount\n\n  const handleLoadMore = () => {\n    setVisibleCount(prevCount => prevCount + remainingLength)\n  }\n\n  return (\n    <>\n      <div className=\"row\"><h4>Legend</h4></div>\n      <div className=\"legend\">\n        {Object.values(resources)\n          .filter(r => r.type === filter)\n          .slice(0, visibleCount)\n          .map((r, i) => (\n            <div\n              key={r + ' ' + i}\n              className=\"item resources\"\n              style={{\n                opacity: r?.show_in_plot ? '100%' : '50%',\n                cursor: 'pointer',\n              }}\n              onClick={(e, i) => {\n                toggleSelectResource(r.id)\n              }}\n            >\n              <div\n                style={{\n                  width: '14px',\n                  height: '14px',\n                  background:\n                    plot_color_palette.ResourcePlot.allResources[i % plot_color_palette.ResourcePlot.allResources.length],\n                  marginRight: '5px',\n                  borderRadius: '50%',\n                }}\n              ></div>\n              <div>{limitString(r.name, 20)}</div>\n            </div>\n          ))}\n        {Object.values(resources).filter(r => r.type === filter).length > visibleCount && (\n          <LazyLoad onLoadMore={handleLoadMore}>\n            <button>Load More</button>\n          </LazyLoad>\n        )}\n      </div>\n    </>\n  )\n}","import { format_date, len } from './reader'\n\nexport function format_fields(k = '', v) {\n  if (typeof v === 'string') return v\n\n  if (k.includes('start') || k.includes('finish')) return format_date(v)\n\n  if (typeof v === 'number') {\n    if (k.includes('ratio')) return v.toFixed(2)\n    return v.toFixed(0)\n  }\n\n  if (v === null || v === false) return ''\n  if (Array.isArray(v) && v.length < 3) return JSON.stringify(v)\n  if (typeof v === 'object') return len(v)\n\n  return JSON.stringify(v)\n}\n\nexport function limitString(str, limit) {\n  if (!str) return ''\n  if (str.length <= limit) return str\n  \n  return str.substring(0,limit) + '...'\n}","import React, { useState, useEffect } from 'react'\n\nimport { len } from '../../../mods/a_utils'\n\nimport TaskPlot from '../../../components/Plot/TaskPlot'\nimport { plot_color_palette } from '../../../utils/color'\nimport CombinedPlot from '../../../components/Plot/CombinedPlot'\n\nimport { Tooltip } from '@mui/material'\nimport InfoIcon from '@mui/icons-material/Info'\n\nimport { PrimaryButton, SecondaryButton } from 'src/styled'\nimport { OptimizationContainer, OptimizationCharts } from './styled'\n\nconst calculatePercentage = (optimized, baseline) => {\n  const diff = (optimized - baseline)\n  const percentage = ((diff / baseline) * 100)\n  const checkPositive = Math.sign(percentage)\n  if (checkPositive === 1) {\n    return <span className='badge minus'>{(Math.round(percentage))}%</span>\n  }\n  else if (checkPositive === -1) {\n    return <span className='badge plus'>{(Math.abs(Math.round(percentage)))}%</span>\n  }\n  else { return <span className='badge'>{(Math.round(percentage))}%</span> }\n}\n\nexport default function OptimizedSummary({ baseline, tasks, optimizer, results, selectedPreset, selectedResultIndex, goPrev, goNext }) {\n\n  const [currentTasks, setCurrentTasks] = useState(Object.values(optimizer.project.tasks).filter((i) => i.newFinish))\n  const baselineTasks = Object.values(optimizer.plannedproject.tasks).filter((i) => i.newFinish)\n\n  const selectedPresetResult = results[selectedPreset]\n  const selectedPresetResultOutput = results[selectedPreset]?.at(selectedResultIndex)?.output\n\n  const baselineProjectDuration = baseline?.duration\n\n  const newProjectDuration = selectedPresetResultOutput?.projectDurationDays?.data\n\n  const newResources = Object.values(optimizer?.project?.resources)\n  const baselineResources = Object.values(optimizer?.plannedproject?.resources)\n\n  const newTasks = Object.values(optimizer?.project?.tasks)\n\n  const baselineCriticalTasks = optimizer?.planned?.criticalPath\n  const newCriticalTasks = newTasks.filter((item) => item.critical !== undefined && item.critical).map((d) => d)\n\n  const resourcesData =\n  {\n    labor: {\n      base: [],\n      new: []\n    },\n    material: {\n      base: [],\n      new: []\n    },\n    resource_distribution: {\n      base: [],\n      new: []\n    }\n  }\n\n  if (newResources) {\n    newResources.forEach((l) => {\n      if (l.type.toLowerCase() === 'labor') {\n        resourcesData.labor.new.push({\n          name: l.name,\n          distribution: l.distribution,\n          id: l.id,\n          type: l.type,\n          show_in_plot: true\n        })\n      }\n      if (l.type.toLowerCase() === 'material') {\n        resourcesData.material.new.push({\n          name: l.name,\n          distribution: l.distribution,\n          id: l.id,\n          type: l.type,\n          show_in_plot: true\n        })\n      }\n      if (l.distribution) {\n        Object.entries(l.distribution.xy).map(([key, value]) =>\n          resourcesData.resource_distribution.new.push(\n            {\n              x: key,\n              y: value.data\n            }\n          ))\n      }\n    })\n  }\n\n  if (baselineResources) {\n    baselineResources.forEach((l) => {\n      if (l.type.toLowerCase() === 'labor') {\n        resourcesData.labor.base.push({\n          name: l.name,\n          distribution: l.distribution,\n          id: l.id,\n          type: l.type,\n          show_in_plot: true\n        })\n      }\n      if (l.type.toLowerCase() === 'material') {\n        resourcesData.material.base.push({\n          name: l.name,\n          distribution: l.distribution,\n          id: l.id,\n          type: l.type,\n          show_in_plot: true\n        })\n      }\n      if (l.distribution) {\n        Object.entries(l.distribution.xy).map(([key, value]) =>\n          resourcesData.resource_distribution.base.push(\n            {\n              x: key,\n              y: value.data\n            }\n          ))\n      }\n    })\n  }\n\n  useEffect(() => {\n    setCurrentTasks(Object.values(optimizer.project.tasks).filter((i) => i.newFinish))\n    optimizer.simulate(selectedPresetResult.at(selectedResultIndex).durationRatios)\n  }, [selectedPresetResult]) // preset changes here \n\n  return <OptimizationContainer>\n    <h2><span style={{ textTransform: 'capitalize' }}>{selectedPreset}</span> Optimized Summary </h2>\n    <div className='summary'>\n      <div className='stats'>\n        <div className='title'>Project Duration (days)\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(newProjectDuration)} </div>\n          <div className='baseline-stats'>{Math.round(baselineProjectDuration)}</div>\n        </div>\n        {calculatePercentage(newProjectDuration, baselineProjectDuration)}\n      </div>\n      <div className='stats'>\n        <div className='title'>Resources\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(newResources?.length)} </div>\n          <div className='baseline-stats'>{Math.round(baseline?.resources?.length)} </div>\n        </div>\n        {calculatePercentage(newResources?.length, baseline?.resources?.length)}\n      </div>\n      <div className='stats'>\n        <div className='title'>Tasks <Tooltip title='Tasks that were changed'><InfoIcon /></Tooltip>\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(newTasks?.length)} </div>\n          <div className='baseline-stats'>{Math.round(Object.values(baseline?.tasks).length)} </div>\n        </div>\n        {calculatePercentage(newTasks?.length, Object.values(baseline?.tasks).length)}\n      </div>\n      <div className='stats'>\n        <div className='title'>Tasks on Critical Path\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(newCriticalTasks.length)} </div>\n          <div className='baseline-stats'>{Math.round(baselineCriticalTasks.length)}  </div>\n        </div>\n        {calculatePercentage(baselineCriticalTasks.length, newCriticalTasks.length)}\n      </div>\n    </div>\n\n    {selectedPresetResult ?\n      <OptimizationCharts className=\"multi-charts\">\n        <div className='full-chart'>\n          <h3>Tasks (Overview)</h3>\n          <span className=\"subtitle\">Overview of all tasks over time</span>\n          <div className='legend'>\n            <div className=\"item\">\n              <div style={{ width: '14px', height: '14px', background: plot_color_palette.ComparisonPlot[selectedPreset], marginRight: '5px', borderRadius: '50%' }}></div>\n              <div>Optimized</div>\n            </div>\n            <div className=\"item\">\n              <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n              <div>Baseline</div>\n            </div>\n            {/* {len(optimizer.results.at(-1)?.inp?.tasks || {}) <= 400 ?\n              <div className=\"item\">\n                <div style={{ width: '14px', height: '14px', background: '#e61717', marginRight: '5px', borderRadius: '50%' }}></div>\n                <div>Critical Path</div>\n              </div>\n              : <></>\n            } */}\n          </div>\n          {currentTasks ?\n            <TaskPlot\n              tasks={currentTasks || []}\n              width='1150'\n              height='600'\n              color={plot_color_palette.ComparisonPlot[selectedPreset]}\n              baselineTasks={baselineTasks || []}\n              title='Tasks (Overview)' />\n            : 'No data'\n          }\n        </div>\n        <div className='full-chart'>\n          <div className='row'>\n            <div>\n              <h3>Labor Resources</h3>\n              <span className=\"subtitle\">Total utilization of multiple resources over time</span>\n            </div>\n          </div>\n          {resourcesData.resource_distribution ?\n            <CombinedPlot\n              width=\"1150\"\n              selectedResultIndex={selectedResultIndex}\n              base_results={resourcesData.labor.base}\n              new_results={resourcesData.labor.new}\n              base_resource_distribution={resourcesData.resource_distribution.base}\n              new_resource_distribution={resourcesData.resource_distribution.new}\n              filter='Labor'\n              title='Combined Resources' />\n            : 'No data'\n          }\n        </div>\n\n        {resourcesData?.material?.base?.length === 0 ? '' : <>\n          <div className='full-chart'>\n            <div className='row'>\n              <div>\n                <h3>Material Resources</h3>\n                <span className=\"subtitle\">Total utilization of multiple resources over time</span>\n              </div>\n            </div>\n\n            {resourcesData.resource_distribution ?\n              <CombinedPlot\n                width=\"1150\"\n                selectedResultIndex={selectedResultIndex}\n                base_results={resourcesData.material.base}\n                new_results={resourcesData.material.new}\n                base_resource_distribution={resourcesData.resource_distribution.base}\n                new_resource_distribution={resourcesData.resource_distribution.new}\n                filter='Material'\n                title='Combined Resources' />\n              : 'No data'\n            }\n          </div></>}\n\n      </OptimizationCharts> : ''}\n    <div className='row'>\n      <SecondaryButton variant='contained' onClick={goPrev}>\n        Back\n      </SecondaryButton>\n      <PrimaryButton variant='contained' onClick={goNext}>\n        View Detailed Report\n      </PrimaryButton>\n    </div>\n  </OptimizationContainer>\n}","import styled from 'styled-components'\n\nexport const TableContainer = styled.div`\n  .MuiDataGrid-main {\n    font-family: \"Inter\"\n  }\n`","import React from 'react'\n\nimport { DataGrid } from '@mui/x-data-grid'\n\nimport { TableContainer } from './styled'\n\nexport default function Table({ rows, columns, hidden_columns }) {\n  const makeRowHeight = (rows.length > 3) ? 500 : 300\n  const initial_state = {\n    columns: {\n      columnVisibilityModel: hidden_columns,\n    },\n  }\n  return <TableContainer>\n    <div style={{\n      height: makeRowHeight, width: '100%'\n    }}>\n      <DataGrid\n        rows={rows}\n        columns={columns}\n        initialState={initial_state}\n      // getRowId={(row) => row.id + row.name + row.t_name}\n      />\n    </div>\n  </TableContainer>\n}","import React, { useEffect, useRef } from 'react'\nimport * as d3 from 'd3'\n\nimport { init_d3, domains_with_margin } from '../../utils/plot'\nimport { ms_per_day, len, down_sample } from '../../mods/a_utils'\n\nexport default function ResourcePlot({\n  dist,\n  color,\n  width = 560,\n  height = 500,\n  keep = 1000,\n}) {\n  const ref = useRef()\n  useEffect(() => {\n    if (!dist) return\n\n    const data = down_sample(Object.entries(dist), keep)\n    // const color = d3.scaleOrdinal(d3.schemeCategory10)\n\n    const x_domain = d3.extent(Object.keys(dist).map(item => Number(item)))\n    // console.log('Before', x_domain)\n    const y_domain = d3.extent(Object.values(dist).map((i) => i.data))\n\n    const domains = domains_with_margin((x_domain), (y_domain), 0.01, 0.01)\n\n    // const scale = d3.scaleLinear(x_domain, [40,width-40])\n    // x_domain[1] = parseFloat(x_domain[1]) + 10000*(scale(ms_per_day) - scale(0))\n    // console.log('After', x_domain, scale(ms_per_day) - scale(0))\n\n    const { svg, x_scale, y_scale } = init_d3({\n      x_domain: domains.x_domain,\n      y_domain: domains.y_domain,\n      width,\n      height,\n      ref,\n      x_label: 'time',\n      y_label: 'units',\n      x_type: d3.scaleUtc,\n      y_type: d3.scaleLinear,\n    })\n\n    const rect = svg.append('g')\n\n    rect\n      .selectAll('rect')\n      .data(data)\n      .join('rect')\n      .attr('x', (d) => x_scale(d[0]))\n      .attr('width', x_scale(ms_per_day) - x_scale(0))\n      .attr('y', (d) => y_scale(d[1].data))\n      .attr('height', (d) => y_scale(y_domain[0]) - y_scale(d[1].data))\n      .attr('fill', color)\n    // .style('fill', (d) => color(d[0]))\n\n    // let legend = svg.append('g')\n    //   .attr('transform', 'translate(0, 20)')\n\n    // legend.selectAll('rect')\n    //   .data(data)\n    //   .join('rect')\n    //   .attr('x', 0)\n    //   .attr('y', (d, i) => i * 20)\n    //   .attr('width', 19)\n    //   .attr('height', 18)\n    //   .style('fill', (d) => color(d[0]))\n\n    // legend.selectAll('text')\n    //   .data(data)\n    //   .join('text')\n    //   .attr('x', 22)\n    //   .attr('y', (d, i) => i * 20 + 14)\n    //   .text(d => {\n    //     return data.name\n    //   })\n\n  }, [dist])\n\n  if (!dist) return null\n  const msg =\n    len(dist) > keep\n      ? `(showing ${keep}/${len(dist)} only due to limited pixels)`\n      : ''\n  return (\n    <>\n      {/* <Title>{title}</Title> */}\n      <>{msg}</>\n      <svg ref={ref}></svg>\n    </>\n  )\n}","import React, { useEffect, useRef } from 'react'\nimport * as d3 from 'd3'\n\nimport { init_d3, domains_with_margin } from '../../utils/plot'\nimport { len } from '../../mods/a_utils'\nimport { DataGrid } from '@mui/x-data-grid'\n\nexport default function StepsPlot({\n  results,\n  name, x_axis,\n  x_label, y_label,\n  width = 550,\n  height = 400,\n  keep = 1000,\n  onClick,\n  selectedResultIndex\n}) {\n  const ref = useRef()\n\n  useEffect(() => {\n    if (!results?.length) return null\n\n    const data = results\n    data.forEach((d, i) => d.idx = i)\n\n    const laborMax = Object.values(results).flat().map(({ output }) => {\n      return output.laborDistribution.max.data\n    })\n\n    const domains = domains_with_margin(d3.extent([1, data.length]), d3.extent(name === 'projectDurationDays' ? (data.map((d) =>\n      d.output[name].data)) : name === 'loss' ? data.map(d => d.loss) : name === 'criticalPath' ? data.map(d => d.output.criticalPath.length) : laborMax), 0.1, 0.05)\n\n    const { svg, x_scale, y_scale } = init_d3({\n      margin: 40,\n      x_domain: domains.x_domain,\n      y_domain: domains.y_domain,\n      width, height, ref,\n      x_label: x_label ? x_label : 'Optimization steps',\n      y_label,\n      x_type: d3.scaleLinear,\n      y_type: d3.scaleLinear,\n    })\n\n    const circle = svg.append('g')\n    circle.selectAll('circle').data(data).join('circle')\n      .attr('cx', (d) => {\n        return x_scale(d.idx)\n      })\n      .attr('cy', (d) => {\n        if (name === 'laborDistribution') {\n          return y_scale(d.output[name].max.data)\n        } if (name === 'loss') {\n          return y_scale(d.loss)\n        } if (name === 'criticalPath') {\n          return y_scale(d.output.criticalPath.length)\n        }\n        return y_scale(d.output[name]?.data)\n      })\n      .attr('r', (d, i) => i === selectedResultIndex ? 6 : 3)\n      .style('cursor', d => d.option === 'baseline' ? 'auto' : 'pointer')\n      .attr('fill', (d, i) => {\n        return d.output.constraintLoss > 0\n          ? i === selectedResultIndex ? '#db4444' : '#cccccc'\n          : i === selectedResultIndex ? '#db4444' : '#00beae'\n      }\n      )\n      .on('click', (e, d) => { onClick(d.idx) })\n  }, [results, selectedResultIndex])\n\n  return (\n    <>\n      <div className='legend'>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#e61717', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Step Selected</div>\n        </div>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#00beae', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Constraints Satisfied</div>\n        </div>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Constraints Violated</div>\n        </div>\n      </div>\n\n      <svg ref={ref}></svg>\n    </>\n  )\n}","import styled from 'styled-components'\n\nimport Table from '@mui/material/Table'\nimport TableHead from '@mui/material/TableHead'\n\n\nexport const TableContent = styled.div`\n  background: white;\n  margin-bottom: 40px;\n  padding: 20px;\n  .circle {\n    width: 14px;\n    height: 14px;\n    border-radius: 50%;\n    background-color: #dddddd;\n    margin: 0 auto;\n    &.critical {\n      background-color: red;\n    }\n  }\n  .MuiDataGrid-columnHeaders {\n    background: #f2f2f2;\n  }\n`\n\nexport const ReportTable = styled(Table)`\n  border: 1px solid #eeeeee;\n  border-radius: 6px;\n  thead {\n    tr {\n      background: #f2f2f2;\n      > th {\n        font-weight: bold;\n        color: #222222;\n      }\n    }\n  }\n  .MuiTableSortLabel-icon {\n    opacity: 1;\n  }\n  \n`\nexport const ReportTableHead = styled(TableHead)``","import React, { useEffect, useState } from 'react'\n// import FileDownloadIcon from '@mui/icons-material/FileDownload'\n\nimport Modal from 'src/feat/Modal'\n\nimport Table from '../../../components/Table'\nimport ResourcePlot from '../../../components/Plot/ResourcePlot'\nimport LossPlot from '../../../components/Plot/Loss'\nimport StepsPlot from '../../../components/Plot/Step'\n\nimport { plot_color_palette } from '../../../utils/color'\n\nimport { TableContent } from './styled'\nimport { OptimizationContainer } from '../InputData/styled'\nimport { OptimizationCharts } from '../OptimizedSummary/styled'\nimport { PrimaryButton, SecondaryButton } from 'src/styled'\n\nexport default function DetailedReport({ optimizer, selectedPreset, selectedResultIndex, handleSelectResultIndex, goPrev }) {\n  const [openModal, setOpenModal] = useState(false)\n  const data = optimizer?.results[selectedPreset]\n\n  const [currentTasks, setCurrentTasks] = useState(Object.values(optimizer?.project?.tasks))\n  const [currentResources, setCurrentResources] = useState(Object.values(optimizer?.project?.resources))\n\n  const selectedPresetResult = optimizer?.results[selectedPreset]\n\n  useEffect(() => {\n    setCurrentTasks(Object.values(optimizer?.project?.tasks))\n    setCurrentResources(Object.values(optimizer?.project?.resources))\n    optimizer.simulate(selectedPresetResult.at(selectedResultIndex).durationRatios)\n  }, [selectedResultIndex])\n\n  const changedTasks = currentTasks.filter((item) => item.newDuration?.data !== undefined && item.plannedDuration !== item.newDuration?.data)\n\n  const tasks_rows =\n    changedTasks && changedTasks.map((task) => {\n      const { critical, id, code, name, plannedDuration, newDuration, resources } = task\n      const calcRatio = (newDuration?.data / plannedDuration).toFixed(2)\n      return ({\n        id: id,\n        critical: critical,\n        name: name,\n        code: code,\n        old_duration: `${plannedDuration} hours`,\n        new_duration: `${newDuration?.data} hours`,\n        ratio: calcRatio\n      })\n    })\n\n  const tasks_columns = [\n    {\n      field: 'critical', headerName: 'Critical', width: 80, renderCell: (params) => {\n        return params.value ? (\n          <div className='circle critical' />\n        ) : (\n          <div className='circle' />\n        )\n      },\n    },\n    {\n      field: 'code', headerName: 'Code', width: 180, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    { field: 'id', headerName: 'ID', hide: true },\n    {\n      field: 'name', headerName: 'Name', width: 500, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial', wordWrap: 'break-word'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    { field: 'old_duration', headerName: 'Duration (Baseline)', width: 150 },\n    { field: 'new_duration', headerName: 'Duration (New)', width: 150 },\n    { field: 'ratio', headerName: 'Ratio', width: 50 },\n  ]\n\n  currentResources.map((item) => {\n    return item.newDuration?.data !== undefined && item.plannedDuration !== item.newDuration?.data\n  })\n\n  // filtered changed resources\n  const resources_rows =\n    currentResources && currentResources.map((resources) => {\n      const { name, id, type, code, distribution } = resources\n      return ({\n        name: name,\n        id: id,\n        type: type,\n        code: code,\n        dist: Math.round(Object.values(distribution.xy).map((i) => i.data).reduce((total, current) => total + current, 0)),\n        max: Math.round(distribution.max?.data),\n        std: Math.round(distribution.span?.data)\n      })\n    })\n  const resources_columns = [\n    { field: 'id', headerName: 'ID', width: 80, },\n    { field: 'code', headerName: 'code', width: 160, },\n    { field: 'type', headerName: 'type', width: 100, },\n    {\n      field: 'name', headerName: 'Name', width: 400, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    { field: 'dist', headerName: 'Distribution', width: 130 },\n    { field: 'max', headerName: 'Max ', width: 130 },\n    { field: 'std', headerName: 'Span', width: 130 },\n  ]\n\n  // filtered task-resources relationships\n  const filteredTasksResourcesResults = []\n\n  changedTasks && changedTasks.map((task) => {\n    Object.values(task.resources).map((resource) => {\n      const resourceName = Object.values(currentResources).filter((item) => item.id === resource.resourceId).map((i) => i.name)\n      filteredTasksResourcesResults.push({\n        critical: task.critical,\n        task_name: task.name,\n        task_code: task.code,\n        task_id: task.id,\n        resource_id: resource.resourceId,\n        resource_name: resourceName.toString(),\n        planned_duration: task.plannedDuration,\n        new_duration: task.newDuration?.data,\n        units_new_per_hour: resource.newUnitsPerHour?.data,\n        planned_units: resource.plannedUnits,\n        planned_units_per_hour: resource.plannedUnitsPerHour,\n      })\n    })\n  })\n\n  // plannedUnits: 384 basically means for this entire task what's the total units needed to be done\n  // duration: 96 hours\n  // then divided = 4\n\n  const tasks_resources_rows = filteredTasksResourcesResults &&\n    filteredTasksResourcesResults.map((resources, idx) => {\n      const { critical, task_code, task_id, task_name, resource_name, resource_id, planned_duration, new_duration, units_new_per_hour, planned_units, planned_units_per_hour } = resources\n      return ({\n        critical: critical,\n        t_id: task_code,\n        id: idx,\n        resource_name: resource_name,\n        t_name: task_name,\n        new_units_per_hour: units_new_per_hour?.toFixed(2),\n        old_duration: `${planned_duration} hours`,\n        new_duration: `${new_duration} hours`,\n        planned_units: `${planned_units}`,\n        planned_units_per_hour: planned_units_per_hour?.toFixed(2),\n      })\n    })\n  const tasks_resources_columns = [\n    {\n      field: 'critical', headerName: 'Critical', width: 80, renderCell: (params) => {\n        return (params.value ? (\n          <div className='circle critical' />\n        ) : (\n          <div className='circle' />)\n        )\n      },\n    },\n    {\n      field: 'id', headerName: 'ID', width: 0, hide: true\n    },\n    {\n      field: 't_id', headerName: 'Task Code', width: 180, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>)\n      },\n    },\n    {\n      field: 'resource_name', headerName: 'Resource Name', width: 200, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    {\n      field: 't_name', headerName: 'Task Name', width: 350, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    { field: 'old_duration', headerName: 'Duration (Old)', width: 130 },\n    { field: 'new_duration', headerName: 'Duration (New)', width: 130 },\n    { field: 'planned_units_per_hour', headerName: 'Units (Old)', width: 150 },\n    { field: 'new_units_per_hour', headerName: 'Units (New)', width: 150 },\n    { field: 'planned_units', headerName: 'Total Planned Units', width: 130 },\n  ]\n\n  return (<>\n    <div className=\"row\">\n      <h2><span style={{ textTransform: 'capitalize' }}>{selectedPreset}</span> Detailed Report</h2>\n      <PrimaryButton onClick={() => setOpenModal(true)} variant='contained'>\n        Export Report\n      </PrimaryButton>\n    </div>\n    <OptimizationContainer>\n      <TableContent>\n        <div className='row'>\n          <h3>Changed Tasks (Overview)</h3>\n          {/* <div><FileDownloadIcon /> Export</div> */}\n        </div>\n        <div className='legend' style={{ width: '400px', justifyContent: 'flex-start', marginBottom: '20px' }}>\n          <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center', marginRight: '10px' }}>\n            <div className='circle critical' /> Critical\n          </div>\n          <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center' }}>\n            <div className='circle' /> Non-Critical\n          </div>\n        </div>\n        {currentTasks ?\n          <Table rows={tasks_rows} columns={tasks_columns} /> : 'Please select a Optimization Preset before generating your report'}\n      </TableContent>\n\n      <TableContent>\n        <h3>All Resources</h3>\n        <br />\n        {currentResources ?\n          <Table rows={resources_rows} columns={resources_columns} />\n          : 'Please select a Optimization Preset before generating your report'}\n      </TableContent>\n\n      <TableContent>\n        <h3>Task-Resources</h3>\n        <br />\n        {filteredTasksResourcesResults ?\n          <Table rows={tasks_resources_rows} columns={tasks_resources_columns} /> : 'Please select a Optimization Preset before generating your report'}\n      </TableContent>\n\n      <>\n        <OptimizationCharts className='multi-charts'>\n          <div className='row'><h2>Optimization Iteration Charts</h2></div>\n          <div className='chart'>\n            <h4>Project Duration</h4>\n            <StepsPlot results={data} name='projectDurationDays' x_axis x_label='Optimization steps' y_label='Duration (days)' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n          <div className='chart'>\n            <h4>Maximum Labour Resources</h4>\n            <StepsPlot results={data} name='laborDistribution' x_axis x_label='Optimization steps' y_label='Maximum Resources' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n\n          <div className='chart'>\n            <h4>Critical Path Tasks</h4>\n            <StepsPlot results={data} name='criticalPath' x_axis x_label='Optimization steps' y_label='Number of tasks' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n          <div className='chart'>\n            <h4>Loss Function </h4>\n            <StepsPlot results={data} name='loss' x_axis x_label='Optimization steps' y_label='Loss function' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n          {/* <div className='chart'>\n            <h4>Standard Deviation Labour Resources</h4>\n            <StepsPlot results={optimizer?.results} name='rsrc_std' x_axis x_label='Optimization steps' y_label='Standard Deviation' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n          <div className='chart'>\n            <h4>Number of Changed Tasks</h4>\n            <StepsPlot results={optimizer?.results} name='num_changed' x_axis x_label='Optimization steps' y_label='Number of changed task' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div> */}\n\n        </OptimizationCharts>\n\n        <OptimizationCharts className='multi-charts'>\n          <div className='row'><h2>Resources Plots</h2></div>\n          {Object.values(currentResources || {}).map((r, i) => {\n            return (<div key={r.id} className='chart'>\n              <h4>{`(${r.type}) ${r.name}`}</h4>\n              <ResourcePlot dist={r.distribution.xy} title={`(${r.type}) ${r.name}`} color={plot_color_palette.ResourcePlot.allResources[i % plot_color_palette.ResourcePlot.allResources.length]} />\n            </div>)\n          }\n          )}\n        </OptimizationCharts>\n\n      </>\n\n      <div className='row'>\n        <SecondaryButton variant='contained' onClick={goPrev}>\n          Back\n        </SecondaryButton>\n        <PrimaryButton onClick={() => setOpenModal(true)} variant='contained'>\n          Export Report\n        </PrimaryButton>\n      </div>\n    </OptimizationContainer>\n\n    <Modal isLoading={openModal} onClose={() => setOpenModal(false)} title=\"Export Optimized File\" content={<div className='row'>\n      <PrimaryButton onClick={() => {\n        optimizer.reader.merge_data(optimizer.results[selectedResultIndex].inp)\n        optimizer.reader.export()\n        //reader.exportToOriginal(project);\n      }} variant='contained'>Original Format</PrimaryButton> &nbsp;\n      <PrimaryButton onClick={() => {\n        optimizer.exportToExcel()\n      }} variant='contained'>Excel</PrimaryButton>\n    </div>} />\n  </>\n  )\n}","import styled from 'styled-components'\n\nexport const DashboardContainer = styled.div`\n  width: 100%;\n  box-sizing: border-box;\n  .content {\n    margin: 20px auto;\n    width: 1200px;\n    max-width: 100%;\n    /* background: #ffffff; */\n    /* padding: 1px 20px 20px; */\n    border-radius: 6px;\n    box-sizing: border-box;\n    .legend {\n      display: flex;\n      justify-content: flex-start;\n      align-items: flex-start;\n      position: relative;\n      font-size: 11px;\n      width: 100%;\n      margin-top: 20px;\n      flex-wrap: wrap;\n      &:has(.resources) {\n        margin-bottom: 30px;\n      }\n      .item {\n        display: flex; \n        justify-content: flex-start;\n        align-items: center;\n        margin-right: 23px;\n        &.resources {\n          width: 14%;\n          margin-right: 0 !important;\n        }\n      }\n      .circle {\n        margin-right: 5px;\n      }\n    }\n  }\n`","import React, { useState, useEffect, useReducer } from 'react'\n\nimport Breadcrumb from '../../components/Breadcrumb'\nimport Header from '../../components/Header'\n\nimport InputData from './InputData'\nimport BaselineSummary from './BaselineSummary'\nimport OptimizedSummary from './OptimizedSummary'\nimport DetailedReport from './DetailedReport'\n\nimport { DashboardContainer } from './styled'\n\nconst steps = [\n  'Input Data',\n  'Baseline Summary',\n  'Optimized Summary',\n  'Optimized Report',\n]\n\nconst presets = {\n  balanced: {\n    label: 'Balanced',\n    color: '#82B5C7',\n    description:\n      'Best combination of the fastest, minimum and levelled resources',\n  },\n  fastest: {\n    label: 'Fastest',\n    color: '#f7dc5b',\n    description: 'Shortest project duration',\n  },\n  min_resources: {\n    label: 'Minimum Resources',\n    color: '#db7930',\n    description: 'Least amount of required resources',\n  },\n  levelled_resources: {\n    label: 'Levelled Resources',\n    color: '#AABB5D',\n    description: 'Best resource distribution',\n  },\n}\n\nexport default function Dashboard() {\n  const [navAt, setNavAt] = useState(0)\n  const [project, setProject] = useState(null)\n  const [optimizer, setOptimizer] = useState(null)\n  const [isPresetsReset, setIsPresetsReset] = useState(false)\n  const [optimizationPresets, setOptimizationPresets] =\n    useState(presets)\n  const [selectedPreset, setSelectedPreset] = useState('Balanced')\n  const [selectedResultIndex, setSelectedResultIndex] = useState(-1)\n  const [uploadedFile, setUploadedFile] = useState()\n  const [fileName, setFileName] = useState('No file chosen')\n  const [constraintsFileName, setConstraintsFileName] =\n    useState('No file chosen')\n  const [_, forceUpdate] = useReducer((x) => x + 1, 0)\n\n  function optimizePresets(project) {\n    if (!project) return\n  }\n\n  useEffect(() => {\n    if (isPresetsReset) {\n      optimizePresets(project)\n      setNavAt(1)\n      setIsPresetsReset(false)\n    }\n  }, [optimizationPresets, isPresetsReset])\n\n  let componentToRender = null\n\n  const baseline = {\n    tasks: optimizer?.plannedproject?.tasks,\n    resources: optimizer && Object.keys(optimizer?.plannedproject?.resources),\n    duration: optimizer?.plannedproject?.output?.projectDurationDays.data,\n    critical_paths: optimizer && Object.values(optimizer?.plannedproject?.output?.criticalPath)\n  }\n\n\n  if (navAt === 0)\n    componentToRender = (\n      <InputData\n        fileName={fileName}\n        setFileName={setFileName}\n        uploadedFile={uploadedFile}\n        setUploadedFile={setUploadedFile}\n        constraintsFileName={constraintsFileName}\n        setConstraintsFileName={setConstraintsFileName}\n        optimizer={optimizer}\n        setOptimizer={setOptimizer}\n        updateProject={(p) => {\n          setProject(p)\n        }}\n        goNext={() => {\n          setOptimizationPresets(presets)\n          setIsPresetsReset(true)\n        }}\n      />\n    )\n  else if (navAt === 1)\n    componentToRender = (\n      <BaselineSummary\n        baseline={baseline}\n        optimizer={optimizer}\n        selectedPreset={selectedPreset}\n        setSelectedPreset={setSelectedPreset}\n        selectedResultIndex={selectedResultIndex}\n        setSelectedResultIndex={setSelectedResultIndex}\n        results={optimizer?.results}\n        goPrev={() => {\n          setNavAt(navAt - 1)\n        }}\n        goNext={() => {\n          setNavAt(navAt + 1)\n          // if (selectedResultIndex === -1)\n          //   setSelectedResultIndex(\n          //     optimizationPresets[selectedPreset].optimizer.results.length - 1\n          //   )\n          // project.optimizer.loss_weights = {\n          //   ...optimizationPresets[selectedPreset].optimizer.loss_weights,\n          // }\n          // project.optimizer.results = [\n          //   ...optimizationPresets[selectedPreset].optimizer.results,\n          // ]\n        }}\n      />\n    )\n  else if (navAt === 2)\n    componentToRender = (\n      <OptimizedSummary\n        baseline={baseline}\n        optimizer={optimizer}\n        selectedPreset={selectedPreset}\n        setSelectedPreset={setSelectedPreset}\n        selectedResultIndex={selectedResultIndex}\n        setSelectedResultIndex={setSelectedResultIndex}\n        tasks={project?.tasks}\n        results={optimizer?.results}\n        goPrev={() => {\n          setNavAt(navAt - 1)\n        }}\n        goNext={() => {\n          setNavAt(navAt + 1)\n        }}\n      />\n    )\n  else if (navAt === 3)\n    componentToRender = (\n      <DetailedReport\n        optimizer={optimizer}\n        selectedPreset={selectedPreset}\n        selectedResultIndex={selectedResultIndex}\n        handleSelectResultIndex={(index) => {\n          setSelectedResultIndex(index)\n        }}\n        goPrev={() => {\n          setNavAt(navAt - 1)\n        }}\n        goNext={() => {\n          setNavAt(navAt + 1)\n        }}\n      />\n    )\n\n  return (\n    <>\n      <Header />\n      <Breadcrumb\n        navAt={navAt}\n        steps={steps}\n        navigate={(step) => {\n          // if (navAt === 1) {\n          //   if (selectedResultIndex === -1)\n          //     setSelectedResultIndex(\n          //       optimizationPresets[selectedPreset].optimizer.results.length - 1\n          //     )\n          //   project.optimizer.loss_weights = {\n          //     ...optimizationPresets[selectedPreset].optimizer.loss_weights,\n          //   }\n          //   project.optimizer.results = [\n          //     ...optimizationPresets[selectedPreset].optimizer.results,\n          //   ]\n          // }\n          // if (step === 0) {\n          //   setProject(undefined)\n          //   setFileName('Wait for the file to be re-uploaded')\n          // }\n          setNavAt(step)\n        }}\n        disabled={\n          navAt === 0 ||\n          project === undefined\n        }\n      />\n\n      <DashboardContainer>\n        <div className=\"content\">{componentToRender}</div>\n      </DashboardContainer>\n    </>\n  )\n}\n","require('dotenv').config()\n\nexport async function login(body) {\n\treturn await fetch(`${process.env.REACT_APP_API_URL}/auth/login`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(body)\n\t})\n}\n\nexport async function requestResetPassword(body) {\n\treturn await fetch(`${process.env.REACT_APP_API_URL}/auth/request-reset-password`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(body)\n\t})\n}\n\nexport async function resetPassword(body) {\n\treturn await fetch(`${process.env.REACT_APP_API_URL}/auth/reset-password`, {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(body)\n\t})\n}","export function validateEmail(email) {\n  const re = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\n  const result = re.test(String(email).toLowerCase())\n  if (result) { return { result: result, message: '' } }\n\n  return { result: result, message: 'Please enter a valid email address.' }\n}\n\nexport function validatePassword(password) {\n  if (password.length < 8)\n  \treturn { result: false, message: 'Password must be 8 characters or longer.' }\n\n  const upperReg = /[A-Z]+/\n  if (upperReg.test(password))\n    return { result: false, message: 'Password must contain an uppercase letter.' }\n\n  const lowerReg = /[A-Z]+/\n  if (lowerReg.test(password))\n    return { result: false, message: 'Password must contain a lowercase letter.' }\n\n  const numberReg = /[0-9]+/\n  if (numberReg.test(password))\n    return { result: false, message: 'Password must contain a number.' }\n\n  return { result: true, message: '' }\n}","import styled from 'styled-components'\n\nexport const LoginContainer = styled.div`\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(\n    180deg,\n    rgba(255, 204, 103, 0.195) 0%,\n    rgba(0, 145, 132, 0.3) 100%\n  );\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .MuiBox-root {\n    width: 450px;\n    h3 {\n      margin-top: 0;\n    }\n    &.form {\n      background: #ffffff;\n      padding: 30px;\n      border-radius: 16px;\n      box-sizing: border-box;\n      /* display: flex;\n      flex-direction: column; */\n      .MuiTextField-root {\n        width: 100%;\n        margin-bottom: 12px;\n      }\n    }\n    img.logo {\n      width: 300px;\n    }\n  }\n  .divider {\n    position: relative;\n    &:after { \n      content: '';\n      position: absolute;\n      height: 1px;\n      width: 100%;\n      background: #eeeeee;\n      left: 0;\n      bottom: 0;\n    }\n  }\n  .error {\n    color: rgb(0, 190, 174) !important;\n    font-weight: 700;\n  }\n`\n","import React, { useState, useRef } from 'react'\n\nimport Box from '@mui/material/Box'\nimport TextField from '@mui/material/TextField'\nimport { useSignIn } from 'react-auth-kit'\nimport { useNavigate } from 'react-router-dom'\n\nimport { login } from '../../lib/fetch'\n\nimport { validateEmail } from '../../utils/validator'\nimport { LoginContainer } from './styled'\n\nimport FLlogo from '../../assets/images/logo.png'\nimport { PrimaryButton } from 'src/styled'\n\nexport default function Login() {\n  const emailRef = useRef()\n  const [emailErrorMessage, setEmailErrorMessage] = useState('')\n  const [errorMessage, setErrorMessage] = useState('')\n\n  const passwordRef = useRef()\n  const [passwordErrorMessage, setPasswordErrorMessage] = useState('')\n\n  const signIn = useSignIn()\n  const navigate = useNavigate()\n\n  async function handleLogin() {\n    const validEmail = validateEmail(emailRef.current.value)\n    setEmailErrorMessage(validEmail.message)\n    if (!validEmail.result) { return }\n\n    const response = await login({\n      email: emailRef.current.value,\n      password: passwordRef.current.value,\n    })\n      .then((response) => {\n        return response.json()\n      })\n      .then((data) => {\n        if (data.resetPasswordRequired) {\n          // setErrorMessage('Your account has no password, you will be taken to reset password page')\n          setErrorMessage('This is your first time logging in, you will be redirected to set up a password.')\n          navigate('/#/reset-password?email=' + emailRef.current.value)\n          return\n        } else if (data.accessToken) {\n          signIn({\n            token: data.accessToken,\n            expiresIn: 24 * 60, // in minutes -> 1 day\n            tokenType: 'Bearer',\n            authState: { email: emailRef.current.value },\n          })\n          navigate('/')\n          return\n        } else {\n          setErrorMessage(data.message)\n          return\n        }\n      })\n      .catch((error) => {\n        console.error('Error:', error)\n      })\n  }\n\n  function handleForgotPassword() {\n    navigate('/reset-password?email=' + emailRef.current.value)\n  }\n\n  return (\n    <LoginContainer>\n      <Box\n        sx={{ display: 'flex', flexDirection: 'column', marginRight: '40px' }}\n      >\n        <img className='logo' src={FLlogo} alt='Frontline Logo' />\n        <h1>Optimization Platform</h1>\n        Find the best sequence of activities with\n        optimal resource loading to ace your project\n      </Box>\n      <Box className='form' component='form' noValidate autoComplete='off'>\n        <h2>Log In</h2>\n        <p className='error'>{errorMessage}</p>\n        <TextField\n          label='Email'\n          variant='outlined'\n          inputRef={emailRef}\n          error={emailErrorMessage !== ''}\n          helperText={emailErrorMessage}\n          placeholder='sample@googlemail.com'\n        />\n        <TextField\n          label='Password'\n          type='password'\n          variant='outlined'\n          inputRef={passwordRef}\n          error={passwordErrorMessage !== ''}\n          helperText={passwordErrorMessage}\n          placeholder='******'\n        />\n        <div className='row'>\n          <span style={{ textDecoration: 'underline', cursor: 'pointer' }} onClick={handleForgotPassword}>Forgot password</span>\n          <PrimaryButton variant='contained' onClick={handleLogin}>\n            Login\n          </PrimaryButton>\n        </div><br />\n        <div className='divider' />\n        <h2>New Users</h2>\n        Our platform is currently only available to subscribers.\n        Please contact <a href='mailto:sales@frontlinec.com' target=\"_blank\" rel=\"noreferrer\">sales@frontlinec.com</a> to request a demo.\n      </Box>\n    </LoginContainer>\n  )\n}\n","import styled from 'styled-components'\n\nexport const ResetContainer = styled.div`\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(\n    180deg,\n    rgba(255, 204, 103, 0.195) 0%,\n    rgba(0, 145, 132, 0.3) 100%\n  );\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .MuiBox-root {\n    width: 450px;\n    h3 {\n      margin-top: 0;\n    }\n    &.form {\n      background: #ffffff;\n      padding: 30px;\n      border-radius: 16px;\n      box-sizing: border-box;\n      /* display: flex;\n      flex-direction: column; */\n      p {\n        color: #888888;\n        &.error {\n          color: rgb(0, 190, 174);\n          font-weight: 700;\n          margin-bottom: 15px;\n        }\n      }\n      .MuiTextField-root {\n        width: 100%;\n        margin-bottom: 12px;\n      }\n    }\n    img.logo {\n      width: 300px;\n    }\n  }\n`\n","import React, { useState } from 'react'\nimport { useSearchParams } from 'react-router-dom'\n\nimport Box from '@mui/material/Box'\nimport TextField from '@mui/material/TextField'\n\nimport { requestResetPassword, resetPassword } from '../../lib/fetch'\nimport { useNavigate } from 'react-router-dom'\n\nimport FLlogo from '../../assets/images/logo.png'\n\nimport { validateEmail } from '../../utils/validator'\nimport { LoginContainer } from '../Login/styled'\n\nimport { ResetContainer } from './styled'\nimport { PrimaryButton, SecondaryButton } from 'src/styled'\n\nexport default function ResetPassword() {\n  const [searchParams, setSearchParams] = useSearchParams()\n  const [email, setEmail] = useState(searchParams.get('email') ? searchParams.get('email') : '')\n  const [password, setPassword] = useState('')\n  const [resetToken, setResetToken] = useState(searchParams.get('resetToken'))\n\n  const [errorMessage, setErrorMessage] = useState('')\n\n  const navigate = useNavigate()\n\n  async function handleRequestResetPassword() {\n    const validEmail = validateEmail(email)\n    setErrorMessage(validEmail.message)\n    if (!validEmail.result) { return }\n\n    const response = await requestResetPassword({ email: email })\n      .then(response => { return response.json() })\n      .then((data) => {\n        setErrorMessage('We have sent the password reset instructions to your email. Please note the link expires in 1 hour.')\n      })\n      .catch((error) => { console.error('Error:', error) })\n  }\n\n  async function handleResetPassword() {\n    const response = await resetPassword({ email: email, password: password, token: resetToken })\n      .then(response => { return response.json() })\n      .then((data) => {\n        setErrorMessage('Your password has been successfully reset!')\n        navigate('/')\n      })\n      .catch((error) => { console.error('Error:', error) })\n  }\n\n  function handleBackPage() {\n    navigate('/login')\n  }\n\n  if (resetToken)\n    return (\n      <LoginContainer>\n        <Box\n          sx={{ display: 'flex', flexDirection: 'column', marginRight: '40px' }}\n        >\n          <img className='logo' src={FLlogo} alt=\"Frontline Logo\" />\n          <h1>Optimization Platform</h1>\n          Find the best sequence of activities with\n          optimal resource loading to ace your project\n        </Box>\n        <Box className='form' component='form' noValidate autoComplete='off'>\n          <h2>Reset Password</h2>\n          {errorMessage}\n          <p>Your new password must be different from previous used passwords.</p>\n          <TextField label='Email' variant='outlined' value={email} disabled={true} />\n          <br />\n          <TextField label='Password' type='password' variant='outlined' value={password} onChange={e => setPassword(e.target.value)} />\n          <br />\n          <div className=\"row\">\n            <div />\n            <PrimaryButton variant='contained' onClick={handleResetPassword}>\n              Reset Password\n            </PrimaryButton>\n          </div>\n        </Box>\n      </LoginContainer>\n    )\n\n  return (\n    <>\n      <ResetContainer>\n        <Box\n          sx={{ display: 'flex', flexDirection: 'column', marginRight: '40px' }}\n          noValidate\n          autoComplete='off'\n        >\n          <img className='logo' src={FLlogo} alt=\"Frontline Logo\" />\n          <h1>Optimization Platform</h1>\n          Find the best sequence of activities with\n          optimal resource loading to ace your project\n        </Box>\n        <Box className='form' component='form' noValidate autoComplete='off'>\n          <h3>Reset Password</h3>\n          <p className='error'>{errorMessage}</p>\n          <p>Enter the email associated with your account and we'll send an email with instructions to reset your password.</p>\n          <TextField label='Email' placeholder=\"example@gmail.com\" variant='outlined' value={email} onChange={e => setEmail(e.target.value)} />\n          <div className=\"row\">\n            <SecondaryButton variant='contained' onClick={handleBackPage}>\n              Back\n            </SecondaryButton>\n            <PrimaryButton variant='contained' onClick={handleRequestResetPassword}>\n              Request\n            </PrimaryButton>\n          </div>\n        </Box>\n      </ResetContainer>\n    </>\n  )\n}","import React from 'react'\nimport { HashRouter, Route, Routes } from 'react-router-dom'\nimport { AuthProvider, RequireAuth } from 'react-auth-kit'\n\nimport Dashboard from './pages/Dashboard'\nimport Login from './pages/Login'\nimport ResetPassword from './pages/ResetPassword'\n\nimport { AppContainer } from './styled'\n\nexport default function App() {\n  return (\n    <AuthProvider\n      authType={'cookie'}\n      authName={'_auth'}\n      cookieDomain={window.location.hostname}\n      cookieSecure={false}\n    >\n      <HashRouter>\n        <AppContainer>\n          <Routes>\n            <Route\n              path='/'\n              element={\n                <RequireAuth loginPath='/login'>\n                  <Dashboard />\n                </RequireAuth>\n              }\n            />\n            <Route path='/login' element={<Login />} />\n            <Route path='/reset-password' element={<ResetPassword />} />\n          </Routes>\n        </AppContainer>\n      </HashRouter>\n    </AuthProvider>\n  )\n}\n","import { AppRegistry } from 'react-native'\nimport App from './App'\nimport './main.css'\n\nAppRegistry.registerComponent('App', () => App)\n\nAppRegistry.runApplication('App', {\n  rootTag: document.getElementById('root')\n})\n","module.exports = __webpack_public_path__ + \"static/media/logo.458142f4.png\";"],"sourceRoot":""}